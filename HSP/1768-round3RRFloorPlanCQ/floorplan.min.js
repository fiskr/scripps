(function(e){var t=typeof requirejs.config.waitSeconds!=="undefined"?requirejs.config.waitSeconds:"7";requirejs.config.waitSeconds=30;require(["http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v5.0.2.min.js"],function(e){(function(t){var n=n||{};n.App=function(){function y(e){return l!=null?l.indexOf(e)>-1:false}function b(e){if(!m)return e==v?"#B9B9BA":y(e)?"#E6E6E6":"#FFF";else return y(e)?"#E6E6E6":"#FFF"}function w(e){if(!y(e))g.push(e);o("visitedRooms",JSON.stringify(g),1)}function q(e){if(e!=null){var t=i.map(function(e){return e.id}).indexOf(e);return i[t]}return false}function R(e){L.setText(e);k.setText("CURRENT SPACE: ");k.offsetX(-(C.getWidth()-k.getWidth()-L.getWidth())/2);L.offsetX(-k.getWidth()-(C.getWidth()-k.getWidth()-L.getWidth())/2);A.draw()}function U(e,t){var n="";var r={};var i=0;var s=0;for(var o in e){s++}for(var o in e){r[o]=new Image;r[o].onload=function(){if(++i>=s){t(r)}};r[o].src=n+e[o]}}function z(n){function i(e){S.toggleClass("active").prop({disabled:true});x.toggleClass("active").prop({disabled:true});T.toggleClass("active").prop({disabled:true});N.toggleClass("active").prop({disabled:true});t(".active").prop({disabled:false});if(m){if(e==1)c.show().css("display","");else c.hide()}}var r=new e.Image({image:n.backgroundImage,x:0,y:0});F=new e.Image({image:n.firstFloorWallsImage,x:0,y:0});O.add(F);A.add(r);A.add(P);A.add(B);O.add(k);O.add(L);C.add(A);C.add(O);if(q(v).floor==1){B.hide();S.removeClass("active").prop({disabled:true});T.removeClass("active").prop({disabled:true})}else{P.hide();F.hide();x.removeClass("active").prop({disabled:true});N.removeClass("active").prop({disabled:true})}O.listening(false);A.draw();O.draw();S.on("click",function(){if(t(this).hasClass("active")){if(q(v).floor==1){D.show()}else{D.hide()}B.hide();P.show();F.show();A.draw();O.draw();i(1)}});x.on("click",function(){if(t(this).hasClass("active")){if(q(v).floor==1){D.hide()}else{D.show()}P.hide();F.hide();B.show();A.draw();O.draw();i(2)}});T.on("click",function(){if(t(this).hasClass("active")){if(q(v).floor==1){D.show()}else{D.hide()}B.hide();P.show();F.show();A.draw();O.draw();i(1)}});N.on("click",function(){if(t(this).hasClass("active")){if(q(v).floor==1){D.hide()}else{D.show()}P.hide();F.hide();B.show();A.draw();O.draw();i(2)}})}var n="DH15",r=[],i=[],s=t("#app").offset();i=[{name:"Front Yard",id:"front-yard",floor:1,roomBoundaries:0,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/front-yard-from-hgtv-dream-home-2015.html",point:{x:60.6,y:206.1},drawFunc:function(e){e.beginPath();e.moveTo(61.1,218.9);e.bezierCurveTo(54.3,218.9,48.7,213.4,48.7,206.5);e.bezierCurveTo(48.7,199.7,54.3,194.2,61.1,194.2);e.bezierCurveTo(68,194.2,73.5,199.7,73.5,206.5);e.bezierCurveTo(73.5,213.4,68,218.9,61.1,218.9);e.closePath();e.fillStrokeShape(this)}},{name:"Great Room",id:"great-room",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/great-room-from-hgtv-dream-home-2015.html",point:{x:148.5,y:198.3},drawFunc:function(e){e.beginPath();e.moveTo(182,127);e.lineTo(182,154);e.lineTo(153,154);e.lineTo(153,134);e.lineTo(142,134);e.lineTo(142,112);e.lineTo(113,112);e.lineTo(113,154);e.lineTo(103,154);e.lineTo(103,252);e.lineTo(113,252);e.lineTo(113,295);e.lineTo(134,295);e.lineTo(134,252);e.lineTo(208,252);e.lineTo(208,154);e.lineTo(199,154);e.lineTo(199,127);e.lineTo(182,127);e.closePath();e.fillStrokeShape(this)}},{name:"Kitchen",id:"kitchen",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/kitchen-from-hgtv-dream-home-2015.html",point:{x:163.8,y:277.6},drawFunc:function(e){e.beginPath();e.moveTo(199,252);e.lineTo(199,295);e.lineTo(134,295);e.lineTo(134,252);e.lineTo(199,252);e.closePath();e.fillStrokeShape(this)}},{name:"Master Bedroom",id:"master-bedroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/master-bedroom-from-hgtv-dream-home-2015.html",point:{x:231.2,y:325.9},drawFunc:function(e){e.beginPath();e.moveTo(113,295);e.lineTo(113,315);e.lineTo(199,315);e.lineTo(199,362);e.lineTo(221,362);e.lineTo(221,367);e.lineTo(241,367);e.lineTo(241,362);e.lineTo(264,362);e.lineTo(264,295);e.lineTo(113,295);e.closePath();e.fillStrokeShape(this)}},{name:"Master Patio",id:"master-patio",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/master-patio-from-hgtv-dream-home-2015.html",point:{x:214.2,y:375.2},drawFunc:function(e){e.beginPath();e.moveTo(199,354);e.lineTo(113,354);e.lineTo(113,362);e.lineTo(58,362);e.lineTo(58,394);e.lineTo(113,394);e.lineTo(113,378);e.lineTo(197,378);e.lineTo(197,394);e.lineTo(264,394);e.lineTo(264,362);e.lineTo(241,362);e.lineTo(241,367);e.lineTo(221,367);e.lineTo(221,362);e.lineTo(199,362);e.lineTo(199,354);e.closePath();e.fillStrokeShape(this)}},{name:"Master Closet",id:"master-closet",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/master-closet-from-hgtv-dream-home-2015.html",point:{x:177.5,y:336.3},drawFunc:function(e){e.beginPath();e.moveTo(199,354);e.lineTo(199,315);e.lineTo(155,315);e.lineTo(155,354);e.lineTo(199,354);e.closePath();e.fillStrokeShape(this)}},{name:"Dressing Room",id:"dressing-room",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/dressing-room-from-hgtv-dream-home-2015.html",point:{x:132.2,y:337.3},drawFunc:function(e){e.beginPath();e.moveTo(155,354);e.lineTo(155,315);e.lineTo(113,315);e.lineTo(113,354);e.lineTo(155,354);e.closePath();e.fillStrokeShape(this)}},{name:"Master Bathroom",id:"master-bathroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/master-bathroom-from-hgtv-dream-home-2015.html",point:{x:91.2,y:326.3},drawFunc:function(e){e.beginPath();e.moveTo(113,362);e.lineTo(58,362);e.lineTo(58,295);e.lineTo(113,295);e.lineTo(113,362);e.closePath();e.fillStrokeShape(this)}},{name:"Guest Bedroom",id:"guest-bedroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/guest-bedroom-from-hgtv-dream-home-2015.html",point:{x:84.2,y:85.9},drawFunc:function(e){e.beginPath();e.moveTo(58,112);e.lineTo(58,45);e.lineTo(113,45);e.lineTo(113,75);e.lineTo(132,75);e.lineTo(132,112);e.lineTo(58,112);e.closePath();e.fillStrokeShape(this)}},{name:"Guest Bathroom",id:"guest-bathroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/guest-bathroom-from-hgtv-dream-home-2015.html",point:{x:120.8,y:51.6},drawFunc:function(e){e.beginPath();e.moveTo(132,75);e.lineTo(113,75);e.lineTo(113,31);e.lineTo(132,31);e.lineTo(132,75);e.closePath();e.fillStrokeShape(this)}},{name:"Laundry Room",id:"laundry-room",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/laundry-room-from-hgtv-dream-home-2015",point:{x:167.5,y:142.6},drawFunc:function(e){e.beginPath();e.moveTo(182,134);e.lineTo(153,134);e.lineTo(153,154);e.lineTo(182,154);e.closePath();e.fillStrokeShape(this)}},{name:"Kids' Bedroom",id:"kids--bedroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/kids--bedroom-from-hgtv-dream-home-2015.html",point:{x:225.2,y:85.2},drawFunc:function(e){e.beginPath();e.moveTo(199,94);e.lineTo(182,94);e.lineTo(182,127);e.lineTo(199,127);e.lineTo(199,112);e.lineTo(253,112);e.lineTo(253,45);e.lineTo(182,45);e.lineTo(182,70);e.lineTo(199,70);e.lineTo(199,94);e.closePath();e.fillStrokeShape(this)}},{name:"Kids' Bathroom",id:"kids--bathroom",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/kids--bathroom-from-hgtv-dream-home-2015.html",point:{x:170.8,y:118.6},drawFunc:function(e){e.beginPath();e.moveTo(182,112);e.lineTo(142,112);e.lineTo(142,134);e.lineTo(182,134);e.closePath();e.fillStrokeShape(this)}},{name:"Garage",id:"garage",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/garage-from-hgtv-dream-home-2015.html",point:{x:153.5,y:69.2},drawFunc:function(e){e.beginPath();e.moveTo(132,112);e.lineTo(182,112.1);e.lineTo(182,94);e.lineTo(199,94);e.lineTo(199,70);e.lineTo(182,70);e.lineTo(182,45);e.lineTo(199,45);e.lineTo(199,31);e.lineTo(132,31);e.lineTo(132,112);e.closePath();e.fillStrokeShape(this)}},{name:"Back Patio",id:"back-patio",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/back-patio-from-hgtv-dream-home-2015.html",point:{x:239.5,y:203.3},drawFunc:function(e){e.beginPath();e.moveTo(265,295);e.lineTo(265,252);e.bezierCurveTo(265,252,275.3,233.5,275.3,202.2);e.bezierCurveTo(275.2,175.1,265,154,265,154);e.lineTo(208,154);e.lineTo(208,252);e.lineTo(199,252);e.lineTo(199,295);e.lineTo(265,295);e.closePath();e.fillStrokeShape(this)}},{name:"Outdoor Shower",id:"outdoor-shower",floor:1,roomBoundaries:1,visited:y(this.name),clicktag:"http://www.hgtv.com/design/hgtv-dream-home/2015/articles/outdoor-shower-from-hgtv-dream-home-2015.html",point:{x:225.8,y:120},drawFunc:function(e){e.beginPath();e.moveTo(216,112);e.lineTo(216,127);e.lineTo(237,127);e.lineTo(237,112);e.lineTo(216,112);e.closePath();e.fillStrokeShape(this)}}];var o=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"};var u=function(e){var t=e+"=";var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null};var a=function(e){o(e,"",-1)};var f=u("visitedRooms"),l=JSON.parse(f);var c="/articles/",h="-from-hgtv-dream-home-2015.html",p=document.location.pathname;var d=p.substring(document.location.pathname.lastIndexOf(c)+c.length,p.indexOf(h));var v=d?q(d)?d:i[0].id:i[0].id;var m=q(d)?false:true;var g=l!=null?l:[];o("visitedRooms",JSON.stringify(g),1);var E=t("#tip"),c=t("#start"),S=t("#floor-down"),x=t("#floor-up"),T=t("#floor-1"),N=t("#floor-2");var C=new e.Stage({container:"floorplanContainer",width:322,height:455});var k=new e.Text({x:0,y:420,fontSize:11,fill:"#888"});var L=new e.Text({x:0,y:418,fontSize:15,fontStyle:"bold",fill:"#444"});var A=new e.Layer;var O=new e.Layer;var M=new e.Group;var _=new e.Group;var D=new e.Group;var P=new e.Group;var H=new e.Group;var B=new e.Group;var j=new e.Group;var F;for(var I=i.length-1;I>=0;I--){r.push({name:i[I].name,id:i[I].id,floor:i[I].floor,clicktag:i[I].clicktag,shape:new e.Shape({drawFunc:i[I].drawFunc,fill:b(i[I].id),name:i[I].name,id:I,opacity:i[I].roomBoundaries})})}for(var I=r.length-1;I>=0;I--){r[I].shape.on("mouseover",function(){E.show().text(this.getAttr("name"));if(i[this.getAttr("id")].id!=v||m)this.setFill("#BADBE5");A.draw();document.body.style.cursor="pointer";c.removeClass("display")});r[I].shape.on("click touchend",function(e){if(e.button!=2){w(i[this.getAttr("id")].id);var t=t||{};if(t.tl!=null){t.events="event47";t.eVar46=n;t.eVar47=n+":Select New Space-RR Floor Plan";t.eVar48=n+":Tour:Select New Space-RR Floor Plan:"+q(v).name+" to "+this.getAttr("name");t.tl()}window.location.href=i[this.getAttr("id")].clicktag}});r[I].shape.on("mouseout",function(){E.hide();this.setFill(b(i[this.getAttr("id")].id));A.draw();document.body.style.cursor="default";if(m){c.addClass("display")}});if(r[I].floor==1)P.add(r[I].shape);else B.add(r[I].shape)}t("#floorplanContainer").on("mousemove",function(e){s=t("#app").offset();var n=e.pageX-E.width()/1.5-s.left;var r=e.pageY-33-s.top;var i=E.width();var o=E.height();var u=t("#floorplanContainer").width()-(n+i);var a=t("#floorplanContainer").height()-(r+o);if(u<20){n=e.pageX-i}if(a<20){r=e.pageY-o-20}E.css({top:r,left:n})});t("#mobileCurtain").on("click tap",function(e){var t={x:e.offsetX,y:e.offsetY};var n=C.getIntersection(t);n.fire("click")});k.offsetX(-(C.getWidth()-k.getWidth())/2);var W={firstFloorWallsImage:"http://images.hgtv.com/webhgtv/hg20/pkgs/2015/dream-home/first-floor.png",backgroundImage:"http://images.hgtv.com/webhgtv/hg20/pkgs/2015/dream-home/background-white.png"};U(W,z);var X=q(v),V=X.point.x,J=X.point.y;if(m){c.css({top:J+10,left:V-c.outerWidth()/2}).addClass("display")}else{R(X.name);var K=new e.Circle({x:V,y:J,radius:6.5,fill:"#333"});var Q=new e.Circle({x:V,y:J,radius:4,stroke:"#333",strokeWidth:1});var G=new e.Circle({x:V,y:J,radius:4,stroke:"#333",strokeWidth:1});var Y=new e.Circle({x:V,y:J,radius:4,stroke:"#333",strokeWidth:1});D.add(Q);D.add(G);D.add(Y);D.add(K);O.add(D);var Z=new e.Tween({node:K,duration:.8,scaleX:1.6,scaleY:1.6,onFinish:function(){var t=new e.Tween({node:K,duration:.5,scaleX:1,scaleY:1,onFinish:function(){setTimeout(function(){t.reset();Z.play()},3e3)}});this.reset();t.play();setTimeout(function(){et.play();tt.play()},100);setTimeout(function(){nt.play()},200)}});var et=new e.Tween({node:Q,duration:.9,radius:48,opacity:.05,easing:e.Easings["EaseOut"],onFinish:function(){this.reset()}});var tt=new e.Tween({node:G,duration:1.8,radius:48,opacity:.05,easing:e.Easings["EaseOut"],onFinish:function(){this.reset()}});var nt=new e.Tween({node:Y,duration:3.4,radius:48,opacity:.05,easing:e.Easings["EaseOut"],onFinish:function(){rt();this.reset()}});function rt(){Z.play()}Z.play()}return{createCookie:o,readCookie:u,eraseCookie:a}}()})(jQuery)});requirejs.config.waitSeconds=t})(jQuery)