window.BOX_SERVER_HOST="http://myphotos.hgtv.com";window.BOX_SERVER_S_API="http://dje7rr2pnbe7f.cloudfront.net/public/s/";window.SNI=window.SNI||{};window.SNI.BOX=window.SNI.BOX||{};window.SNI.MRB=window.SNI.MRB||{};
window.SNI.BOX.DEBUG=function(){var h=function(){if("undefined"!==typeof console)if(null!==/msie/i.exec(navigator.userAgent)){var b="",a;for(a=0;a<arguments.length;a+=1)0<b.length&&(b+=", "),b="function"===typeof arguments[a]?b+"[function]":"object"===typeof arguments[a]&&"object"===typeof JSON&&"function"===typeof JSON.stringify?b+JSON.stringify(arguments[a]):b+arguments[a].toString();console.log(b)}else try{console.log.apply(null,arguments)}catch(f){console.log(arguments)}},d=!1,n={},b={},p=function(){var b=
"string"===typeof this?this:this instanceof String?this.toString():null;if(p.isEnabled(b)){var a=Array.prototype.slice.call(arguments,0);b&&a.unshift("["+b+"]");h.apply(null,a)}};p.enable=function(b){"string"===typeof b?n[b]=!0:d=!0};p.disable=function(b){"string"===typeof b?n[b]=!1:d=!1};p.isEnabled=function(c){if("string"===typeof c&&null!==c){var a=0<arguments.length&&Array.isArray(arguments[1])?arguments[1]:[];if(-1!==a.indexOf(c))return!1;a.push(c);var f=b[c];return!1!==n[c]&&(!0===n[c]||p.isEnabled(f,
a))}return d||-1!==window.location.hash.indexOf("_debugMrb")};p.forScope=function(c,a){a&&!b[a]&&(b[a]=null);c&&(b[c]=a||null);return function(a){return function(){p.apply(a,arguments)}}(c)};return p}();window.SNI.MRB.DEBUG=window.SNI.BOX.DEBUG;var EXECUTION=SNI.BOX.DEBUG.forScope("EXECUTION");
(function(h,d){function n(){h.resetTimer&&clearTimeout(h.resetTimer);h.resetTimer=setTimeout(b,100)}function b(){var a=new Date;g.width=h.innerWidth||d.clientWidth;g.height=h.innerHeight||d.clientHeight;g.aspectRatio=g.width/g.height;g.orientation=g.width>g.height?"landscape":"portrait";g.deviceWidth=screen.width;g.deviceHeight=screen.height;g.deviceAspectRatio=g.deviceWidth/g.deviceHeight;g.deviceOrientation=g.deviceWidth>g.deviceHeight?"landscape":"portrait";f();EXECUTION("getMediaFeatures took: "+
(new Date-a)+" ms")}function p(b){return Function("d","return("+b.replace(/\(|\)/g,"").replace(/\s*,\s*/g,") || (").replace(/\s+and\s+/gi," \x26\x26 ").replace(/min-(.*?):/gi,"$1\x3e\x3d").replace(/max-(.*?):/gi,"$1\x3c\x3d").replace(/above-(.*?):/gi,"$1\x3e").replace(/below-(.*?):/gi,"$1\x3c").replace(/min-|max-/gi,"").replace(/(all|screen|print)/,"d.$1").replace(/:/g,"\x3d\x3d").replace(/([\w-]+)\s*([<>=]+)\s*(\w+)/g,function(b,e,f,d){return"d."+c(e)+f+a(d)}).replace(/([<>=]+)([A-z][\w-]*)/g,'$1"$2"')+
")")(g)}function c(a){return a.toLowerCase().replace(/-[a-z]/g,function(a){return a[1].toUpperCase()})}function a(a){return a.replace(/([\d\.]+)(%|em|in|pt|px)/,function(a,b,c){return"em"==c?16*b:"in"==c?96*b:"pt"==c?96*b/72:"%"==c?b/(scope.innerWidth||d.clientWidth):b})}function f(){for(var a=0,b,c,e;b=t[a];++a)if(c=b.media.match(/(.+?):media\((.+?)\)/)){if(d.querySelectorAll){all=d.querySelectorAll(c[1]);for(var f=0;e=all[f];++f){if(/this/.test(c[2])){var k=e.getBoundingClientRect();g.thisWidth=
k.width||k.right-k.left;g.thisHeight=k.height||k.bottom-k.top;g.thisAspectRatio=g.thisWidth/g.thisHeight;g.thisOrientation=g.thisWidth>g.thisHeight?"landscape":"portrait"}0<e.clientWidth&&(p(c[2])?q(e,b.className):u(e,b.className))}}}else 0<e.clientWidth&&(p(b.media)?q(d,b.className):u(d,b.className))}function e(a,b){var c=this,e=1;c.className=a;c.media=b;c.index=t.push(c)-1;c.enable=function(){e||(c.index=t.push(c)-1,e=!0)};c.disable=function(){e&&(t.splice(c.index,1),e=!1)};c.refresh=function(){f()}}
var g={all:!0,screen:!0,print:!1},k=("addEventListener"in h?"addEventListener ":"attachEvent on").split(" "),l=["blur","orientationchange","click"],m=["resize","scroll"],v=0;for(;l[v];++v)h[k[0]](k[1]+l[v],b);for(v=0;m[v];++v)h[k[0]](k[1]+m[v],n);var r=Array.prototype.lastIndexOf||function(a){for(var b=this.length;-1<--b&&this[b]!=a;);return b},q=function(a,b){var c=a.className?a.className.split(/\s+/):[];0>r.call(c,b)&&(a.className=c.concat(b).join(" "))},u=function(a,b){var c=a.className?a.className.split(/\s+/):
[],e=r.call(c,b);-1<e&&c.splice(e,1)&&(a.className=c.join(" "))},t=[];h.MediaClass=function(a,b){var c=new e(a,b);f();return c};b()})(this,document.documentElement);
function EnvironmentContext(h,d,n){var b=this;if("undefined"!==typeof n&&"boolean"!==typeof n)throw Error('IllegalArgumentException: "decoupled" must be a boolean!');n=!0;b.decoupled=n;b.createTime=new Date;b.name=h;b.loaded=!1;b.callbacks=[];b.executeCallback=d;b.timerRunning=n;b.timer=setInterval(function(){!0===b.loaded&&(SNI.MRB.DEBUG('Executing "'+b.name+'" callbacks'),b.executeContextLoadedCallbacks())},30);b.createHandler(b.name)}
EnvironmentContext.prototype={createHandler:function(h){if("undefined"===typeof h||0===h.length)throw Error("handler name cannot be blank");if("undefined"!==typeof window[h])throw Error("window["+h+"] is already defined");var d=this;window[h]=function(h){"function"===typeof h&&(!0===d.loaded&&!1===d.timerRunning?(SNI.MRB.DEBUG('context.loaded was true, invoking "'+d.name+'" callback immediately'),d.executeCallback.call(null,h)):(!0===d.timerRunning?SNI.MRB.DEBUG('context.timerRunning was true, pushing "'+
d.name+'" callback to queue'):SNI.MRB.DEBUG('context.loaded was false, pushing "'+d.name+'" callback to queue'),d.callbacks.push(h)))}},setContextLoaded:function(){this.loaded=!0;!1===this.decoupled&&this.executeContextLoadedCallbacks()},executeContextLoadedCallbacks:function(){var h;clearInterval(this.timer);for(h=0;h<this.callbacks.length;h+=1)SNI.MRB.DEBUG('Executing "'+this.name+'" callback from queue position '+h),this.executeCallback.call(null,this.callbacks[h]);this.timerRunning=!1;this.callbacks=
[]}};
"undefined"===typeof $LAB&&function(h){function d(a,b){var c=/^\w+\:\/\//;/^\/\/\/?/.test(a)?a=location.protocol+a:c.test(a)||"/"==a.charAt(0)||(a=(b||"")+a);return c.test(a)?a:("/"==a.charAt(0)?r:v)+a}function n(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function b(a,b,c,e){a.onload=a.onreadystatechange=function(){a.readyState&&"complete"!=a.readyState&&"loaded"!=a.readyState||b[c]||(a.onload=a.onreadystatechange=null,e())}}function p(a){a.ready=a.finished=!0;for(var b=0;b<a.finished_listeners.length;b++)a.finished_listeners[b]();
a.ready_listeners=[];a.finished_listeners=[]}function c(a,c,f,d,g){setTimeout(function(){var k,p=c.real_src,l;if("item"in q){if(!q[0]){setTimeout(arguments.callee,25);return}q=q[0]}k=document.createElement("script");c.type&&(k.type=c.type);c.charset&&(k.charset=c.charset);g?y?(f.elem=k,x?(k.preload=!0,k.onpreload=d):k.onreadystatechange=function(){"loaded"==k.readyState&&d()},k.src=p):g&&0==p.indexOf(r)&&a[e]?(l=new XMLHttpRequest,l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=
function(){},f.text=l.responseText+"\n//@ sourceURL\x3d"+p,d())},l.open("GET",p),l.send()):(k.type="text/cache-script",b(k,f,"ready",function(){q.removeChild(k);d()}),k.src=p,q.insertBefore(k,q.firstChild)):(w&&(k.async=!1),b(k,f,"finished",d),k.src=p,q.insertBefore(k,q.firstChild))},0)}function a(){function v(a,c,e){function f(){null!=d&&(d=null,p(e))}var d;G[c.src].finished||(a[k]||(G[c.src].finished=!0),d=e.elem||document.createElement("script"),c.type&&(d.type=c.type),c.charset&&(d.charset=c.charset),
b(d,e,"finished",f),e.elem?e.elem=null:e.text?(d.onload=d.onreadystatechange=null,d.text=e.text):d.src=c.real_src,q.insertBefore(d,q.firstChild),e.text&&f())}function r(a,b,e,f){var g,q,h=function(){b.ready_cb(b,function(){v(a,b,g)})},y=function(){b.finished_cb(b,e)};b.src=d(b.src,a[m]);b.real_src=b.src+(a[l]?(/\?.*$/.test(b.src)?"\x26_":"?_")+~~(1E9*Math.random())+"\x3d":"");G[b.src]||(G[b.src]={items:[],finished:!1});q=G[b.src].items;a[k]||0==q.length?(g=q[q.length]={ready:!1,finished:!1,ready_listeners:[h],
finished_listeners:[y]},c(a,b,g,f?function(){g.ready=!0;for(var a=0;a<g.ready_listeners.length;a++)g.ready_listeners[a]();g.ready_listeners=[]}:function(){p(g)},f)):(g=q[0],g.finished?y():g.finished_listeners.push(y))}function u(){function a(b,e){b.ready=!0;b.exec_trigger=e;c()}function b(a,e){a.ready=a.finished=!0;a.exec_trigger=null;for(var f=0;f<e.scripts.length;f++)if(!e.scripts[f].finished)return;e.finished=!0;c()}function c(){for(;k<d.length;)if("[object Function]"==Object.prototype.toString.call(d[k]))try{d[k++]()}catch(a){}else{if(!d[k].finished){for(var b=
d[k],e=!1,f=0;f<b.scripts.length;f++)b.scripts[f].ready&&b.scripts[f].exec_trigger&&(e=!0,b.scripts[f].exec_trigger(),b.scripts[f].exec_trigger=null);if(e)continue;break}k++}k==d.length&&(l=p=!1)}var e,f=n(t,{}),d=[],k=0,p=!1,l;e={script:function(){for(var c=0;c<arguments.length;c++){var k=arguments[c],m=arguments[c],q=void 0;"[object Array]"==Object.prototype.toString.call(k)||(m=[k]);for(var v=0;v<m.length;v++)l&&l.scripts||d.push(l={scripts:[],finished:!0}),k=m[v],"[object Function]"==Object.prototype.toString.call(k)&&
(k=k()),k&&("[object Array]"==Object.prototype.toString.call(k)?(q=[].slice.call(k),q.unshift(v,1),[].splice.apply(m,q),v--):("string"==typeof k&&(k={src:k}),k=n(k,{ready:!1,ready_cb:a,finished:!1,finished_cb:b}),l.finished=!1,l.scripts.push(k),r(f,k,l,w&&p),p=!0,f[g]&&e.wait()))}return e},wait:function(){if(0<arguments.length){for(var a=0;a<arguments.length;a++)d.push(arguments[a]);l=d[d.length-1]}else l=!1;c();return e}};return{script:e.script,wait:e.wait,setOptions:function(a){n(a,f);return e}}}
var t={},w=y||z,x=[],G={},H;t[e]=!0;t[g]=!1;t[k]=!1;t[l]=!1;t[m]="";return H={setGlobalDefaults:function(a){n(a,t);return H},setOptions:function(){return u().setOptions.apply(null,arguments)},script:function(){return u().script.apply(null,arguments)},wait:function(){return u().wait.apply(null,arguments)},queueScript:function(){x[x.length]={type:"script",args:[].slice.call(arguments)};return H},queueWait:function(){x[x.length]={type:"wait",args:[].slice.call(arguments)};return H},runQueue:function(){for(var a=
H,b=x.length,c;0<=--b;)c=x.shift(),a=a[c.type].apply(null,c.args);return a},noConflict:function(){h.$LAB=f;return H},sandbox:function(){return a()}}}var f=h.$LAB,e="UseLocalXHR",g="AlwaysPreserveOrder",k="AllowDuplicates",l="CacheBust",m="BasePath",v=/^[^?#]*\//.exec(location.href)[0],r=/^\w+\:\/\/\/?[^\/]+/.exec(v)[0],q=document.head||document.getElementsByTagName("head"),u=h.opera&&"[object Opera]"==Object.prototype.toString.call(h.opera)||"MozAppearance"in document.documentElement.style,t=document.createElement("script"),
x="boolean"==typeof t.preload,y=x||t.readyState&&"uninitialized"==t.readyState,w=!y&&!0===t.async,z=!y&&!w&&!u;h.$LAB=a();(function(a,b,c){null==document.readyState&&document[a]&&(document.readyState="loading",document[a](b,c=function(){document.removeEventListener(b,c,!1);document.readyState="complete"},!1))})("addEventListener","DOMContentLoaded")}(this);
"undefined"===typeof window.$LAB||"undefined"!==typeof window.SNI&&"undefined"!==typeof window.SNI.MRB&&"undefined"!==typeof window.SNI.MRB.LOADED?SNI.BOX.DEBUG("LAB.js script loader could not be found!"):function(h){window.SNI=window.SNI||{};window.SNI.BOX=window.SNI.BOX||{};window.SNI.BOX.LOADED=!0;var d=SNI.BOX.DEBUG.forScope("CORE"),n=SNI.BOX.DEBUG.forScope("AUTH","CORE"),b=SNI.BOX.DEBUG.forScope("RENDER","CORE"),p=SNI.BOX.DEBUG.forScope("EXECUTION","CORE"),c=/^((?:(https?):)?(?:\/\/)?([^\/:]+)(?::\d+)?)/,
a=/(?:[^.]+\.)*([^.]+\.[^.]+)$/,f=function(b){b=c.exec(b);b=null==b||4>b.length?null:b[3];if(null===b)return null;b=a.exec(b);return null==b||2>b.length?null:b[1]},e=function(a){a=/^(?:(https?):)?(?:\/\/)?(([^\/:]+)(:\d+)?)/.exec(a);return null===a||3>a.length?null:a[2]},g=function(a){a=c.exec(a);return null===a?null:a[1]},k=function(a){if("undefined"===typeof a||null===a)throw Error("url cannot be blank");a=c.exec(a);var b=c.exec(window.location);if(null===a||null===b)return!1;var e=a[3],f=b[3];
return a[2]!==b[2]||e!==f},l=function(){(function(a){d("Using jQuery version: "+a.fn.jquery);var c=[{url:"/js/mediaclass.js",shouldLoad:function(){return"function"!==typeof window.MediaClass}}],l={},m=function(b,c){var e,f,k,p=[];if(c instanceof Array)for(e=0;e<c.length;e+=1){if("string"!==typeof c[e].url)throw Error('"url" field of script dependency is required');"function"===typeof c[e].shouldLoad&&!0!==c[e].shouldLoad.call(null)||!1!==l.hasOwnProperty(c[e].url)?d("Skipping script dependency ["+
c[e].url+"]"):(l[c[e].url]=!0,k=g(c[e].url),f=null===k?b+c[e].url:c[e].url,d("Loading script dependency  ["+f+"]"),function(){var b=new a.Deferred;p.push(b);h.queueScript(""+f).queueWait(function(){b.resolve()})}());0<p.length&&h.runQueue()}return a.when.apply(null,p).pipe(function(){d("All script dependencies loaded.")})},q=function(b,c){var e,f,k;if(c instanceof Array)for(e=0;e<c.length;e+=1){if("string"!==typeof c[e].url)throw Error('"url" field of style dependency is required');"function"!==typeof c[e].shouldLoad||
!0===c[e].shoudlLoad.call(null)?(f=g(c[e].url),f=null===f?b+c[e].url:c[e].url,0<a('link[rel\x3d"stylesheet"][href\x3d"'+f+'"]').size()||(k=/\.less$/.test(f),k=a("\x3clink /\x3e",{rel:k?"stylesheet/less":"stylesheet",type:k?"stylesheet/less":"text/css",href:f}),d("Loading style dependency ["+f+"]"),a("head").append(k))):d("Skipping style dependency ["+f+"]")}},v=function(a,b){if("string"!==typeof b||!a)return null;b=b.trim().trim();if(0===b.length)return null;var c=b.split("/"),e,f=a;for(e=0;e<c.length;e+=
1){var k=c[e];if("object"!==typeof f)return null;if(!1===f.hasOwnProperty(k))if(/^\d+$/.test(k))k=parseInt(k,10),Array.isArray(f)&&0<=k&&k<f.length&&(f=f[k]);else return null;else f=f[k]}return f},r=function(c,e,f,k,d,g){var l=a(this),m,q,v,h,r=a(c),u=function(b,c){var f=a(c),p=null===e?t(f):e;m.callback.apply(f,[p,k,d,g])},n=new Date;for(c=0;c<f.length;c+=1){m=f[c];var x=new Date;h=v=q=null;"undefined"!==typeof m.type&&(q=r.find('[itemtype~\x3d"'+m.type+'"]').add(r.filter('[itemtype~\x3d"'+m.type+
'"]')),0===q.size()?(h=l.closest('[itemscope][itemtype~\x3d"'+m.type+'"]'),0<h.size()&&"undefined"!==typeof m.prop&&(v=r.find('[itemprop\x3d"'+m.prop+'"]').add(r.filter('[itemprop\x3d"'+m.prop+'"]')))):"undefined"!==typeof m.prop&&(v=q.find('[itemprop\x3d"'+m.prop+'"]')));"undefined"!==typeof m.prop&&null!==v&&null!==v&&0<v.size()?(b("RENDER: [type/prop:"+m.type+"/"+m.prop+"]",v,m.callback),v.each(u)):"undefined"===typeof m.prop&&"undefined"!==typeof m.type&&null!==q&&0<q.size()?(b("RENDER: [type:"+
m.type+"]",q,m.callback),q.each(u)):"undefined"===typeof m.prop&&"undefined"!==typeof m.type&&null!==h&&0<h.size()?(b("RENDER: [type:"+m.type+"]",h,m.callback),h.each(u)):"undefined"===typeof m.prop&&"undefined"===typeof m.type&&(b("RENDER: [module]",r,m.callback),m.callback.apply(r,[e,k,d,g]));10<new Date-x&&p("Applying renderer: ",m," took: "+(new Date-x)+" ms")}p("Applying all renderers took: "+(new Date-n)+" ms")},u=function(b,c){var e="boolean"===typeof c?c:!1,f=a(b),k=f.attr("itemtype").split(/\s+/),
d={},g={},p=!1,l=f.filter("[itemprop]").add(f.find("[itemprop]")),m=f.attr("itemref");"undefined"!==typeof m&&a("#"+m.split(" ").join(",#")).each(function(){var b=a(this),c=b.filter("[itemprop]");0===c.size()&&(c=b.find("[itemprop]"));c.data("itemRef",b);l.add(c)});l.each(function(){var b=a(this),e,k,l,m;m=" "+b[0].tagName.toLowerCase()+" ";e=b.parent().closest("[itemscope]");l=(k=b.data("itemRef"))?a('[itemref~\x3d"'+k[0].id+'"]'):null;if(!1===b.is(f)&&(!0===e.is(f)&&!l||l&&l.is(f)&&!a.contains(k[0],
l[0]))&&(p=!0,b.is("[itemscope]")?m=u(b,c):-1!==" meta ".indexOf(m)?m=a.trim(b.attr("content")):-1!==" audio embed iframe img source track video ".indexOf(m)?m=a.trim(b.attr("src")):-1!==" a area link ".indexOf(m)?m=a.trim(b.attr("href")):-1!==" object ".indexOf(m)?m=a.trim(b.attr("data")):-1!==" data meter ".indexOf(m)?(m=a.trim(b.attr("datetime")),m="undefined"===typeof m?a.trim(b.text()):m):m=-1!==" input select textarea ".indexOf(m)?b.val():a.trim(b.text()),e=b.attr("itemprop"),"undefined"!==
typeof e&&0<a.trim(e).length))for(k=e.split(/\s+/),l=0;l<k.length;l+=1)e=a.trim(k[l]),"undefined"===typeof g[e]&&(g[e]=[]),g[e].push(b[0]),""!==m&&("undefined"===typeof d[e]&&(d[e]=[]),d[e].push(m))});var m={},q=f.attr("itemid");!0===p&&(m.properties=d);0<k.length&&(m.types=k);"undefined"!==typeof q&&(m.id=q);!0===e&&(m._DOMrefs=g);return m},t=function(b,c){var e=a(b),f=[],k=e.filter("[itemscope]").add(e.find("[itemscope][itemprop]").not(e.find("[itemscope] [itemscope][itemprop]")).not(e.filter("[itemscope]").find("[itemscope][itemprop]")));
0===k.size()&&(k=k.add(e.closest("[itemscope]")));k.each(function(){var b=a(this),k=b.parent().closest("[itemscope]");0!==k.size()&&!1!==a.contains(e,k)||f.push(u(b,c))});return f},x=function(a,b){if("undefined"===typeof a||null===a)throw Error("dataType cannot be blank");if(!0===b)return"jsonp";if("html"===a)return null;if("json"===a)return"json";throw Error('Unrecognized dataType: "'+a+'"');},H=function(a,b){if("undefined"===typeof a||null===a)throw Error("dataType cannot be blank");return!0===
b&&"html"===a?"html":null},S=function(a,b){var c="";void 0!==a&&null!==a&&(c+="_format\x3d"+a);void 0!==b&&null!==b&&(0<c.length&&(c+="\x26"),c+="_result\x3d"+b);return c},N=function(b,c,e,f,k){var d=new Date,g=a(this),l;l=!0===f.reRender?g:a("\x3cdiv /\x3e");var m,q;"string"===typeof b?(q=new Date,b=b.replace(/^(?:.|[\r\n])*?<body[^>]*>/ig,""),b=b.replace(/<\/body>(?:.|[\r\n])*?$/ig,""),l.append(b),m=null,p("processing frame response took: "+(new Date-q)+" ms"),q=new Date,0<c.length&&l.children().each(function(){r.apply(g,
[a(this),m,c,e,f,k])}),p("applying all renderers to all children took: "+(new Date-q)+" ms")):"undefined"!==typeof b.status&&"ok"===b.status&&"string"===typeof b.result?(q=new Date,b=b.result,b=b.replace(/^(?:.|[\r\n])*?<body[^>]*>/ig,""),b=b.replace(/<\/body>(?:.|[\r\n])*?$/ig,""),l.append(b),m=null,p("processing frame response took: "+(new Date-q)+" ms"),q=new Date,0<c.length&&l.children().each(function(){r.apply(g,[a(this),m,c,e,f,k])}),p("applying all renderers to all children took: "+(new Date-
q)+" ms")):"undefined"!==typeof b.status&&"ok"===b.status&&"object"===typeof b.result?(m=b.result,0<c.length&&r.apply(g,[l,m,c,e,f,k])):"object"===typeof b&&(m=b,0<c.length&&r.apply(g,[l,m,c,e,f,k]));q=new Date;l.find("[data-mrb-module-name]").each(function(){var b=a(this);if(0<b.parent().closest("[data-mrb-module-name]").size()){var c=b.data("mrbModuleName"),e=b.data("mrbModuleUrl");"undefined"!==typeof a.fn[c]&&a.fn[c].call(b,a.extend(!0,{},f,{url:e}))}});p("nested module processing took: "+(new Date-
q)+" ms");p("renderModule took: "+(new Date-d)+" ms");return l.children()},M=function(b,c,e,f){b=a(b);b.filter(".dari-frame").add(b.find(".dari-frame")).each(function(){var b=a(this);b.attr("data-ajax-data-type",c);b.attr("data-ajax-result-type",e);b.attr("data-source-data-format",f)});return null},O={setBody:function(b){var c=new Date,e=a(this),f=e.data("ajaxDataType"),k=e.data("ajaxResultType"),g=e.data("sourceDataFormat"),l=e.is(".mrb-module")?e:e.closest(".mrb-module");d("frame.js / setBody, $frame: ",
e,", $module: ",l);var l=l.data("mrb-plugin"),m=e.data("source"),q=new a.Deferred;b=N.apply(e,[b,l.rendererList(),l,l.options(),q]);M(b,f,k,g);f="undefined"!==typeof m&&null!==m&&m.hasClass("mrb-frame-append");if(!1!==f||!0!==l.options().reRender)f?(m.remove(),e.append(b)):e.html(b);p("frame.setBody took: "+(new Date-c)+" ms");c=new Date;q.resolve();p("resolving renderCompleteDfd took: "+(new Date-c)+" ms")}},I={};a.extend(!0,window.SNI,{MRB:{Util:{isCrossDomain:k,schemaToJson:t,getUrlPrefix:g,getDomain:f,
getHost:e,loadStyles:q,loadScripts:m,getByPath:v,updateByPath:function(b,c,e){b=a(b);0!==b.size()&&b.each(function(){var b=a(this),f=t(b,!0);0===c.indexOf("/")&&(c=c.substring(1));0!==c.indexOf("0/")&&(c="0/"+c);b=c.lastIndexOf("/properties");if(-1!==b){var k=c.substr(0,b),b=c.substr(k.length+11+1),f=v(f,k);if("object"===typeof f){f=v(f,"_DOMrefs/"+b);if("undefined"!==typeof f&&null!==f){var k=a(f),g=" "+a.trim(k[0].tagName.toLowerCase())+" ";-1!==" meta ".indexOf(g)?k.attr("content",e):-1!==" audio embed iframe img source track video ".indexOf(g)?
k.attr("src",e):-1!==" a area link ".indexOf(g)?k.attr("href",e):-1!==" object ".indexOf(g)?k.attr("data",e):-1!==" data meter ".indexOf(g)?k.is("[datetime]")?k.attr("datetime",e):k.text(e):-1!==" input select textarea ".indexOf(g)?(e?k.val(e):k.val(""),k.val(e)):e?k.text(e):k.text("")}d("modifying ["+b+"] on ",f," setting to ["+e+"]")}}})},isAuthenticated:function(){var a;SNI&&SNI.Config&&SNI.Config.UR3?a=new SNI.UR.UrUser(new SNI.UR.ApplicationConfig):SNI&&SNI.Config&&SNI.Config.AIM&&(a=new SNI.Community.UR.AIMUser);
return a&&!0===a.isLoggedIn},appendParam:function(a,b,c){b=b+"\x3d"+c;b=-1===a.indexOf("?")?"?"+b:"\x26"+b;return a+b},getQueryParamByName:function(a,b){var c=a.indexOf("?");if(-1===c)return null;c=a.substr(c+1);b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=RegExp("[\\?\x26]"+b+"\x3d([^\x26#]*)").exec(c);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}},RESPONSIVE_CLASS:"mrb-responsive",addElementQuery:function(a,b){if("undefined"===typeof a||0===a.length||"undefined"===typeof b||
0===b.length)throw Error("Usage: plugin.addElementQuery(className, predicate)");if("undefined"!==typeof I[a])throw Error('element query with name "'+a+'" already exists!  Use plugin.removeElementQuery(className) first!');I[a]=new MediaClass(a,"."+window.SNI.MRB.RESPONSIVE_CLASS+":"+b)},removeElementQuery:function(a){if("undefined"===typeof a||0===a.length)throw Error("Usage: plugin.removeElementQuery(className)");"undefined"!==typeof I[a]&&delete I[a]},getElementQuery:function(a){if("undefined"===
typeof a||0===a.length)throw Error("Usage: plugin.getElementQuery(className)");return I[a]},fontLoaded:function(){var b;if(arguments[0]instanceof Array)b=arguments[0];else if(0<arguments.length)b=Array.prototype.slice.call(arguments,0);else throw Error("A font name or array of font names is required");var c=[],e;for(e=0;e<b.length;e+=1)(function(){var f=new a.Deferred,k=b[e];c.push(f);a("body").fontChecker({font:k,load:function(){f.resolve()}})})();return a.when.apply(null,c).pipe(function(){d("All fonts loaded")})},
autoRun:function(b,c,e,f){if("string"!==typeof b&&"object"!==typeof b||"string"!==typeof c||"string"!==typeof e)throw Error("Invalid Syntax.  Usage: SNI.MRB.autoRun(moduleId, moduleName, moduleClass, params");var k="string"===typeof b?a("#"+b):a(b);if(0===k.size())d("Could not find module with id: "+b);else{if("undefined"!==typeof a.fn[c])d("$.fn.["+c+"] :: Auto-invoking plugin for id\x3d"+b+", class\x3d"+e),a.fn[c].call(k,f),k.data("mrbPlugin",a.fn[c].call(k,"plugin"));else{var g={};g[b]=SNI.MRB.plugin(f,
function(){d("SNI.MRB.Anon :: Auto-invoking module based on class\x3d"+e)});a.extend(!0,window.SNI.MRB,{Anon:g});d("SNI.MRB.Anon :: Register plugin for id\x3d"+b+", class\x3d"+e);SNI.MRB.Anon[b].call(k,{})}a("body").addClass(c)}},authenticatedPlugin:function(b,c,e){return a.plugin(a.extend(!0,{},{isAuthenticated:SNI.MRB.Util.isAuthenticated,aimOptions:{postProcessingAction:function(){n("disabling AIM postProcessingAction")},localFrameURL:window.location.protocol+"//"+window.location.host+"/communitytools/iframeproxy.html"}},
b),function(b,f){var k=a(this);n("entering authenticatedPlugin's init method");var d=null,g=null,p=null,l=null,m=null,q=null;b.authenticate=function(a){if(null===m||!1===m){n("calling plugin.authenticate");"boolean"!==typeof a&&(a=!1);if(!0!==f.isAuthenticated())throw Error("No authentication detected, cannot load authenticated state");m=!0;null===g&&(n("initializing authModule"),g=d,e.apply(g,[b,f,a,q]));n("inserting $authModule",g,"after $unAuthRoot",p);p.after(g);g.show();p.remove()}else n("plugin.authenticate was called on an already-authenticated state!")};
b.unAuthenticate=function(){null===m||!0===m?(m=!1,n("calling plugin.unAuthenticate"),null===l&&(n("initializing unAuthModule"),l=p,c.apply(l,[b,f])),n("inserting $unAuthModule",l,"after $authRoot",d),d.after(l),l.show(),d.remove()):n("plugin.unAuthenticate was called on an already-unauthenticated state!")};b.openAimModal=function(a){q=a||null;n("opening AIM modal");"function"!==typeof window.jQuery.fn.community?n("Could not open AIM modal, AIM $.community plugin is not installed!"):(a=window.jQuery().community(f.aimOptions),
window._AIM&&window._AIM.subscribe("/aim/complete",b.closeAimModal),a.show())};b.closeAimModal=function(){window.jQuery("#SNIModal_Content").children().eq(0).data("plugin_SNIModal").close(new Event("ignore"));window._AIM&&window._AIM.unsubscribe("/aim/complete",b.closeAimModal)};window.aimContextLoaded(function(){!0===f.isAuthenticated()?(d=k,p=k.clone().hide(),k.after(p),b.authenticate(!1)):(p=k,d=k.clone().hide(),k.after(d),b.unAuthenticate(),!0===f.isPopup&&(!0===f.startOpen?b.openAimModal():(n("instantiating click handler to open AIM modal on ",
k),k.on("click",b.openAimModal))),window._AIM&&window._AIM.subscribe("/aim/complete",function(){n("heard /aim/complete");k.off("click",b.openAimModal)}),window._AIM&&window._AIM.subscribe("/aim/login",function(){n("heard /aim/login")}),window._AIM&&window._AIM.subscribe("/aim/signup",function(){n("heard /aim/signup")}));window._AIM&&window._AIM.subscribe("/aim/complete",function(){b.authenticate(!0)})})})},plugin:function(e,f){var l=[],v=a.plugin(a.extend(!0,{},{url:null,errorClass:"mrb-error",loadedClass:"mrb-loaded",
eventNamespace:"mrb-events",scriptDependencies:[],styleDependencies:[],requiredFonts:[],dataType:"html",sourceDataFormat:"html",jsonpCallback:"_callback",isPopup:!1,startOpen:!1,popupOptions:{},cache:!1,initData:null},e),function(b,e){var p=a(this),v=new a.Deferred,h=!0;b.firstRender=function(){return h};b.ready=b.dfd=function(){return v};b.ready().then(function(){p.trigger("pluginReady",[b,e])});b.rendererList=function(){return l};b.options=function(){return e};b.element=function(){return p};var u=
!1,n=new a.Deferred;e.requiredFonts instanceof Array&&0<e.requiredFonts.length?n=SNI.MRB.fontLoaded(e.requiredFonts):n.resolve();var z=c.slice(0);e.scriptDependencies instanceof Array&&0<e.scriptDependencies.length&&(z=z.concat(e.scriptDependencies));var D=null===e.url?null:g(e.url);null===D&&(D=g(window.location.href));var A=null===e.url?!1:k(e.url),L=x(e.dataType,A),I=H(e.dataType,A),J=e.url;null!==J&&"html"===e.sourceDataFormat&&(A=S(L,I),0<A.length&&(J+=-1!==e.url.indexOf("?")?"\x26":"?",J+=A));
var P=function(c,k){c.addClass("mrb-module");c.data("mrb-plugin",b);c.trigger("mrbPluginBeginLoad",[b,e]);q(D,e.styleDependencies);m(D,z).then(function(){"undefined"===typeof e.url||null===e.url?"object"===typeof e.initData&&n.then(function(){var d=new a.Deferred,g=N.apply(c,[e.initData,l,b,e,d]);!0!==b.options().reRender&&c.html(g);d.resolve();h=!1;!1===u&&("function"===typeof f&&f.apply(c,[b,e]),u=!0);c.frame(O);M(c,L,I,e.sourceDataFormat);k.resolve()}).fail(function(){d("Required fonts could not be loaded!");
k.fail()}):!1===c.hasClass(e.loadedClass)?a.ajax({url:J,dataType:L,jsonp:e.jsonpCallback,cache:e.cache,success:function(g){n.then(function(){var d=new a.Deferred,p=N.apply(c,[g,l,b,e,d]);!0!==b.options().reRender&&c.html(p);d.resolve();h=!1;!1===u&&("function"===typeof f&&f.apply(c,[b,e]),u=!0);c.frame(O);M(c,L,I,e.sourceDataFormat);k.resolve()}).fail(function(){d("Required fonts could not be loaded!");k.fail()})},error:function(){d("ERROR: ajax call to module data URL failed");k.fail()}}):n.then(function(){var d=
new a.Deferred;0<l.length&&r.apply(c,[c,e.initData,l,b,e,d]);d.resolve();h=!1;!1===u&&("function"===typeof f&&f.apply(c,[b,e]),u=!0);c.frame(O);M(c,L,I,e.sourceDataFormat);k.resolve()}).fail(function(){d("Required fonts could not be loaded!");k.fail()})})};if(!0===e.isPopup){d("adding popup functionality");var A=a("\x3cdiv /\x3e"),K=null;!1===p.hasClass(e.loadedClass)&&(K=p,p=a("\x3cdiv /\x3e"));A.append(p);a(document.body).append(A);d("piping plugin.dfd()");var Q=b.dfd().pipe(function(){d("inside the pipe with popupOptions: ",
e.popupOptions);"undefined"!==typeof e.popupOptions.name&&p.attr("name",e.popupOptions.name);p.popup(e.popupOptions);p.popup("source",K);d("setting popup source to",K)});b.open=function(a,b){d("calling plugin.open");!1===R?(R=!0,P(p,v),Q.then(function(){d("opening popup from plugin.open");p.trigger("open.popup")})):(d("opening popup from plugin.open (direct)"),p.trigger("open.popup"),"undefined"!==typeof a&&p.popup("source",p,b))};b.close=function(){Q.isResolved()&&p.trigger("close.popup")};if(null!==
K)K.on("click",function(a){a.preventDefault();b.open()})}p.on("click","[data-action]",function(c){var e=a(this),f=e.attr("data-action");if("undefined"!==typeof f&&0<f.length){c.preventDefault();c.stopPropagation();c=e.parent().closest("[itemscope]");var k={};if(p.is(c)||a.contains(p[0],c[0]))k=t(c);var g=e.data("actionData");d("Triggering action: "+f+" on ",c);b.trigger(f,g,k,e);c.trigger(f,[g,k,e])}});if(!0===e.isPopup){var R=!1;!0===e.startOpen&&(d("found startOpen \x3d\x3d\x3d true"),R=!0,P(p,
v),Q.then(function(){d("opening popup");p.trigger("open.popup")}))}else d("skipping popup functionality"),P(p,v)});v.addRenderer=function(){b("RENDER: adding renderer:",arguments);var a={};if("function"===typeof arguments[0])a.callback=arguments[0];else if("function"===typeof arguments[1])a.type=arguments[0],a.callback=arguments[1];else if("function"===typeof arguments[2])a.type=arguments[0],a.prop=arguments[1],a.callback=arguments[2];else throw Error("Syntax error.  Usage: addRenderer([type,] [prop,] callback)");
l.push(a)};v.addRenderer(function(b,c,e){var f=a(this).filter("[data-mrb-module-name]").add(a(this).find("[data-mrb-module-name]"));f.each(function(){!1===f.hasClass(window.SNI.MRB.RESPONSIVE_CLASS)&&f.addClass(window.SNI.MRB.RESPONSIVE_CLASS)});"undefined"===typeof window.SNI.MRB.getElementQuery("mrb-smart-phone")&&window.SNI.MRB.addElementQuery("mrb-smart-phone","media(this-max-width:768px)");"undefined"===typeof SNI.MRB.getElementQuery("mrb-tablet")&&window.SNI.MRB.addElementQuery("mrb-tablet",
"media(this-min-width: 768px \x26\x26 this-max-width: 1024px)")});v.addRenderer(function(b,c,e,f){f.then(function(){c.dfd().then(function(){var b=new Date;if(!0===e.isModal)if("undefined"!==typeof a.fn.modal){var f=a("#box-modal-container");0===f.size()&&(f=a("\x3cdiv /\x3e",{id:"box-modal-container","class":"modal"}),a("body").append(f));if(!1===e.addModalContainer)a.contains(f[0],c.element()[0])||(c.element().detach(),f.empty(),f.append(c.element()));else{var k=e.modalSize?e.modalSize:"modal-md",
g=f.find(".modal-content");if(0===g.size()){var l=a("\x3cdiv /\x3e",{"class":"modal-dialog "+k}),g=a("\x3cdiv /\x3e",{"class":"modal-content"});f.append(l);l.append(g)}else l=g.parent(),l.removeClass(),l.addClass("modal-dialog"),l.addClass(k);f.children().not(l).remove();a.contains(g[0],c.element()[0])||(c.element().detach(),g.empty(),g.append(c.element()));0===g.find(".modal-close").size()&&a("\x3cdiv /\x3e",{"class":"modal-close"});0<f.nextAll(".modal").size()&&a("body").append(f)}f.modal("show");
f=f.children().first();k=f.height();g=window.innerHeight;f.css({"margin-top":k>=g||!0===window.SNI.MRB.Util.isMobile()?0:(g-k)/2})}else d("Could not find $.fn.modal!");p("modal renderer took: "+(new Date-b)+" ms")})})});v.addRenderer(function(a,b,c,e){b.dfd().then(function(){e.then(function(){var c=new Date;if(null!==a&&"object"===typeof a&&"object"===typeof a.events&&Array.isArray(a.events)){var e;for(e=0;e<a.events.length;e+=1){var f=a.events[e],k=f.name,f=f.data;d("Triggering event ["+k+"], on: ",
b.element(),", data: ",f);try{b.element().trigger(k,[f])}catch(g){d("Caught exception while triggering event: ",g)}}}p("ajax event renderer took: "+(new Date-c)+" ms")})})});v.addRenderer("com.scrippsnetworks.box.Event",function(b,c,e,f){var k=a(this);c.dfd().then(function(){f.then(function(){var c=new Date;if("undefined"!==typeof b&&Array.isArray(b)){var e;for(e=0;e<b.length;e+=1){var f=b[e].properties,g=f.name[0],l;f.data&&"string"===typeof f.data[0]&&(l=JSON.parse(a("\x3cdiv /\x3e").html(f.data[0]).text()));
Array.isArray(f.errors);d("Triggering event ["+g+"], on: ",k,", data: ",l);try{k.trigger(g,[l])}catch(m){d("Caught exception while triggering event: ",m)}}}p("schema event renderer took: "+(new Date-c)+" ms")})})});v.addRenderer(function(b,c,e){b=a(this);0===b.parent().closest(".mrb-style").size()&&b.addClass("mrb-style")});return v}}});a(function(){a("body").on("redirect",function(a,b){d("entering handler for [redirect]");window.location=b.url}).on("closeModal",function(){var b=a("#box-modal-container");
d("module.js: closing modal");b.modal("hide")}).on("alertMessage",function(a,b){window.SNI.MRB.Util.alert(b)})})})(window.SNI.MRB.jQuery)},m=new EnvironmentContext("mrbContextLoaded",function(a){a.call(null,SNI.MRB.jQuery)}),v=new EnvironmentContext("aimContextLoaded",function(a){a()}),r=setInterval(function(){if("undefined"!==typeof window._AIM||window._skipAimContextForBox)v.setContextLoaded(),clearInterval(r)},30),q="undefined"===typeof window.jQuery,u=!q;if(u){u=window.jQuery.fn.jquery;d("Found jQuery version "+
u);var t=u.split("."),u=parseInt(t[0],10),x=parseInt(t[1],10),t=2<t.length?parseInt(t[2],10):0,u=1===u&&8===x&&3===t}!1===u?h.script("//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js").wait(function(){jQuery.extend(!0,window.SNI,{MRB:{jQuery:window.jQuery}});!1===q?(d("jQuery was defined, executing noConflict"),window.jQuery.noConflict(!0)):d("jQuery was undefined");d("Loaded jQuery version: "+window.SNI.MRB.jQuery.fn.jquery);d("window.jQuery version is: "+window.jQuery.fn.jquery);d("calling loadApp");
l();d("setting mrbContext loaded");m.setContextLoaded()}):(jQuery.extend(!0,window.SNI,{MRB:{jQuery:window.jQuery}}),d("Used existing jQuery version: "+window.SNI.MRB.jQuery.fn.jquery),d("window.jQuery version is: "+window.jQuery.fn.jquery),l(),m.setContextLoaded())}(window.$LAB);
(function(){var h=0,d={},n=SNI.BOX.DEBUG.forScope("INIT");window.SNI=window.SNI||{};window.SNI.BOX=window.SNI.BOX||{};window.SNI.BOX.init=function(p){window.mrbContextLoaded(function(c){n("SNI.BOX.init()!");if("undefined"===typeof window.BOX_SERVER_HOST)n("Cannot initialize, no window.BOX_SERVER_HOST is defined");else if("undefined"===typeof window.BOX_SERVER_S_API)n("Cannot initialize, no window.BOX_SERVER_S_API is defined");else{var a=c("body");p&&0<c(p).size()&&(a=c(p));var f=a.find("[data-box-id]").not(".box-loading").not(".box-loaded").add(a.filter("[data-box-id]").not(".box-loading").not(".box-loaded"));
if(0===f.size())n("SNI.BOX.init(): No Containers!");else{var e={},g={},k=[];f.each(function(){var a=c(this),b=a.data("boxId");h++;a.attr("id",b+"_"+h);"string"===typeof b&&(a.addClass("box-loading"),k.push(a),"undefined"===typeof e[b]&&(e[b]=[],g[b]=[]),g[b].push(a),a=c(this).data("boxParams"),"object"===typeof a?e[b].push(a):e[b].push({}))});n("SNI.BOX.init(): uniqueContainers",e);var l=b(e);if(0!==l.length){for(var m=[],f=0;f<l.length;f++){var v=l[f];"undefined"===typeof d[v]&&(d[v]={boxId:v,deferred:c.Deferred()},
m.push(v));d[v].deferred.done(function(a,b,c){return function(){window.SNI.BOX.initDataHandler(a,b,c)}}(v,a,g[v]))}0!==m.length&&(a=m.map(function(a){return"id\x3d"+a}),a.push("host\x3d"+SNI.MRB.Util.getHost(window.BOX_SERVER_HOST)),a=a.join("\x26"),function(a){c.ajax({url:a,dataType:"jsonp",jsonp:"_callback",cache:!0,jsonpCallback:"window_SNI_BOX_initCallback",error:function(a,b,c){for(a=0;a<m.length;a++)d[l[a]].deferred.reject(),n("Failed to aquire syndication information for box-id ["+l[a]+"]");
n("Error [textStatus\x3d"+b+"] [errorThrown\x3d"+c+"]")}})}(window.BOX_SERVER_S_API+"?"+a))}}}})};var b=function(b){var c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(a);return c};window_SNI_BOX_initCallback=function(b,c,a){n("window_SNI_BOX_initCallback: Got data:",JSON.stringify(b));if("object"!==typeof b)throw Error("invalid response data");for(c=0;c<b.containerIds.length;c++)a=b.containerIds[c],d[a].data=b[a],d[a].boxHost=b.boxHost,d[a].boxApiUrlPrefix=b.boxApiUrlPrefix,d[a].deferred.resolve();
for(c=0;c<b.alsoLoadedModuleIds.length;c++)a=b.alsoLoadedModuleIds[c],"undefined"===typeof d[a]&&(d[a]={boxId:a,deferred:$.Deferred()}),d[a].data=b[a],d[a].boxHost=b.boxHost,d[a].boxApiUrlPrefix=b.boxApiUrlPrefix,d[a].deferred.resolve()};window.SNI.BOX.initDataHandler=function(b,c,a){n("Handling data for box-id ["+b+"] -\x3e ",d[b].data);var f=d[b].data,e=d[b].boxHost,g=d[b].boxApiUrlPrefix;n("Containers ("+$(a).size()+")");$(a).each(function(){var a=$(this);n("Handling container ["+a+"]");if(a.hasClass("box-loaded"))n("Module container already loaded ["+
a+"]");else for(var b=a.data("boxParams"),c=a.data("boxPreload"),d=a.attr("id"),p=0;p<f.modules.length;p++){var q=f.modules[p],h=d+"_"+p,t=$("\x3cdiv /\x3e",{id:h});a.append(t);var x=SNI.MRB.Util.getUrlPrefix(q.params.url);null===x&&(x=SNI.MRB.Util.getUrlPrefix(window.location.href));var y=q.params.url,w;for(w in b)b.hasOwnProperty(w)&&"object"!==typeof b[w]&&(y=SNI.MRB.Util.appendParam(y,w,b[w]));y=$.extend(!0,{boxHost:e,boxApiUrlPrefix:g},q.params,b,{url:y});h=function(b,c,e,f,d){return function(){n("SNI.MRB.autoRun params: ",
b,c,e,f,d);d||(SNI.MRB.autoRun(t,c,e,f),a.trigger("box.load",[b,c,e,f,d]));a.addClass("box-loaded").removeClass("box-loading")}}(h,q.moduleName,q.moduleClass,y,c);SNI.MRB.Util.loadStyles(x,q.params.styleDependencies);SNI.MRB.Util.loadScripts(x,q.params.scriptDependencies).then(h)}})};SNI.BOX.loadModule=function(b,c,a){var f=new $.Deferred;try{(function(b,c){window.mrbContextLoaded(function(e){var d=e("\x3cdiv /\x3e",{"data-box-id":b,"data-box-params":"object"===typeof c?JSON.stringify(c):c,"data-box-preload":a});
e("body").append(d);f.resolve(d)})})(b,c),SNI.BOX.init()}catch(e){n("Caught error while in SNI.BOX.loadModule: ",e)}return f};window.mrbContextLoaded(function(b){b("body").on("click","[data-box-target-id]",function(c){c.preventDefault();c=b(this);SNI.BOX.loadModule(c.data("boxTargetId"),c.attr("data-box-params"))})})})();
window.mrbContextLoaded(function(h){(function(d){var h=0;d.plugin=function(b,p){var c="plugin"+h;h+=1;p||(p=b);return function(a){var f=arguments;if(!a||"object"===typeof a){var e=d(this).filter(function(){return!d(this).data(c)});if(0<e.length){var g=d.extend(!0,{},b,a);e.each(function(){var a=d(this),b=function(b,e){d.each(b.split(/\s+/),function(b,f){a.bind(c+"_"+f,e)})},e={data:function(b,e){var f=a.data(c+"_data");f||(f={},a.data(c+"_data",f));if("undefined"===typeof e)return f[b];f[b]=e},bind:b,
pluginName:c,plugin:function(){return e},trigger:function(b,f){a.trigger(d.extend(d.Event(c+"_"+b),f),[e])}};a.data(c,e);void 0!==g.events&&d.each(g.events,b);e.isInitializing=!0;p.apply(this,[e,g]);e.trigger("initialized");e.isInitializing=!1})}}var k;this.each(function(){var b=d(this).data(c);b&&(b=b[a])&&("function"===typeof b&&(b=b.apply(null,Array.prototype.slice.call(f,1))),k||(k=b))});return"undefined"!==typeof k?k:this}}})(h)});
window.mrbContextLoaded(function(h){(function(d,h,b){var p=d(h),c=h.document;d.plugin2=function(a,b){var e="plugin-"+a,g=a+"-options";b._mergeOptions=function(a){return d.extend(!0,{},this._defaultOptions,a)};b.closestInit=function(){var a=this.$caller.closest("."+e);return 0<a.length?a:d(c)};b.option=function(a,b){var c=this.closestInit();if("undefined"===typeof a)return(c=c[0])?d.data(c,g):null;if("undefined"===typeof b)return(c=c[0])?d.data(c,g)[a]:null;c.each(function(){d.data(this,g)[a]=b});
return this.$caller};b.live=function(a,b){var c=this,f=c.$caller;b=c._mergeOptions(b);c._init&&c._init(a,b);f.onCreate(a,function(){var a,f;d.data(this,g)||(a=d(this),f=d.extend({},c,{$caller:a}),d.data(this,g,b),a.addClass(e),f._create&&f._create(this,b))});c._createAll&&f.bind("create",function(e){c._createAll(e.target,a,b)});return f};b.init=function(a){return this.live(null,a)};d.fn[a]=function(c){var e=d.extend({},b,{$caller:this});if(!c||"object"===typeof c)return e.init(c);c=""+c;return"_"!==
c.substr(0,1)&&e[c]?e[c].apply(e,Array.prototype.slice.call(arguments,1)):d.error("["+c+"] method doesn't exist on ["+a+"] plugin!")}};d.run=function(a){a();return a};d.throttle=function(a,b){var c=0,d,k;return 0>=a?b:function(){var p,m,v;k=arguments;d||(p=this,m=+new Date,v=a-m+c,0>=v?(c=m,b.apply(p,k)):d=setTimeout(function(){c=m;d=null;b.apply(p,k)},v))}};(function(){var a,b,e,g,k,l,m,v,h,q,u;a=d("\x3cdiv/\x3e",{css:{height:"100%",left:0,position:"fixed",top:0,"user-select":"none",width:"100%",
"z-index":1E6}});b=function(a){k&&(clearTimeout(k),k=null);q=null;d(c.body).css("user-select","");e&&(e.unbind(".drag"),e=null);u&&(u(a),u=null)};d.drag=function(p,n,y,w,z){var E;1!==n.which||n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||(E={$dragCover:a},b(n),d(c.body).css("user-select","none"),e=d(p),e.bind("dragstart.drag",function(){return!1}),l=v=n.pageX,m=h=n.pageY,g=function(){var b=function(){q=function(a){return w.call(p,a,E)};u=function(a){return z.call(p,a,E)};d(c.body).append(a);y.call(p,
n,E)};n.dragImmediately?b():k=setTimeout(function(){var a=v-l,c=h-m;Math.sqrt(a*a+c*c)<(n.dragDistance||5)?g():b()},n.dragDelay||100)},g())};p.mousemove(d.throttle(50,function(a){k&&(v=a.pageX,h=a.pageY);q&&q(a)}));p.mouseup(function(c){b(c);a.remove()})})();d.fn.isFixedPosition=function(){for(var a=this,b;;){if("fixed"===a.css("position"))return!0;b=a.offsetParent();if(0===a.length||a[0]===b[0])break;else a=b}return!1};d.fn.zIndex=function(){for(var a,b=this;0<b.length;b=b.parent()){try{a=parseInt(b.css("z-index"),
10)}catch(c){break}if(!isNaN(a)&&0!==a)break}return a};(function(){var a=d.fn.delegate;d.fn.delegate=function(){return arguments[0]?a.apply(this,arguments):d.fn.bind.apply(this,Array.prototype.slice.call(arguments,1))}})();(function(){"oninput"in c.createElement("input")||(d.event.special.input={add:function(a){var b=d(this);a=a.selector;var c,g;c=d.throttle(50,function(){d(this).trigger("input")});b.delegate(a,"keyup",function(){setTimeout(c,0)});g=function(){var a=d.data(this,"input-checkInterval");
a&&(clearInterval(a),d.removeData(this,"input-checkInterval"))};b.delegate(a,"focus",function(){g.call(this);d.data(this,"input-checkInterval",setInterval(c,50))});b.delegate(a,"blur",g)}})})();d.elementFromPoint=function(a,b){var e=c.elementFromPoint(a,b);return e&&(3===e.nodeType&&(e=e.parentNode),e)?d(e):d()};d.fn.onCreate=function(a,b){a?this.bind("create",function(c){d(c.target).find(a).each(b)}):this.each(b)};d.easing.easeOutBack=function(a,b,c,d,k,p){void 0===p&&(p=1.70158);return d*((b=b/
k-1)*b*((p+1)*b+p)+1)+c}})(h,window)});
window.mrbContextLoaded(function(h){(function(d,h,b){var p=d(h),c=h.document;d.plugin2("popup",{_defaultOptions:{padding:{left:35,right:35,top:20}},_create:function(a){a=d(a);this.option();var b=d("\x3cdiv/\x3e",{"class":"popup"}),e=d("\x3cdiv/\x3e",{"class":"content"}),g=d("\x3cdiv/\x3e",{"class":"closeButton"}),k=a.attr("name");k&&b.attr("name",k);b.bind("open.popup",function(){var a=d(this),b=a.data("popup-scrollLeft"),c=a.data("popup-scrollTop");"number"!==typeof b&&"number"!==typeof c&&(a.data("popup-scrollLeft",
p.scrollLeft()),a.data("popup-scrollTop",p.scrollTop()));a.show()});b.bind("restoreOriginalPosition.popup",function(){var a=d(this),b=a.data("popup-scrollLeft"),c=a.data("popup-scrollTop");a.removeData("popup-scrollLeft");a.removeData("popup-scrollTop");"number"===typeof b&&"number"===typeof c&&(p.scrollLeft(b),p.scrollTop(c))});b.bind("close.popup",function(){var a=d(this);a.hide();d(".popup").each(function(){var b=d(this),c=b.popup("source");c&&d.contains(a[0],c[0])&&b.popup("close")})});g.bind("click.popup",
function(){d(this).popup("close")});k=d(c.body);e.append(a);e.append(g);b.append(e);k.append(b)},open:function(){this.$caller.popup("container").trigger("open");return this.$caller},restoreOriginalPosition:function(){this.$caller.popup("container").trigger("restoreOriginalPosition");return this.$caller},close:function(){this.container().trigger("close");return this.$caller},container:function(){return this.$caller.closest(".popup")},content:function(){return this.$caller.popup("container").find("\x3e .content")},
source:function(a,f){var e=this.option();f&&(30>a.height()||"number"!==typeof f.pageX||"number"!==typeof f.pageY)&&(f=b);if("undefined"===typeof a||null===a){var g=this.$caller.popup("container")[0];return g?d.data(g,"popup-$source"):null}g=this.$caller.popup("container");g.each(function(){d.data(this,"popup-$source",a)});var k=a.offset(),p=g.outerWidth(),m=0,h=f?f.pageX-p/2:k.left+(a.outerWidth()-p)/2;if(h<e.padding.left)m=h-e.padding.left,h=e.padding.left;else{var n=h+p-d(c).width()+e.padding.right;
0<n&&(m=n,h-=n)}var q=g.popup("content"),n=q.find("\x3e .marker");0===n.length&&(n=d("\x3cdiv/\x3e",{"class":"marker"}),q.append(n));p=(p-n.outerWidth())/2+m;n.css("left",5>p?5:p);k=f?f.pageY:k.top+a.outerHeight();30>k&&(k=30);if(p=a.isFixedPosition())h-=d(window).scrollLeft(),k-=d(window).scrollTop();m=a.closest(".popup");0===m.length&&(m=a.parent());e=null===e.zIndex?a.parent().zIndex()+1:e.zIndex;g.css({left:h,margin:0,position:p?"fixed":"absolute",top:k,"z-index":e});return this.$caller}});p.click(function(a){var b=
a.target;0===d(b).popup("container").length&&d(".popup").each(function(){var a=d(this),c=a.popup("source");c&&0<c.length&&(c=c[0],c==b||d.contains(c,b)||a.popup("close"))})});p.keydown(function(a){if(27===a.which)return a=d(".popup"),0<a.length?(a.popup("close"),!1):!0})})(h,window)});
window.mrbContextLoaded(function(h){var d=SNI.BOX.DEBUG.forScope("EXECUTION","FRAME");h.fn.frame=h.plugin({refresh:{hrefAttribute:"data-refresh-href",triggerAttribute:"data-refresh-trigger",intervalAttribute:"data-refresh-interval"},hrefAttribute:"data-frame-href",preventConcurrentClass:"dari-frame-prevent-concurrent",frameClass:"dari-frame",beforeLoadEventAttribute:"data-before-load-event",loadingClass:"dari-frame-loading",loadedClass:"dari-frame-loaded",errorClass:"dari-frame-error",ignoreClass:"dari-frame-ignore",
preventConcurrent:!1,debug:!1,setBody:function(d){h(this).html(d)}},function(n,b){var p=h(this),c=0,a=function(a){-1===window.location.hash.indexOf("_debugFrame")&&!0!==b.debug||"undefined"===typeof console||console.log(a)},f=function(e,f,k){var d=e.attr("name");d||(c+=1,d="frameTarget"+c+ +new Date);!0!==k&&h("."+b.frameClass+"["+b.refresh.triggerAttribute+'~\x3d"'+d+'"]').each(function(){var c=h(this),e=c.attr("name");a('frame "'+d+'" calling loadPage for frame "'+("undefined"===typeof e?c.attr(b.refresh.hrefAttribute):
c.attr("name"))+'"');void 0!==f?-1===f.indexOf(c.attr("name"))&&setTimeout(function(){m(c,c.data("source"),"get",c.attr(b.refresh.hrefAttribute),null,null,f+" "+d,!0)},0):setTimeout(function(){m(c,c.data("source"),"get",c.attr(b.refresh.hrefAttribute),null,null,d,!0)},0)})},e=function(a,b,c){var e="";"html"===c&&(void 0!==a&&null!==a&&(e+="_format\x3d"+a),void 0!==b&&null!==b&&(0<e.length&&(e+="\x26"),e+="_result\x3d"+b));return e},g=function(a,c,e,k){var d=h(a);a=null;"_top"!==c&&"_self"!==c&&"_blank"!==
c&&"_new"!==c&&(c&&"_parent"===c?void 0!==h.fn.popup&&0<d.closest("."+b.frameClass).popup("container").size()?(c=d.closest("."+b.frameClass),d=c.data("rootSource"),void 0!==d&&(c.removeData("rootSource"),a=d.closest("."+b.frameClass),0<a.size()?(a.popup("close"),f(a,e,k)):(c.popup("close"),f(c,e,k)))):a=d.closest("."+b.frameClass).parent().closest("."+b.frameClass):c?(a=h("."+b.frameClass+'[name\x3d"'+c+'"]'),0===a.size()&&(a=h("."+b.frameClass+'[name\x3d"'+c+'"]')),0===a.size()&&void 0!==h.fn.popup&&
(a=h('\x3cdiv class\x3d"'+b.frameClass+'" name\x3d"'+c+'"\x3e \x3c/div\x3e'),p.append(a),a.popup("init"),a.popup("source",d))):a=d.closest("."+b.frameClass));return null===a||0===a.size()?null:a},k=function(c,e,f,d){var k=(c.data("loadVersion")||0)+1;c.data("loadVersion",k);c.data("startTime",new Date);c.data("source",e);c.data("rootSource")||c.data("rootSource",e);c.addClass(b.loadingClass);"undefined"!==typeof e&&null!==e&&e.addClass(b.loadingClass);if(void 0!==h.fn.popup){var g=c.popup("container");
if(0<g.size()){g.addClass(b.loadingClass);var p=c.popup("source");!g[0]||"undefined"===typeof e||h.contains(g[0],e[0])||p&&p[0]==e[0]||(c.popup("source",e,f),c.empty());!0!==d&&c.popup("open")}}!0===!!c.attr(b.beforeLoadEventAttribute)&&c.trigger("frame.beforeLoad",e);a("--EVENT-- [beginLoad]");n.trigger("beginLoad",{version:k,$frame:c,$source:e});c.trigger("beginLoad",{version:k,$frame:c,$source:e});return k},l=function(c,e,k,p,m,l,v,r,B){var D=new Date;if(e>=c.data("loadVersion")){var C;if(l){if("_top"===
l||"_self"===l){void 0!==h.fn.popup&&c.popup("close");v=v||window.location.href;setTimeout(function(){window.location.href=v},0);return}C=g(c.data("source"),l,r,B);null===C||C.is(c)||("_parent"!==l&&(C.data("rootSource")||(c.data("rootSource")?C.data("rootSource",c.data("rootSource")):c.data("source")&&C.data("rootSource",c.data("source")))),c.data("source")&&C.data("source",c.data("source")),c.removeClass(b.loadingClass).addClass(b.loadedClass),c.removeClass(b.errorClass),void 0!==h.fn.popup&&(c.popup("container").removeClass(b.loadingClass).addClass(b.loadedClass),
c.popup("close")),c=C)}var A=c.data("source");if("undefined"===typeof l||null!==C)c.removeClass(b.loadingClass).addClass(b.loadedClass),void 0!==h.fn.popup&&(l=c.popup("container"),l.removeClass(b.loadingClass).addClass(b.loadedClass),"undefined"!==typeof A&&null!==A&&(A.removeClass(b.loadingClass),A.removeClass(b.errorClass)),C=c.popup("source"),!l[0]||"undefined"===typeof A||h.contains(l[0],A[0])||C&&C[0]==A[0]||(c.popup("source",A),c.empty()),!0!==B&&c.popup("open")),"object"===typeof k&&"jsonp"===
p&&"html"===m&&(k=k.result),"string"===typeof k&&(k=k.replace(/^(?:.|[\r\n])*?<body[^>]*>/ig,""),k=k.replace(/<\/body>(?:.|[\r\n])*?$/ig,"")),b.setBody.call(c[0],k),c.change(),h(window).resize();f(c,r,B);a("--EVENT-- [endLoad]");k=new Date;n.trigger("endLoad",{version:e,$frame:c,$source:A});d("triggering endLoad (plugin) took: "+(new Date-k)+" ms");k=new Date;c.trigger("endLoad",{version:e,$frame:c,$source:A});d("triggering endLoad ($frame) took: "+(new Date-k)+" ms")}d("endLoad took: "+(new Date-
D)+" ms")},m=function(c,f,d,g,p,m,v,n){var r=k(c,f,m,n);m=c.data("extraFormData");var D=c.data("ajaxDataType"),C=c.data("ajaxResultType"),A=c.data("sourceDataFormat"),C=e(D,C,A);0<C.length&&("undefined"===typeof m&&(m=""),0<m.length&&(m+="\x26"),m+=C);"undefined"!==typeof m&&0<m.length&&(g+=(0>g.indexOf("?")?"?":"\x26")+m);d={cache:!1,type:d,url:g,data:p,success:function(b,e,f){e=f.getResponseHeader("X-Frame-Target");var k=f.getResponseHeader("X-Frame-Redirect");b="json"===D||"jsonp"===D?b:f.responseText;
f=+new Date-c.data("startTime");"undefined"!==typeof f&&a("frame.js took "+f+" ms loading url: "+g);l(c,r,b,D,A,e,k,v,n)},error:function(){"undefined"!==typeof f&&null!==f&&f.addClass(b.errorClass);c.addClass(b.errorClass)}};if("json"===D||"jsonp"===D)d.dataType=D,d.jsonp="_callback";h.ajax(d);return r};p.bind("reloadFrame",function(a,c){var e=a.target,f=null;"undefined"!==typeof c&&c.is("."+b.frameClass)?f=c:"undefined"!==typeof e&&h(e).is("."+b.frameClass)&&(f=h(e));null!==f&&(e=f.attr(b.refresh.hrefAttribute),
"undefined"!==typeof e&&m(f,null,"get",e,null,null,null,!0))});p.on("click",'a[href]:not([href^\x3d"java"])',function(a){var c=h(this),e=c.attr(b.hrefAttribute);"undefined"===typeof e&&(e=c.attr("href"));if(c.is("."+b.ignoreClass)||"undefined"===typeof e||""===e||"#"===e||0<c.closest("."+b.ignoreClass).size())return!0;var f=g(c,c.attr("target"));if(null==f||0===f.size())return!0;if(f.is("."+b.loadingClass)&&(!0===b.preventConcurrent||0<c.closest("."+b.preventConcurrentClass).size()))return!1;if(null!==
f&&0<f.size())m(f,c,"get",e,null,a),a.preventDefault(),a.stopPropagation();else return!0});var v=function(a){a=h(a.target);0<a.size()&&a.data("frameValidated",!0)};p.on("submit","form",function(e,f){var d=h(this),n=d.data("storedTarget"),r=n||g(d,d.attr("target"));if(null===r||0===r.size()||d.is("."+b.ignoreClass))return!0;if(r.is("."+b.loadingClass)&&(!0===b.preventConcurrent||0<d.closest("."+b.preventConcurrentClass).size()))return!1;if(!0===d.data("frameValidate")){d.removeData("frameValidated");
p.on("frame.validate",v);var w=!1;try{d.trigger("frame.validate")}catch(z){a("[frame.js]: caught exception while performing validation: "),a(z),w=!0}p.off("frame.validate",v);if(!0!==d.data("frameValidated")&&!1===w)return!1}w="undefined"===typeof f?d.find("input[type\x3dsubmit],input[type\x3dimage],button[type\x3dsubmit]").filter(":visible").first():h(f);0===w.size()&&(w=d);var E=d.attr("action");if("multipart/form-data"!==d.attr("enctype"))return m(r,w,d.attr("method"),E,d.serialize(),e),!1;var B=
r.attr("data-extra-form-data"),D=r.data("ajaxDataType"),C=r.data("ajaxResultType"),A=r.data("sourceDataFormat");"html"===A&&("json"===D||"jsonp"===D&&"html"!==C)&&("undefined"===typeof B&&(B=""),0<B.length&&(B+="\x26"),B+="_format\x3djson");d.attr("action",E+(0>E.indexOf("?")?"?":"\x26")+B);E=d.find(':hidden[name\x3d"_isFrame"]');0===E.length&&(E=h('\x3cinput name\x3d"_isFrame" type\x3d"hidden" value\x3d"true"/\x3e'),d.prepend(E));n||d.data("storedTarget",r);var F=d.attr("target");F||(c+=1,F="frameTarget"+
c+ +new Date,d.attr("target",F));d=h('iframe[name\x3d"'+F+'"]');0!==d.length&&(a('found iframe with name\x3d"'+F+'", removing "name" attribute.'),d.removeAttr("name"));d=h('\x3ciframe name\x3d"'+F+'"\x3e\x3c/iframe\x3e');d.hide();p.is("body")?p.append(d):p.after(d);a('created iframe with name\x3d"'+F+'"');var G=k(r,w,e,!1);d.bind("load."+b.frameClass,function(){var c=h('iframe[name\x3d"'+F+'"]');a('load handler for iframe with name\x3d"'+c.attr("name")+'"');var e=c.contents().find("body"),f=e.attr("data-x-frame-target"),
d=e.attr("data-x-frame-redirect"),k=+new Date-r.data("startTime");"undefined"!==typeof k&&a("frame.js took "+k+" ms loading url: "+url);l(r,G,e.text(),null,A,f,d);c.unbind("."+b.frameClass);setTimeout(function(){a('removing iframe with name\x3d"'+c.attr("name")+'"from DOM');c.remove()},0);a('exiting load handler for iframe with name\x3d"'+c.attr("name")+'"')});e.stopPropagation();return!0});var r=function(c){var e=c.attr(b.refresh.hrefAttribute);if("undefined"!==typeof e){var f=m(c,null,"get",e,null,
null,null,!0);p.bind("endLoad",function(e){if(e.$frame.is(c)&&f===e.version){var d=parseInt(c.attr(b.refresh.intervalAttribute),10);a("--EVENT-- [refresh]: next in "+d+"s");0<d&&setTimeout(function(){r(c)},1E3*d)}h(this).unbind(e)})}};h(function(){h("."+b.frameClass+"["+b.refresh.intervalAttribute+"]").each(function(){var a=h(this),c=parseInt(a.attr(b.refresh.intervalAttribute),10);0<c&&setTimeout(function(){r(a)},1E3*c)})})})});
window.mrbContextLoaded(function(h){h.fn.fontChecker=function(d){function n(){a===c.offsetWidth?0>d.timeOut?(b.removeClass(d.loadingClass),b.addClass(d.failClass),d.fail.call(b[0],[d])):(b.addClass(d.loadingClass),setTimeout(n,d.delay),d.timeOut-=d.delay):(b.removeClass(d.loadingClass),b.addClass(d.completeClass),d.load.call(b[0],[d]))}var b=h(this),p={font:b.css("font-family"),fontAwesome:!1,loadingClass:"",failClass:"",completeClass:"",load:function(){},fail:function(){},isIconographyFont:!1,iconographyTestClass:"icon-glass",
testFont:"Comic Sans MS",testString:"QW@HhsXJ",delay:30,timeOut:5E3};d=h.extend(p,d);var c=document.createElement("span");c.style.position="absolute";c.style.top="-9999px";c.style.left="-9999px";c.style.visibility="hidden";c.style.fontFamily=d.testFont;c.style.fontSize="250px";!0===d.isIconographyFont?c.className=d.iconographyTestClass:c.innerHTML=d.testString;document.body.appendChild(c);var a=c.offsetWidth;c.style.fontFamily=d.font+","+d.testFont;n()}});
SNI.BOX.loadModule("00000147-82ed-dfc8-ad6f-bbede4210000",{},!0);
window.mrbContextLoaded(function(h){function d(b,d){var c,a=this,f=navigator.userAgent.toLowerCase();a.uid=n.recipeBoxRsModules.uid++;a.ns=".rs"+a.uid;var e=document.createElement("div").style,g=["webkit","Moz","ms","O"],k="",l=0,m;for(c=0;c<g.length;c++)m=g[c],!k&&m+"Transform"in e&&(k=m),m=m.toLowerCase(),window.requestAnimationFrame||(window.requestAnimationFrame=window[m+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m+"CancelAnimationFrame"]||window[m+"CancelRequestAnimationFrame"]);
window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),e=Math.max(0,16-(c-l)),f=window.setTimeout(function(){a(c+e)},e);l=c+e;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});a.isIPAD=f.match(/(ipad)/);c=function(a){a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||
[];return{browser:a[1]||"",version:a[2]||"0"}}(f);g={};c.browser&&(g[c.browser]=!0,g.version=c.version);g.chrome&&(g.webkit=!0);a._browser=g;a.isAndroid=-1<f.indexOf("android");a.slider=n(b);a.ev=n(a);a._doc=n(document);a.st=n.extend({},n.fn.recipeBoxRoyalSlider.defaults,d);a._currAnimSpeed=a.st.transitionSpeed;a._minPosOffset=0;!a.st.allowCSS3||g.webkit&&!a.st.allowCSS3OnWebkit||(c=k+(k?"T":"t"),a._useCSS3Transitions=c+"ransform"in e&&c+"ransition"in e,a._useCSS3Transitions&&(a._use3dTransform=k+
(k?"P":"p")+"erspective"in e));k=k.toLowerCase();a._vendorPref="-"+k+"-";a._slidesHorizontal="vertical"===a.st.slidesOrientation?!1:!0;a._reorderProp=a._slidesHorizontal?"left":"top";a._sizeProp=a._slidesHorizontal?"width":"height";a._prevNavItemId=-1;a._isMove="fade"===a.st.transitionType?!1:!0;a._isMove||(a.st.sliderDrag=!1,a._fadeZIndex=10);a._opacityCSS="z-index:0; display:none; opacity:0;";a._newSlideId=0;a._sPosition=0;a._nextSlidePos=0;n.each(n.recipeBoxRsModules,function(b,c){"uid"!==b&&c.call(a)});
a.slides=[];a._idCount=0;(a.st.slides?n(a.st.slides):a.slider.children().detach()).each(function(){a._parseNode(this,!0)});a.st.randomizeSlides&&a.slides.sort(function(){return 0.5-Math.random()});a.numSlides=a.slides.length;a._refreshNumPreloadImages();a.st.startSlideId?a.st.startSlideId>a.numSlides-1&&(a.st.startSlideId=a.numSlides-1):a.st.startSlideId=0;a._newSlideId=a.staticSlideId=a.currSlideId=a._realId=a.st.startSlideId;a.currSlide=a.slides[a.currSlideId];a._accelerationPos=0;a.msTouch=!1;
a.slider.addClass((a._slidesHorizontal?"rsHor":"rsVer")+(a._isMove?"":" rsFade"));e='\x3cdiv class\x3d"rsOverflow"\x3e\x3cdiv class\x3d"rsContainer"\x3e';a.slidesSpacing=a.st.slidesSpacing;a._slideSize=(a._slidesHorizontal?a.slider.width():a.slider.height())+a.st.slidesSpacing;a._preload=Boolean(0<a._numPreloadImages);1>=a.numSlides&&(a._loop=!1);a._loopHelpers=a._loop&&a._isMove?2===a.numSlides?1:2:0;a._maxImages=6>a.numSlides?a.numSlides:6;a._currBlockIndex=0;a._idOffset=0;a.slidesJQ=[];for(c=0;c<
a.numSlides;c++)a.slidesJQ.push(n('\x3cdiv style\x3d"'+(a._isMove?"":c!==a.currSlideId?a._opacityCSS:"z-index:0;")+'" class\x3d"rsSlide "\x3e\x3c/div\x3e'));a._sliderOverflow=e=n(e+"\x3c/div\x3e\x3c/div\x3e");var h=a.ns,k=function(b,c,e,f,d){a._downEvent=b+c+h;a._moveEvent=b+e+h;a._upEvent=b+f+h;d&&(a._cancelEvent=b+d+h)};a.msEnabled=window.navigator.msPointerEnabled;a.msEnabled?(a.msTouch=Boolean(1<window.navigator.msMaxTouchPoints),a.hasTouch=!1,a._lastItemFriction=0.2,k("MSPointer","Down","Move",
"Up","Cancel")):(k("mouse","down","move","up","up"),"ontouchstart"in window||"createTouch"in document?(a.hasTouch=!0,a._downEvent+=" touchstart"+h,a._moveEvent+=" touchmove"+h,a._upEvent+=" touchend"+h,a._cancelEvent+=" touchcancel"+h,a._lastItemFriction=0.5,a.st.sliderTouch&&(a._hasDrag=!0)):(a.hasTouch=!1,a._lastItemFriction=0.2));a.st.sliderDrag&&(a._hasDrag=!0,g.msie||g.opera?a._grabCursor=a._grabbingCursor="move":g.mozilla?(a._grabCursor="-moz-grab",a._grabbingCursor="-moz-grabbing"):g.webkit&&
-1!=navigator.platform.indexOf("Mac")&&(a._grabCursor="-webkit-grab",a._grabbingCursor="-webkit-grabbing"),a._setGrabCursor());a.slider.html(e);a._controlsContainer=a.st.controlsInside?a._sliderOverflow:a.slider;a._slidesContainer=a._sliderOverflow.children(".rsContainer");a.msEnabled&&a._slidesContainer.css("-ms-touch-action",a._slidesHorizontal?"pan-y":"pan-x");a._preloader=n('\x3cdiv class\x3d"rsPreloader"\x3e\x3c/div\x3e');e=a._slidesContainer.children(".rsSlide");a._currHolder=a.slidesJQ[a.currSlideId];
a._selectedSlideHolder=0;a._useCSS3Transitions?(a._TP="transition-property",a._TD="transition-duration",a._TTF="transition-timing-function",a._yProp=a._xProp=a._vendorPref+"transform",a._use3dTransform?(g.webkit&&!g.chrome&&a.slider.addClass("rsWebkit3d"),/iphone|ipad|ipod/gi.test(navigator.appVersion),a._tPref1="translate3d(",a._tPref2="px, ",a._tPref3="px, 0px)"):(a._tPref1="translate(",a._tPref2="px, ",a._tPref3="px)"),a._isMove?a._slidesContainer[a._vendorPref+a._TP]=a._vendorPref+"transform":
(g={},g[a._vendorPref+a._TP]="opacity",g[a._vendorPref+a._TD]=a.st.transitionSpeed+"ms",g[a._vendorPref+a._TTF]=a.st.css3easeInOut,e.css(g))):(a._xProp="left",a._yProp="top");var r;n(window).on("resize"+a.ns,function(){r&&clearTimeout(r);r=setTimeout(function(){a.updateSliderSize()},50)});a.ev.trigger("rsAfterPropsSetup");a.updateSliderSize();a.st.keyboardNavEnabled&&a._bindKeyboardNav();a.st.arrowsNavHideOnTouch&&(a.hasTouch||a.msTouch)&&(a.st.arrowsNav=!1);a.st.arrowsNav&&(g=a._controlsContainer,
n('\x3cdiv class\x3d"rsArrow rsArrowLeft"\x3e\x3cdiv class\x3d"rsArrowIcn"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rsArrow rsArrowRight"\x3e\x3cdiv class\x3d"rsArrowIcn"\x3e\x3c/div\x3e\x3c/div\x3e').appendTo(g),a._arrowLeft=g.children(".rsArrowLeft").click(function(b){b.preventDefault();a.prev()}),a._arrowRight=g.children(".rsArrowRight").click(function(b){b.preventDefault();a.next()}),a.st.arrowsNavAutoHide&&!a.hasTouch&&(a._arrowLeft.addClass("rsHidden"),a._arrowRight.addClass("rsHidden"),
g.one("mousemove.arrowshover",function(){a._arrowLeft.removeClass("rsHidden");a._arrowRight.removeClass("rsHidden")}),g.hover(function(){a._arrowsAutoHideLocked||(a._arrowLeft.removeClass("rsHidden"),a._arrowRight.removeClass("rsHidden"))},function(){a._arrowsAutoHideLocked||(a._arrowLeft.addClass("rsHidden"),a._arrowRight.addClass("rsHidden"))})),a.ev.on("rsOnUpdateNav",function(){a._updateArrowsNav()}),a._updateArrowsNav());if(a._hasDrag)a._slidesContainer.on(a._downEvent,function(b){a._onDragStart(b)});
else a.dragSuccess=!1;var q=["rsPlayBtnIcon","rsPlayBtn","rsCloseVideoBtn","rsCloseVideoIcn"];a._slidesContainer.click(function(b){if(!a.dragSuccess){var c=n(b.target).attr("class");if(-1!==n.inArray(c,q)&&a.toggleVideo())return!1;if(a.st.navigateByClick&&!a._blockActions){if(n(b.target).closest(".rsNoDrag",a._currHolder).length)return!0;a._mouseNext(b)}a.ev.trigger("rsSlideClick")}}).on("click.rs","a",function(b){if(a.dragSuccess)return!1;a._blockActions=!0;setTimeout(function(){a._blockActions=
!1},3)});a.ev.trigger("rsAfterInit")}var n=h;n.recipeBoxRsModules||(n.recipeBoxRsModules={uid:0});d.prototype={constructor:d,_mouseNext:function(b){b=b[this._slidesHorizontal?"pageX":"pageY"]-this._sliderOffset;b>=this._nextSlidePos?this.next():0>b&&this.prev()},_refreshNumPreloadImages:function(){var b;b=this.st.numImagesToPreload;if(this._loop=this.st.loop)2===this.numSlides?(this._loop=!1,this.st.loopRewind=!0):2>this.numSlides&&(this.st.loopRewind=this._loop=!1);this._loop&&0<b&&(4>=this.numSlides?
b=1:this.st.numImagesToPreload>(this.numSlides-1)/2&&(b=Math.floor((this.numSlides-1)/2)));this._numPreloadImages=b},_parseNode:function(b,d){function c(b,c){c?e.images.push(b.attr(c)):e.images.push(b.text());if(k){k=!1;e.caption="src"===c?b.attr("alt"):b.contents();e.image=e.images[0];e.videoURL=b.attr("data-rsVideo");var f=b.attr("data-rsw"),d=b.attr("data-rsh");"undefined"!==typeof f&&!1!==f&&"undefined"!==typeof d&&!1!==d?(e.iW=parseInt(f,10),e.iH=parseInt(d,10)):a.st.imgWidth&&a.st.imgHeight&&
(e.iW=a.st.imgWidth,e.iH=a.st.imgHeight)}}var a=this,f,e={},g,k=!0;b=n(b);a._currContent=b;a.ev.trigger("rsBeforeParseNode",[b,e]);if(!e.stopParsing)return b=a._currContent,e.id=a._idCount,e.contentAdded=!1,a._idCount++,e.images=[],e.isBig=!1,e.hasCover||(b.hasClass("rsImg")?(g=b,f=!0):(g=b.find(".rsImg"),g.length&&(f=!0)),f?(e.bigImage=g.eq(0).attr("data-rsBigImg"),g.each(function(){var a=n(this);a.is("a")?c(a,"href"):a.is("img")?c(a,"src"):c(a)})):b.is("img")&&(b.addClass("rsImg rsMainSlideImage"),
c(b,"src"))),g=b.find(".rsCaption"),g.length&&(e.caption=g.remove()),e.content=b,a.ev.trigger("rsAfterParseNode",[b,e]),d&&a.slides.push(e),0===e.images.length&&(e.isLoaded=!0,e.isRendered=!1,e.isLoading=!1,e.images=null),e},_bindKeyboardNav:function(){var b=this,d,c,a=function(a){37===a?b.prev():39===a&&b.next()};b._doc.on("keydown"+b.ns,function(f){b._isDragging||(c=f.keyCode,37!==c&&39!==c||d||(a(c),d=setInterval(function(){a(c)},700)))}).on("keyup"+b.ns,function(a){d&&(clearInterval(d),d=null)})},
goTo:function(b,d){b!==this.currSlideId&&this._moveTo(b,this.st.transitionSpeed,!0,!d)},destroy:function(b){this.ev.trigger("rsBeforeDestroy");this._doc.off("keydown"+this.ns+" keyup"+this.ns+" "+this._moveEvent+" "+this._upEvent);this._slidesContainer.off(this._downEvent+" click");this.slider.data("royalSlider",null);n.removeData(this.slider,"royalSlider");n(window).off("resize"+this.ns);b&&this.slider.remove();this.ev=this.slider=this.slides=null},_updateBlocksContent:function(b,d){function c(c,
e,d){c.isAdded?(a(e,c),f(e,c)):(d||(d=g.slidesJQ[e]),c.holder?d=c.holder:(d=g.slidesJQ[e]=n(d),c.holder=d),c.appendOnLoaded=!1,f(e,c,d),a(e,c),g._addBlockToContainer(c,d,b),c.isAdded=!0)}function a(a,c){c.contentAdded||(g.setItemHtml(c,b),b||(c.contentAdded=!0))}function f(a,b,c){g._isMove&&(c||(c=g.slidesJQ[a]),c.css(g._reorderProp,(a+g._idOffset+q)*g._slideSize))}function e(a){if(m){if(a>h-1)return e(a-h);if(0>a)return e(h+a)}return a}var g=this,k,l,m=g._loop,h=g.numSlides;if(!isNaN(d))return e(d);
var r=g.currSlideId,q,u=b?Math.abs(g._prevSlideId-g.currSlideId)>=g.numSlides-1?0:1:g._numPreloadImages,t=Math.min(2,u),x=!1,y=!1,w;for(l=r;l<r+1+t;l++)if(w=e(l),(k=g.slides[w])&&(!k.isAdded||!k.positionSet)){x=!0;break}for(l=r-1;l>r-1-t;l--)if(w=e(l),(k=g.slides[w])&&(!k.isAdded||!k.positionSet)){y=!0;break}if(x)for(l=r;l<r+u+1;l++)w=e(l),q=Math.floor((g._realId-(r-l))/g.numSlides)*g.numSlides,(k=g.slides[w])&&c(k,w);if(y)for(l=r-1;l>r-1-u;l--)w=e(l),q=Math.floor((g._realId-(r-l))/h)*h,(k=g.slides[w])&&
c(k,w);if(!b)for(t=e(r-u),r=e(r+u),u=t>r?0:t,l=0;l<h;l++)t>r&&l>t-1||!(l<u||l>r)||(k=g.slides[l])&&k.holder&&(k.holder.detach(),k.isAdded=!1)},setItemHtml:function(b,d){var c=this,a=function(){if(!b.images)b.isRendered=!0,b.isLoaded=!0,b.isLoading=!1,g(!0);else if(!b.isLoading){var a,e;b.content.hasClass("rsImg")?(a=b.content,e=!0):a=b.content.find(".rsImg:not(img)");a&&!a.is("img")&&a.each(function(){var a=n(this),c='\x3cimg class\x3d"rsImg" src\x3d"'+(a.is("a")?a.attr("href"):a.text())+'" /\x3e';
e?b.content=n(c):a.replaceWith(c)});a=e?b.content:b.content.find("img.rsImg");l();a.eq(0).addClass("rsMainSlideImage");b.iW&&b.iH&&(b.isLoaded||c._resizeImage(b),g());b.isLoading=!0;if(b.isBig)n("\x3cimg /\x3e").on("load.rs error.rs",function(a){n(this).off("load.rs error.rs");f([this],!0)}).attr("src",b.image);else{b.loaded=[];b.numStartedLoad=0;a=function(a){n(this).off("load.rs error.rs");b.loaded.push(this);b.loaded.length===b.numStartedLoad&&f(b.loaded,!1)};for(var d=0;d<b.images.length;d++){var k=
n("\x3cimg /\x3e");b.numStartedLoad++;k.on("load.rs error.rs",a).attr("src",b.images[d])}}}},f=function(a,c){if(a.length){var f=a[0];if(c!==b.isBig)(f=b.holder.children())&&1<f.length&&m();else if(b.iW&&b.iH)e();else if(b.iW=f.width,b.iH=f.height,b.iW&&b.iH)e();else{var d=new Image;d.onload=function(){d.width?(b.iW=d.width,b.iH=d.height,e()):setTimeout(function(){d.width&&(b.iW=d.width,b.iH=d.height);e()},1E3)};d.src=f.src}}else e()},e=function(){b.isLoaded=!0;b.isLoading=!1;g();m();k()},g=function(){if(!b.isAppended&&
c.ev){var a=c.st.visibleNearby,e=b.id-c._newSlideId;d||b.appendOnLoaded||!c.st.fadeinLoadedSlide||0!==e&&(!(a||c._isAnimating||c._isDragging)||-1!==e&&1!==e)||(a={visibility:"visible",opacity:0},a[c._vendorPref+"transition"]="opacity 400ms ease-in-out",b.content.css(a),setTimeout(function(){b.content.css("opacity",1)},16));b.holder.find(".rsPreloader").length?b.holder.append(b.content):b.holder.html(b.content);b.isAppended=!0;b.isLoaded&&(c._resizeImage(b),k());b.sizeReady||(b.sizeReady=!0,setTimeout(function(){c.ev.trigger("rsMaybeSizeReady",
b)},100))}},k=function(){!b.loadedTriggered&&c.ev&&(b.isLoaded=b.loadedTriggered=!0,b.holder.trigger("rsAfterContentSet"),c.ev.trigger("rsAfterContentSet",b))},l=function(){c.st.usePreloader&&b.holder.html(c._preloader.clone())},m=function(a){c.st.usePreloader&&(a=b.holder.find(".rsPreloader"),a.length&&a.remove())};b.isLoaded?g():d?!c._isMove&&b.images&&b.iW&&b.iH?a():(b.holder.isWaiting=!0,l(),b.holder.slideId=-99):a()},_addBlockToContainer:function(b,d,c){this._slidesContainer.append(b.holder);
b.appendOnLoaded=!1},_onDragStart:function(b,d){var c=this,a,f="touchstart"===b.type;c._isTouchGesture=f;c.ev.trigger("rsDragStart");if(n(b.target).closest(".rsNoDrag",c._currHolder).length)return c.dragSuccess=!1,!0;!d&&c._isAnimating&&(c._wasAnimating=!0,c._stopAnimation());c.dragSuccess=!1;if(c._isDragging)f&&(c._multipleTouches=!0);else{f&&(c._multipleTouches=!1);c._setGrabbingCursor();if(f){var e=b.originalEvent.touches;if(e&&0<e.length)a=e[0],1<e.length&&(c._multipleTouches=!0);else return}else b.preventDefault(),
a=b,c.msEnabled&&(a=a.originalEvent);c._isDragging=!0;c._doc.on(c._moveEvent,function(a){c._onDragMove(a,d)}).on(c._upEvent,function(a){c._onDragRelease(a,d)});c._currMoveAxis="";c._hasMoved=!1;c._pageX=a.pageX;c._pageY=a.pageY;c._startPagePos=c._accelerationPos=(d?c._thumbsHorizontal:c._slidesHorizontal)?a.pageX:a.pageY;c._horDir=0;c._verDir=0;c._currRenderPosition=d?c._thumbsPosition:c._sPosition;c._startTime=(new Date).getTime();if(f)c._sliderOverflow.on(c._cancelEvent,function(a){c._onDragRelease(a,
d)})}},_renderMovement:function(b,d){if(this._checkedAxis){var c=this._renderMoveTime,a=b.pageX-this._pageX,f=b.pageY-this._pageY,e=this._currRenderPosition+a,g=this._currRenderPosition+f,k=d?this._thumbsHorizontal:this._slidesHorizontal,e=k?e:g,g=this._currMoveAxis;this._hasMoved=!0;this._pageX=b.pageX;this._pageY=b.pageY;"x"===g&&0!==a?this._horDir=0<a?1:-1:"y"===g&&0!==f&&(this._verDir=0<f?1:-1);g=k?this._pageX:this._pageY;a=k?a:f;d?e>this._thumbsMinPosition?e=this._currRenderPosition+a*this._lastItemFriction:
e<this._thumbsMaxPosition&&(e=this._currRenderPosition+a*this._lastItemFriction):this._loop||(0>=this.currSlideId&&0<g-this._startPagePos&&(e=this._currRenderPosition+a*this._lastItemFriction),this.currSlideId>=this.numSlides-1&&0>g-this._startPagePos&&(e=this._currRenderPosition+a*this._lastItemFriction));this._currRenderPosition=e;200<c-this._startTime&&(this._startTime=c,this._accelerationPos=g);d?this._setThumbsPosition(this._currRenderPosition):this._isMove&&this._setPosition(this._currRenderPosition)}},
_onDragMove:function(b,d){var c=this,a,f="touchmove"===b.type;if(!c._isTouchGesture||f){if(f){if(c._lockAxis)return;var e=b.originalEvent.touches;if(e){if(1<e.length)return;a=e[0]}else return}else a=b,c.msEnabled&&(a=a.originalEvent);c._hasMoved||(c._useCSS3Transitions&&(d?c._thumbsContainer:c._slidesContainer).css(c._vendorPref+c._TD,"0s"),function k(){c._isDragging&&(c._animFrame=requestAnimationFrame(k),c._renderMoveEvent&&c._renderMovement(c._renderMoveEvent,d))}());if(c._checkedAxis)b.preventDefault(),
c._renderMoveTime=(new Date).getTime(),c._renderMoveEvent=a;else if(e=d?c._thumbsHorizontal:c._slidesHorizontal,a=Math.abs(a.pageX-c._pageX)-Math.abs(a.pageY-c._pageY)-(e?-7:7),7<a){if(e)b.preventDefault(),c._currMoveAxis="x";else if(f){c._completeGesture();return}c._checkedAxis=!0}else if(-7>a){if(!e)b.preventDefault(),c._currMoveAxis="y";else if(f){c._completeGesture();return}c._checkedAxis=!0}}},_completeGesture:function(){this._lockAxis=!0;this._hasMoved=this._isDragging=!1;this._onDragRelease()},
_onDragRelease:function(b,d){function c(a){return 100>a?100:500<a?500:a}function a(a,b){if(f._isMove||d)k=(-f._realId-f._idOffset)*f._slideSize,l=Math.abs(f._sPosition-k),f._currAnimSpeed=l/b,a&&(f._currAnimSpeed+=250),f._currAnimSpeed=c(f._currAnimSpeed),f._animateTo(k,!1)}var f=this,e,g,k,l;g="touchend"===b.type||"touchcancel"===b.type;if(!f._isTouchGesture||g)if(f._isTouchGesture=!1,f.ev.trigger("rsDragRelease"),f._renderMoveEvent=null,f._isDragging=!1,f._lockAxis=!1,f._checkedAxis=!1,f._renderMoveTime=
0,cancelAnimationFrame(f._animFrame),f._hasMoved&&(d?f._setThumbsPosition(f._currRenderPosition):f._isMove&&f._setPosition(f._currRenderPosition)),f._doc.off(f._moveEvent).off(f._upEvent),g&&f._sliderOverflow.off(f._cancelEvent),f._setGrabCursor(),!f._hasMoved&&!f._multipleTouches&&d&&f._thumbsEnabled){var m=n(b.target).closest(".rsNavItem");m.length&&f.goTo(m.index())}else{e=d?f._thumbsHorizontal:f._slidesHorizontal;if(!f._hasMoved||"y"===f._currMoveAxis&&e||"x"===f._currMoveAxis&&!e)if(!d&&f._wasAnimating){f._wasAnimating=
!1;if(f.st.navigateByClick){f._mouseNext(f.msEnabled?b.originalEvent:b);f.dragSuccess=!0;return}f.dragSuccess=!0}else{f._wasAnimating=!1;f.dragSuccess=!1;return}else f.dragSuccess=!0;f._wasAnimating=!1;f._currMoveAxis="";var h=f.st.minSlideOffset;g=g?b.originalEvent.changedTouches[0]:f.msEnabled?b.originalEvent:b;var r=e?g.pageX:g.pageY,q=f._startPagePos;g=f._accelerationPos;var u=f.currSlideId,t=f.numSlides,x=e?f._horDir:f._verDir,y=f._loop;Math.abs(r-q);e=r-g;g=(new Date).getTime()-f._startTime;
g=Math.abs(e)/g;if(0===x||1>=t)a(!0,g);else{if(!y&&!d)if(0>=u){if(0<x){a(!0,g);return}}else if(u>=t-1&&0>x){a(!0,g);return}if(d){k=f._thumbsPosition;if(k>f._thumbsMinPosition)k=f._thumbsMinPosition;else if(k<f._thumbsMaxPosition)k=f._thumbsMaxPosition;else{h=g*g/0.006;m=-f._thumbsPosition;r=f._thumbsContainerSize-f._thumbsViewportSize+f._thumbsPosition;0<e&&h>m?(m+=f._thumbsViewportSize/(15/(0.003*(h/g))),g=g*m/h,h=m):0>e&&h>r&&(r+=f._thumbsViewportSize/(15/(0.003*(h/g))),g=g*r/h,h=r);m=Math.max(Math.round(g/
0.003),50);k+=h*(0>e?-1:1);if(k>f._thumbsMinPosition){f._animateThumbsTo(k,m,!0,f._thumbsMinPosition,200);return}if(k<f._thumbsMaxPosition){f._animateThumbsTo(k,m,!0,f._thumbsMaxPosition,200);return}}f._animateThumbsTo(k,m,!0)}else q+h<r?0>x?a(!1,g):f._moveTo("prev",c(Math.abs(f._sPosition-(-f._realId-f._idOffset+1)*f._slideSize)/g),!1,!0,!0):q-h>r?0<x?a(!1,g):f._moveTo("next",c(Math.abs(f._sPosition-(-f._realId-f._idOffset-1)*f._slideSize)/g),!1,!0,!0):a(!1,g)}}},_setPosition:function(b){b=this._sPosition=
b;this._useCSS3Transitions?this._slidesContainer.css(this._xProp,this._tPref1+(this._slidesHorizontal?b+this._tPref2+0:0+this._tPref2+b)+this._tPref3):this._slidesContainer.css(this._slidesHorizontal?this._xProp:this._yProp,b)},updateSliderSize:function(b){var d,c;if(this.st.autoScaleSlider){var a=this.st.autoScaleSliderWidth,f=this.st.autoScaleSliderHeight;this.st.autoScaleHeight?(d=this.slider.width(),d!=this.width&&(this.slider.css("height",d*(f/a)),d=this.slider.width()),c=this.slider.height()):
(c=this.slider.height(),c!=this.height&&(this.slider.css("width",c*(a/f)),c=this.slider.height()),d=this.slider.width())}else d=this.slider.width(),c=this.slider.height();if(b||d!=this.width||c!=this.height){this.width=d;this.height=c;this._wrapWidth=d;this._wrapHeight=c;this.ev.trigger("rsBeforeSizeSet");this.ev.trigger("rsAfterSizePropSet");this._sliderOverflow.css({width:this._wrapWidth,height:this._wrapHeight});this._slideSize=(this._slidesHorizontal?this._wrapWidth:this._wrapHeight)+this.st.slidesSpacing;
this._imagePadding=this.st.imageScalePadding;for(d=0;d<this.slides.length;d++)b=this.slides[d],b.positionSet=!1,b&&b.images&&b.isLoaded&&(b.isRendered=!1,this._resizeImage(b));if(this._cloneHolders)for(d=0;d<this._cloneHolders.length;d++)b=this._cloneHolders[d],b.holder.css(this._reorderProp,(b.id+this._idOffset)*this._slideSize);this._updateBlocksContent();this._isMove&&(this._useCSS3Transitions&&this._slidesContainer.css(this._vendorPref+"transition-duration","0s"),this._setPosition((-this._realId-
this._idOffset)*this._slideSize));this.ev.trigger("rsOnUpdateNav")}this._sliderOffset=this._sliderOverflow.offset();this._sliderOffset=this._sliderOffset[this._reorderProp]},appendSlide:function(b,d){var c=this._parseNode(b);if(isNaN(d)||d>this.numSlides)d=this.numSlides;this.slides.splice(d,0,c);this.slidesJQ.splice(d,0,'\x3cdiv style\x3d"'+(this._isMove?"position:absolute;":this._opacityCSS)+'" class\x3d"rsSlide"\x3e\x3c/div\x3e');d<this.currSlideId&&this.currSlideId++;this.ev.trigger("rsOnAppendSlide",
[c,d]);this._refreshSlides(d);d===this.currSlideId&&this.ev.trigger("rsAfterSlideChange")},removeSlide:function(b){var d=this.slides[b];d&&(d.holder&&d.holder.remove(),b<this.currSlideId&&this.currSlideId--,this.slides.splice(b,1),this.slidesJQ.splice(b,1),this.ev.trigger("rsOnRemoveSlide",[b]),this._refreshSlides(b),b===this.currSlideId&&this.ev.trigger("rsAfterSlideChange"))},_refreshSlides:function(b){var d=this;b=d.numSlides;b=0>=d._realId?0:Math.floor(d._realId/b);d.numSlides=d.slides.length;
0===d.numSlides?(d.currSlideId=d._idOffset=d._realId=0,d.currSlide=d._oldHolder=null):d._realId=b*d.numSlides+d.currSlideId;for(b=0;b<d.numSlides;b++)d.slides[b].id=b;d.currSlide=d.slides[d.currSlideId];d._currHolder=d.slidesJQ[d.currSlideId];d.currSlideId>=d.numSlides?d.goTo(d.numSlides-1):0>d.currSlideId&&d.goTo(0);d._refreshNumPreloadImages();d._isMove&&d._loop&&d._slidesContainer.css(d._vendorPref+d._TD,"0ms");d._refreshSlidesTimeout&&clearTimeout(d._refreshSlidesTimeout);d._refreshSlidesTimeout=
setTimeout(function(){d._isMove&&d._setPosition((-d._realId-d._idOffset)*d._slideSize);d._updateBlocksContent();d._isMove||d._currHolder.css({display:"block",opacity:1})},14);d.ev.trigger("rsOnUpdateNav")},_setGrabCursor:function(){this._hasDrag&&this._isMove&&(this._grabCursor?this._sliderOverflow.css("cursor",this._grabCursor):(this._sliderOverflow.removeClass("grabbing-cursor"),this._sliderOverflow.addClass("grab-cursor")))},_setGrabbingCursor:function(){this._hasDrag&&this._isMove&&(this._grabbingCursor?
this._sliderOverflow.css("cursor",this._grabbingCursor):(this._sliderOverflow.removeClass("grab-cursor"),this._sliderOverflow.addClass("grabbing-cursor")))},next:function(b){this._moveTo("next",this.st.transitionSpeed,!0,!b)},prev:function(b){this._moveTo("prev",this.st.transitionSpeed,!0,!b)},_moveTo:function(b,d,c,a,f){var e=this,g,k,l;e.ev.trigger("rsBeforeMove",[b,a]);l="next"===b?e.currSlideId+1:"prev"===b?e.currSlideId-1:b=parseInt(b,10);if(!e._loop){if(0>l){e._doBackAndForthAnim("left",!a);
return}if(l>=e.numSlides){e._doBackAndForthAnim("right",!a);return}}e._isAnimating&&(e._stopAnimation(!0),c=!1);k=l-e.currSlideId;l=e._prevSlideId=e.currSlideId;var m=e.currSlideId+k;a=e._realId;var h;e._loop?(m=e._updateBlocksContent(!1,m),a+=k):a=m;e._newSlideId=m;e._oldHolder=e.slidesJQ[e.currSlideId];e._realId=a;e.currSlideId=e._newSlideId;e.currSlide=e.slides[e.currSlideId];e._currHolder=e.slidesJQ[e.currSlideId];var m=e.st.slidesDiff,n=Boolean(0<k);k=Math.abs(k);var q=Math.floor(l/e._numPreloadImages),
u=Math.floor((l+(n?m:-m))/e._numPreloadImages),q=(n?Math.max(q,u):Math.min(q,u))*e._numPreloadImages+(n?e._numPreloadImages-1:0);q>e.numSlides-1?q=e.numSlides-1:0>q&&(q=0);l=n?q-l:l-q;l>e._numPreloadImages&&(l=e._numPreloadImages);if(k>l+m)for(e._idOffset+=(k-(l+m))*(n?-1:1),d*=1.4,l=0;l<e.numSlides;l++)e.slides[l].positionSet=!1;e._currAnimSpeed=d;e._updateBlocksContent(!0);f||(h=!0);g=(-a-e._idOffset)*e._slideSize;h?setTimeout(function(){e._isWorking=!1;e._animateTo(g,b,!1,c);e.ev.trigger("rsOnUpdateNav")},
0):(e._animateTo(g,b,!1,c),e.ev.trigger("rsOnUpdateNav"))},_updateArrowsNav:function(){this.st.arrowsNav&&(1>=this.numSlides?(this._arrowLeft.css("display","none"),this._arrowRight.css("display","none")):(this._arrowLeft.css("display","block"),this._arrowRight.css("display","block"),this._loop||this.st.loopRewind||(0===this.currSlideId?this._arrowLeft.addClass("rsArrowDisabled"):this._arrowLeft.removeClass("rsArrowDisabled"),this.currSlideId===this.numSlides-1?this._arrowRight.addClass("rsArrowDisabled"):
this._arrowRight.removeClass("rsArrowDisabled"))))},_animateTo:function(b,d,c,a,f){function e(){var a;k&&(a=k.data("rsTimeout"))&&(k!==l&&k.css({opacity:0,display:"none",zIndex:0}),clearTimeout(a),k.data("rsTimeout",""));if(a=l.data("rsTimeout"))clearTimeout(a),l.data("rsTimeout","")}var g=this,k,l,m={};isNaN(g._currAnimSpeed)&&(g._currAnimSpeed=400);g._sPosition=g._currRenderPosition=b;g.ev.trigger("rsBeforeAnimStart");g._useCSS3Transitions?g._isMove?(g._currAnimSpeed=parseInt(g._currAnimSpeed,10),
c=g._vendorPref+g._TTF,m[g._vendorPref+g._TD]=g._currAnimSpeed+"ms",m[c]=a?n.recipeBoxRsCSS3Easing[g.st.easeInOut]:n.recipeBoxRsCSS3Easing[g.st.easeOut],g._slidesContainer.css(m),a||!g.hasTouch?setTimeout(function(){g._setPosition(b)},5):g._setPosition(b)):(g._currAnimSpeed=g.st.transitionSpeed,k=g._oldHolder,l=g._currHolder,l.data("rsTimeout")&&l.css("opacity",0),e(),k&&k.data("rsTimeout",setTimeout(function(){m[g._vendorPref+g._TD]="0ms";m.zIndex=0;m.display="none";k.data("rsTimeout","");k.css(m);
setTimeout(function(){k.css("opacity",0)},16)},g._currAnimSpeed+60)),m.display="block",m.zIndex=g._fadeZIndex,m.opacity=0,m[g._vendorPref+g._TD]="0ms",m[g._vendorPref+g._TTF]=n.recipeBoxRsCSS3Easing[g.st.easeInOut],l.css(m),l.data("rsTimeout",setTimeout(function(){l.css(g._vendorPref+g._TD,g._currAnimSpeed+"ms");l.data("rsTimeout",setTimeout(function(){l.css("opacity",1);l.data("rsTimeout","")},20))},20))):g._isMove?(m[g._slidesHorizontal?g._xProp:g._yProp]=b+"px",g._slidesContainer.animate(m,g._currAnimSpeed,
a?g.st.easeInOut:g.st.easeOut)):(k=g._oldHolder,l=g._currHolder,l.stop(!0,!0).css({opacity:0,display:"block",zIndex:g._fadeZIndex}),g._currAnimSpeed=g.st.transitionSpeed,l.animate({opacity:1},g._currAnimSpeed,g.st.easeInOut),e(),k&&k.data("rsTimeout",setTimeout(function(){k.stop(!0,!0).css({opacity:0,display:"none",zIndex:0})},g._currAnimSpeed+60)));g._isAnimating=!0;g.loadingTimeout&&clearTimeout(g.loadingTimeout);g.loadingTimeout=f?setTimeout(function(){g.loadingTimeout=null;f.call()},g._currAnimSpeed+
60):setTimeout(function(){g.loadingTimeout=null;g._animationComplete(d)},g._currAnimSpeed+60)},_stopAnimation:function(b){this._isAnimating=!1;clearTimeout(this.loadingTimeout);if(this._isMove)if(!this._useCSS3Transitions)this._slidesContainer.stop(!0),this._sPosition=parseInt(this._slidesContainer.css(this._xProp),10);else{if(!b){b=this._sPosition;var d=this._currRenderPosition=this._getTransformProp();this._slidesContainer.css(this._vendorPref+this._TD,"0ms");b!==d&&this._setPosition(d)}}else 20<
this._fadeZIndex?this._fadeZIndex=10:this._fadeZIndex++},_getTransformProp:function(){var b=window.getComputedStyle(this._slidesContainer.get(0),null).getPropertyValue(this._vendorPref+"transform").replace(/^matrix\(/i,"").split(/, |\)$/g),d=0===b[0].indexOf("matrix3d");return parseInt(b[this._slidesHorizontal?d?12:4:d?13:5],10)},_getCSS3Prop:function(b,d){return this._useCSS3Transitions?this._tPref1+(d?b+this._tPref2+0:0+this._tPref2+b)+this._tPref3:b},_animationComplete:function(b){this._isMove||
(this._currHolder.css("z-index",0),this._fadeZIndex=10);this._isAnimating=!1;this.staticSlideId=this.currSlideId;this._updateBlocksContent();this._slidesMoved=!1;this.ev.trigger("rsAfterSlideChange")},_doBackAndForthAnim:function(b,d){var c=this,a=(-c._realId-c._idOffset)*c._slideSize;if(0!==c.numSlides&&!c._isAnimating)if(c.st.loopRewind)c.goTo("left"===b?c.numSlides-1:0,d);else if(c._isMove){c._currAnimSpeed=200;var f=function(){c._isAnimating=!1};c._animateTo(a+("left"===b?30:-30),"",!1,!0,function(){c._isAnimating=
!1;c._animateTo(a,"",!1,!0,f)})}},_resizeImage:function(b,d){if(!b.isRendered){var c=b.content,a="rsMainSlideImage",f,e=this.st.imageAlignCenter,g=this.st.imageScaleMode,k;b.videoURL&&(a="rsVideoContainer","fill"!==g?f=!0:(k=c,k.hasClass(a)||(k=k.find("."+a)),k.css({width:"100%",height:"100%"}),a="rsMainSlideImage"));c.hasClass(a)||(c=c.find("."+a));if(c){var l=b.iW,m=b.iH;b.isRendered=!0;if("none"!==g||e){a="fill"!==g?this._imagePadding:0;k=this._wrapWidth-2*a;var h=this._wrapHeight-2*a,n,q,u={};
"fit-if-smaller"===g&&(l>k||m>h)&&(g="fit");if("fill"===g||"fit"===g)n=k/l,q=h/m,n="fill"==g?n>q?n:q:"fit"==g?n<q?n:q:1,l=Math.ceil(l*n,10),m=Math.ceil(m*n,10);"none"!==g&&(u.width=l,u.height=m,f&&c.find(".rsImg").css({width:"100%",height:"100%"}));e&&(u.marginLeft=Math.floor((k-l)/2)+a,u.marginTop=Math.floor((h-m)/2)+a);c.css(u)}}}}};n.recipeBoxRsProto=d.prototype;n.fn.recipeBoxRoyalSlider=function(b){var p=arguments;return this.each(function(){var c=n(this);if("object"!==typeof b&&b){if((c=c.data("royalSlider"))&&
c[b])return c[b].apply(c,Array.prototype.slice.call(p,1))}else c.data("royalSlider")||c.data("royalSlider",new d(c,b))})};n.fn.recipeBoxRoyalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:!1,loopRewind:!1,numImagesToPreload:4,fadeinLoadedSlide:!0,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:!0,arrowsNav:!0,arrowsNavAutoHide:!0,navigateByClick:!0,randomizeSlides:!1,sliderDrag:!0,sliderTouch:!0,keyboardNavEnabled:!1,fadeInAfterLoaded:!0,
allowCSS3:!0,allowCSS3OnWebkit:!0,addActiveClass:!1,autoHeight:!1,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:!0,imageScalePadding:4,usePreloader:!0,autoScaleSlider:!1,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:!0,arrowsNavHideOnTouch:!1,globalCaption:!1,slidesDiff:2};n.recipeBoxRsCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"};
n.extend(h.easing,{easeInOutSine:function(b,d,c,a,f){return-a/2*(Math.cos(Math.PI*d/f)-1)+c},easeOutSine:function(b,d,c,a,f){return a*Math.sin(d/f*(Math.PI/2))+c},easeOutCubic:function(b,d,c,a,f){return a*((d=d/f-1)*d*d+1)+c}});n.extend(n.recipeBoxRsProto,{_initBullets:function(){var b=this;"bullets"===b.st.controlNavigation&&(b.ev.one("rsAfterPropsSetup",function(){b._controlNavEnabled=!0;b.slider.addClass("rsWithBullets");for(var d='\x3cdiv class\x3d"rsNav rsBullets"\x3e',c=0;c<b.numSlides;c++)d+=
'\x3cdiv class\x3d"rsNavItem rsBullet"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e';b._controlNav=d=n(d+"\x3c/div\x3e");b._controlNavItems=d.appendTo(b.slider).children();b._controlNav.on("click.rs",".rsNavItem",function(a){b._thumbsDrag||b.goTo(n(this).index())})}),b.ev.on("rsOnAppendSlide",function(d,c,a){a>=b.numSlides?b._controlNav.append('\x3cdiv class\x3d"rsNavItem rsBullet"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e'):b._controlNavItems.eq(a).before('\x3cdiv class\x3d"rsNavItem rsBullet"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');
b._controlNavItems=b._controlNav.children()}),b.ev.on("rsOnRemoveSlide",function(d,c){var a=b._controlNavItems.eq(c);a&&a.length&&(a.remove(),b._controlNavItems=b._controlNav.children())}),b.ev.on("rsOnUpdateNav",function(){var d=b.currSlideId;b._prevNavItem&&b._prevNavItem.removeClass("rsNavSelected");d=b._controlNavItems.eq(d);d.addClass("rsNavSelected");b._prevNavItem=d}))}});n.recipeBoxRsModules.bullets=n.recipeBoxRsProto._initBullets});
window.mrbContextLoaded(function(h){function d(a,c){this.defaults={maxLines:1,lineHeight:null,truncateString:"",truncateAfterLinks:!0,showText:"",hideText:"",showClass:"show",hideClass:"hide",collapsed:!0,debug:!1,contextParent:null,maxSteps:100,tooltip:!1,animate:!1,animateOptions:{complete:function(){}}};this.config=b.extend(!0,{},this.defaults,c);this.$el=b(a);if(null===this.config.lineHeight){var d=NaN,d="normal"===this.$el.css("line-height")?1.14*parseFloat(this.$el.css("font-size")):parseFloat(this.$el.css("line-height"));
if(isNaN(d))throw Error('No "lineHeight" parameter was specified and none could be calculated.');this.config.lineHeight=d}"inline"===this.$el.css("display")&&(null===this.config.contextParent?this.config.contextParent=e(this.$el):"inline"===this.config.contextParent.css("display")&&(this.config.contextParent=e(this.config.contextParent)));this.html=this.$el.html();this.lastTruncationPoint=null}var n=0,b=h,p=/(?:^|\W*)\w*$/,c=/(?:\w+)(?=\W+|$)/,a=null!==/msie/i.exec(navigator.userAgent)?function(a,
b){a.nodeValue=b}:function(a,b){a.textContent=b},f=function(c,e,d,f){var g=[],h=b("\x3cdiv/\x3e");h.html(c);c=0;for(var n=h.contents().detach(),t=0,t=n.size()-1;0<=t;--t)g.push({$parent:h,node:n.get(t)});for(;0<g.length&&c<e;){var n=g.pop(),x=n.node,t=b(x),y=0,w;if(3===x.nodeType){var z=n.$parent;z.append(t);w=t.text();y=w.length;if(y>e-c){e=p.exec(w.substring(0,e-c));a(x,w.substring(0,e.index+e[0].length));"undefined"!==typeof d&&(z.is("a")&&!1!==f?z.parent().append(d):z.append(d));break}else c+=
y}else{w=t.text();y=w.length;if(y>e-c)for(x=t.contents().detach(),w=0,w=x.size()-1;0<=w;--w)g.push({$parent:t,node:x.get(w)});else c+=y;n.$parent.append(t)}c===e&&n.$parent.append(d)}return h.html()},e=function(a){for(a=a.parent();"undefined"!==typeof a&&0<a.size();){if("inline"!==a.css("display"))return a;a=a.parent()}return null},g=function(a,e,d){var g=null,h=function(){if((-1!==window.location.hash.indexOf("_debugTruncate")||!0===e.debug)&&"undefined"!==typeof console)if(null!==/msie/i.exec(navigator.userAgent)){var a=
"",b;for(b=0;b<arguments.length;b+=1)0<a.length&&(a+=", "),a="function"===typeof arguments[b]?a+"[function]":"object"===typeof arguments[b]&&"object"===typeof JSON&&"function"===typeof JSON.stringify?a+JSON.stringify(arguments[b]):a+arguments[b].toString();console.log(a)}else try{console.log.apply(null,arguments)}catch(c){console.log(arguments)}},q=""!==e.showText?' \x3ca class\x3d"'+e.showClass+'" href\x3d"#"\x3e'+e.showText+"\x3c/a\x3e":"",u=""!==e.hideText?' \x3ca class\x3d"'+e.hideClass+'" href\x3d"#"\x3e'+
e.hideText+"\x3c/a\x3e":"",t=e.maxLines*e.lineHeight,g=t+e.lineHeight-1,x=new Date,y=b("\x3cdiv/\x3e");y.html(d);if("undefined"!==typeof a.data("truncatePlugin")||a.height()>g){var w=null===e.contextParent||e.contextParent===a?a:b(e.contextParent),z,E;if(0<w.find(a).size()){var B=[];z=a;for(E=z.parent();0!==E.size()&&!(0<E.find(w).size());)B.unshift(z.index()),z=E,E=E.parent();z=E=w.clone();var D;for(D=0;D<B.length;D++){var C=B[D];z=z.children().eq(C)}z.html(d)}else z=a.clone(),z.html(d),E=z;B="border-box"===
w.css("-moz-box-sizing")||"border-box"===w.css("-webkit-box-sizing")||"border-box"===w.css("box-sizing")?w.outerWidth():w.width();E.css({position:"absolute",left:"0",top:"0",visibility:"hidden","max-width":B});z.css({"line-height":e.lineHeight+"px",height:"auto"});w.after(E);var A=z.height();if(A>g){var F=y.text(),y=0,B=w=F.length,G;D=0;do{z.height()>g?w=B:y=B;C=Math.floor((w+y)/2);B=p.exec(F.substring(0,C)).index;if(B===y){var H=c.exec(F.substring(C,w));null!==H&&(C=C+H.index+H[0].length,C!==w&&
(B=C))}G=f(d,B,e.truncateString,e.truncateAfterLinks);z.html(G+q);D++}while(D<e.maxSteps&&B>y&&B<w);E.remove();!1===e.collapsed?a.html(d+u):a.html(G+q);a.css({display:"block","line-height":e.lineHeight+"px"});a.undelegate("truncate");a.delegate("."+e.showClass,"click.truncate",function(c){c.preventDefault();a.css({height:t+"px"});a.html(d+u);var f=new b.Deferred;f.then(function(){a.css({height:"auto"});a.trigger("show");a.trigger("toggle");!0===e.tooltip&&a.removeAttr("title")});if(!0===e.animate){var g=
e.animateOptions.complete;c=b.extend(!0,{},e.animateOptions,{complete:function(){f.resolve();g.apply(this,Array.prototype.slice.call(arguments,1))}});a.animate({height:A+"px"},c)}else f.resolve()});a.delegate("."+e.hideClass,"click.truncate",function(c){c.preventDefault();var d=new b.Deferred;d.then(function(){a.html(G+q);a.trigger("hide");a.trigger("toggle");!0===e.tooltip&&a.attr("title",F)});if(!0===e.animate){var f=e.animateOptions.complete;c=b.extend(!0,{},e.animateOptions,{complete:function(){d.resolve();
f.apply(this,Array.prototype.slice.call(arguments,1))}});a.animate({height:t+"px"},c)}else d.resolve()});!0===e.tooltip&&a.attr("title",F);h("truncate.js: truncated element with height "+A+"px \x3e "+g+"px in "+D+" steps.");g=B}else E.remove(),a.html(d),!0===e.tooltip&&a.removeAttr("title"),g=d.length}else h("truncate.js: skipped processing element with height "+A+"px \x3c "+g+"px"),g=d.length;z=new Date;n+=z-x;h("truncate.js: took "+(z-x)+"  ms to execute.");h("truncate.js: ",a);h("truncate.js: cumulative execution time "+
n+" ms");return g};d.prototype={options:function(a){if("object"===typeof a)this.config=b.extend(!0,{},this.config,a);else return this.config},update:function(a){"undefined"===typeof a?(a=this.$el.html(),"undefined"!==typeof this.lastHtmlLength&&a.length!==this.lastHtmlLength&&(this.html=a=a.substring(0,this.lastTruncationPoint)+this.html.substring(this.lastTruncationPoint))):this.html=a;this.lastTruncationPoint=g(this.$el,this.config,this.html);this.lastHtmlLength=this.$el.html().length},getOriginalHtml:function(){return this.html}};
b.fn.truncate=function(a){var c=b(this);"undefined"!==typeof a&&null!==a&&"object"!==typeof a||c.each(function(){var c=b(this),e=new d(c,a);c.data("truncatePlugin",e);e.lastTruncationPoint=g(c,e.config,e.html);e.lastHtmlLength=c.html().length});var e,f=arguments;"string"===typeof a&&c.each(function(){var c=b(this).data("truncatePlugin");"function"===typeof c[a]&&(c=c[a].apply(c,Array.prototype.slice.call(f,1)),"undefined"===typeof e&&(e=c))});return"undefined"!==typeof e?e:this}});
window.mrbContextLoaded(function(h){function d(b){return"object"==typeof b?b:{top:b,left:b}}var n=h.scrollTo=function(b,d,c){h(window).scrollTo(b,d,c)};n.defaults={axis:"xy",duration:1.3<=parseFloat(h.fn.jquery)?0:1,limit:!0};n.window=function(b){return h(window)._scrollable()};h.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==h.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||
this;return/webkit/i.test(navigator.userAgent)||"BackCompat"==b.compatMode?b.body:b.documentElement})};h.fn.scrollTo=function(b,p,c){"object"==typeof p&&(c=p,p=0);"function"==typeof c&&(c={onAfter:c});"max"==b&&(b=9E9);c=h.extend({},n.defaults,c);p=p||c.duration;c.queue=c.queue&&1<c.axis.length;c.queue&&(p/=2);c.offset=d(c.offset);c.over=d(c.over);return this._scrollable().each(function(){function a(a){e.animate(l,p,c.easing,a&&function(){a.call(this,g,c)})}if(null!=b){var f=this,e=h(f),g=b,k,l={},
m=e.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(g)){g=d(g);break}g=h(g,this);if(!g.length)return;case "object":if(g.is||g.style)k=(g=h(g)).offset()}h.each(c.axis.split(""),function(b,d){var h="x"==d?"Left":"Top",p=h.toLowerCase(),t="scroll"+h,x=f[t],y=n.max(f,d);k?(l[t]=k[p]+(m?0:x-e.offset()[p]),c.margin&&(l[t]-=parseInt(g.css("margin"+h))||0,l[t]-=parseInt(g.css("border"+h+"Width"))||0),l[t]+=c.offset[p]||0,c.over[p]&&(l[t]+=g["x"==d?"width":
"height"]()*c.over[p])):(h=g[p],l[t]=h.slice&&"%"==h.slice(-1)?parseFloat(h)/100*y:h);c.limit&&/^\d+$/.test(l[t])&&(l[t]=0>=l[t]?0:Math.min(l[t],y));!b&&c.queue&&(x!=l[t]&&a(c.onAfterFirst),delete l[t])});a(c.onAfter)}}).end()};n.max=function(b,d){var c="x"==d?"Width":"Height",a="scroll"+c;if(!h(b).is("html,body"))return b[a]-h(b)[c.toLowerCase()]();var c="client"+c,f=b.ownerDocument.documentElement,e=b.ownerDocument.body;return Math.max(f[a],e[a])-Math.min(f[c],e[c])}});
window.mrbContextLoaded(function(h){window.StickyTitles=function(d,n){var b=function(b){var c=h(b),a=c.outerHeight();!1!==c.is(":visible")&&0!==a&&(c=h(b).wrap('\x3cdiv class\x3d"mrb-sticky-header" /\x3e'),c.parent().css({height:a+"px","margin-bottom":c.css("margin-bottom")}),c.css({"margin-bottom":0}),h.data(c[0],"initialized",!0),h.data(c[0],"pos",c.offset().top),h.data(c[0],"offset",c.offsetParent().offset().top),h.data(c[0],"horizonTop","undefined"!==typeof n?n:0))};this.load=function(){d.each(function(){b(this)})};
this.scroll=function(){d.each(function(d){d=h(this);var c=h.data(d[0],"initialized");!0!==c&&b(this);!0===c&&"fixed"!==d.css("position")&&"absolute"!==d.css("position")&&h.data(d[0],"pos",d.offset().top)});d.each(function(b){var c=h(this),a=d.eq(b+1);b=d.eq(b-1);var f=h.data(c[0],"pos"),e=h(window).scrollTop()||null,g=h.data(c[0],"horizonTop");!0===h.data(c[0],"initialized")&&(f<=e+g?(c.addClass("mrb-sticky-header-fixed"),c.hasClass("mrb-sticky-header-hidden")||setTimeout(function(){c.addClass("mrb-sticky-header-hidden")},
0),0<a.length&&c.offset().top>=h.data(a[0],"pos")-c.outerHeight()&&c.addClass("mrb-sticky-header-absolute").css("top",h.data(a[0],"pos")-c.outerHeight()-h.data(c[0],"offset"))):(c.removeClass("mrb-sticky-header-fixed"),c.hasClass("mrb-sticky-header-hidden")&&setTimeout(function(){c.removeClass("mrb-sticky-header-hidden")},0),0<b.length&&e<=h.data(c[0],"pos")-b.outerHeight()&&b.removeClass("mrb-sticky-header-absolute").removeAttr("style")))})};this.add=function(h){h.each(function(){b(this)});d=d.add(h)}}});
window.mrbContextLoaded(function(h){(function(d){d(h)})(function(d){function h(a){return c.raw?a:encodeURIComponent(a)}function b(a,b){var e;if(c.raw)e=a;else a:{var g=a;0===g.indexOf('"')&&(g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{g=decodeURIComponent(g.replace(p," "))}catch(k){e=void 0;break a}try{e=c.json?JSON.parse(g):g;break a}catch(h){}e=void 0}return d.isFunction(b)?b(e):e}var p=/\+/g,c=d.cookie=function(a,f,e){if(void 0!==f&&!d.isFunction(f)){e=d.extend({},c.defaults,
e);if("number"===typeof e.expires){var g=e.expires,k=e.expires=new Date;k.setDate(k.getDate()+g)}return document.cookie=[h(a),"\x3d",h(c.json?JSON.stringify(f):String(f)),e.expires?"; expires\x3d"+e.expires.toUTCString():"",e.path?"; path\x3d"+e.path:"",e.domain?"; domain\x3d"+e.domain:"",e.secure?"; secure":""].join("")}e=a?void 0:{};for(var g=document.cookie?document.cookie.split("; "):[],k=0,l=g.length;k<l;k++){var m=g[k].split("\x3d"),p;p=m.shift();p=c.raw?p:decodeURIComponent(p);m=m.join("\x3d");
if(a&&a===p){e=b(m,f);break}a||void 0===(m=b(m))||(e[p]=m)}return e};c.defaults={};d.removeCookie=function(a,b){return void 0!==d.cookie(a)?(d.cookie(a,"",d.extend({},b,{expires:-1})),!0):!1}})});
window.mrbContextLoaded(function(h){"undefined"!==typeof h&&function(d){d.fn.lazyLoad=function(h){var b=d.extend({srcProp:"data-src",removeSrcProp:!0,descend:!0,loadingClass:"loading",maxTimeout:1E3},h);h=d(this).filter(function(a){return!0!==d(this).data("lazyLoad")});var p=null;!0===b.descend&&(p=h.add(h.find("["+b.srcProp+"]")));h=h.filter("["+b.srcProp+"]");null!==p&&0<p.size()&&h.add(p);h.data("lazyLoad",!0);var c=[];h.each(function(){var a=d(this);a.attr("src");var e=a.attr(b.srcProp);if(null!=
e){var g=new d.Deferred;c.push(g);a.addClass(b.loadingClass);if(a.is("img")){var k=new Image,h=d(k);h.load(function(){a.attr("src",e);b.removeSrcProp&&a.removeAttr(b.srcProp);delete k;a.removeClass(b.loadingClass);g.resolve()});h.error(function(){a.trigger("error")});k.src=e}a.is("iframe")&&(a.load(function(){b.removeSrcProp&&a.removeAttr(b.srcProp);a.removeClass(b.loadingClass);g.resolve()}),a.attr("src",e))}});var a=new d.Deferred;d.when.apply(null,c).then(function(){a.resolve()});"number"===typeof b.maxTimeout&&
setTimeout(function(){a.resolve()},b.maxTimeout);return a}}(h)});
window.mrbContextLoaded(function(h){function d(a,b){var e=this;e.defaults={lazyLoadBottomOffset:1200,lazyDisplayBottomOffset:-150,lazyDisplayTriggerClass:"box-lazy-display-trigger",lazyDisplaySelector:null,lazyDisplayHideClass:"box-lazy-display-hide",lazyLoadOptions:{maxTimeout:1E3,loadingClass:"box-loading"},windowSelector:null,frameClass:"dari-frame",frameLoadingClass:"dari-frame-loading",frameLoadedClass:"dari-frame-loaded",paginationSelector:".pagination"};e.config=n.extend(!0,{},this.defaults,
b);e.$el=n(a);e.furthest=0;e.$el.on("endLoad",function(){c(n(this),e.config)})}var n=h,b=SNI.BOX.DEBUG.forScope("HORIZONS"),p=function(a,b){if(b&&null!==b.windowSelector){var c=a.find(b.windowSelector);if(1===c.size())return c.offset().top+c.outerHeight()}return parseInt(window.pageYOffset,10)+window.innerHeight},c=function(c,e){var d,f=c.filter("img[data-src]").add(c.find("img[data-src]")).not("."+e.lazyLoadOptions.loadingClass);0<f.size()&&(b("Loading images: ",f),f.lazyLoad(e.lazyLoadOptions).then(function(){d=
null!==e.lazyDisplaySelector?f.closest(e.lazyDisplaySelector):c;SNI.BOX.DEBUG("then displaying: ",d);d.addClass(e.lazyDisplayTriggerClass);d.addClass(e.lazyDisplayHideClass);a(d,e)}))},a=function(a,b,c){"number"!==typeof c&&(c=p(a,b));a.filter("."+b.lazyDisplayTriggerClass).add(a.find("."+b.lazyDisplayTriggerClass)).each(function(){var a=n(this);a.offset().top<c+b.lazyDisplayBottomOffset&&(a.removeClass(b.lazyDisplayTriggerClass),a.removeClass(b.lazyDisplayHideClass))})},f=function(a,c,e){"number"!==
typeof e&&(e=p(a,c));a.filter(c.paginationSelector).add(a.find(c.paginationSelector)).each(function(){var a=n(this),d=a.closest("."+c.frameClass);0<d.size()&&!1===d.hasClass(c.frameLoadingClass)&&a.offset().top<e+c.lazyLoadBottomOffset&&(b("[horizons.js]: lazy loading pagination"),a.click())})},e=[],g=0;n(window).on("scroll",n.throttle(50,function(){if(0!==e.length){var a=p();if(a>g)for(g=a,a=0;a<e.length;a+=1)n(e[a]).each(function(){var a=n(this).data("horizonsPlugin");a.needsUpdate()&&(a.lazyLoad(),
a.lazyDisplay())})}}));d.prototype={options:function(a){"object"===typeof a&&(this.config=n.extend(!0,{},this.config,a));return this.config},update:function(){c(this.$el,this.config)},lazyDisplay:function(b){a(this.$el,this.config,b)},lazyLoad:function(a){f(this.$el,this.config,a)},needsUpdate:function(){if(null!==this.config.windowSelector)return!0;var a=p(this.$el,this.options);return a>this.furthest?(this.furthest=a,!0):!1},window:function(){if(null!==this.config.windowSelector){var a=this.$el.find(this.config.windowSelector);
if(1===a.size())return a;a=n(this.config.windowSelector);if(1===a.size())return a}return null}};n.fn.horizons=function(a){var b=n(this);"undefined"!==typeof a&&null!==a&&"object"!==typeof a||b.each(function(){var b=n(this),g=new d(b,a);f(b,g.options());c(b,g.options());if(null!==g.window())g.window().on("scroll",function(){g.lazyLoad();g.lazyDisplay()});else e.push(b);b.data("horizonsPlugin",g)});var g,h=arguments;"string"===typeof a&&b.each(function(){var b=n(this).data("horizonsPlugin");"function"===
typeof b[a]&&(b=b[a].apply(b,Array.prototype.slice.call(h,1)),"undefined"===typeof g&&(g=b))});return"undefined"!==typeof g?g:this}});
window.mrbContextLoaded(function(h){+function(d){function h(c,a){return this.each(function(){var f=d(this),e=f.data("bs.modal"),g=d.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c);e||f.data("bs.modal",e=new b(this,g));if("string"==typeof c)e[c](a);else g.show&&e.show(a)})}var b=function(b,a){this.options=a;this.$body=d(document.body);this.$element=d(b);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},
this))};b.VERSION="3.1.1";b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(b){return this.isShown?this.hide():this.show(b)};b.prototype.show=function(b){var a=this,f=d.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(f);this.isShown||f.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss\x3d"modal"]',d.proxy(this.hide,this)),this.backdrop(function(){var e=
d.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(a.$body);a.$element.show().scrollTop(0);e&&a.$element[0].offsetWidth;a.$element.addClass("in").attr("aria-hidden",!1);a.enforceFocus();var f=d.Event("shown.bs.modal",{relatedTarget:b});e?a.$element.find(".modal-dialog").one(d.support.transition.end,function(){a.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(300):a.$element.trigger("focus").trigger(f)}))};b.prototype.hide=function(b){b&&b.preventDefault();
b=d.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),d(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),d.support.transition&&this.$element.hasClass("fade")?this.$element.one(d.support.transition.end,d.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",
d.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.trigger("focus")},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",d.proxy(function(b){27==b.which&&this.hide()},this));else this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=function(){var b=this;this.$element.hide();this.backdrop(function(){b.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(b){var a=this,f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=d.support.transition&&f;this.$backdrop=d('\x3cdiv class\x3d"modal-backdrop '+f+'" /\x3e').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",d.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},
this));e&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");b&&(e?this.$backdrop.one(d.support.transition.end,b).emulateTransitionEnd(150):b())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),f=function(){a.removeBackdrop();b&&b()},d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(d.support.transition.end,f).emulateTransitionEnd(150):f()):b&&b()};b.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=
this.scrollbarWidth||this.measureScrollbar())};b.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",b+this.scrollbarWidth)};b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};b.prototype.measureScrollbar=function(){var b=document.createElement("div");b.className="modal-scrollbar-measure";this.$body.append(b);var a=b.offsetWidth-b.clientWidth;this.$body[0].removeChild(b);return a};var p=
d.fn.modal;d.fn.modal=h;d.fn.modal.Constructor=b;d.fn.modal.noConflict=function(){d.fn.modal=p;return this};d(document).on("click.bs.modal.data-api",'[data-toggle\x3d"modal"]',function(b){var a=d(this),f=a.attr("href"),e=d(a.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(f)&&f},e.data(),a.data());a.is("a")&&b.preventDefault();e.one("show.bs.modal",function(b){if(!b.isDefaultPrevented())e.one("hidden.bs.modal",function(){a.is(":visible")&&
a.trigger("focus")})});h.call(e,f,this)})}(h)});
window.mrbContextLoaded(function(h){+function(d){function h(a){a&&3===a.which||(d(p).remove(),d(c).each(function(){var c=b(d(this)),f={relatedTarget:this};c.hasClass("open")&&(c.trigger(a=d.Event("hide.bs.dropdown",f)),a.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown",f))}))}function b(a){var b=a.attr("data-target");b||(b=(b=a.attr("href"))&&/#[A-Za-z]/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));return(b=b&&d(b))&&b.length?b:a.parent()}var p=".dropdown-backdrop",c='[data-toggle\x3d"dropdown"]',
a=function(a){d(a).on("click.bs.dropdown",this.toggle)};a.VERSION="3.1.1";a.prototype.toggle=function(a){var c=d(this);if(!c.is(".disabled, :disabled")){var f=b(c);a=f.hasClass("open");h();if(!a){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length)d('\x3cdiv class\x3d"dropdown-backdrop"/\x3e').insertAfter(d(this)).on("click",h);var p={relatedTarget:this};f.trigger(a=d.Event("show.bs.dropdown",p));if(a.isDefaultPrevented())return;c.trigger("focus");f.toggleClass("open").trigger("shown.bs.dropdown",
p)}return!1}};a.prototype.keydown=function(a){if(/(38|40|27)/.test(a.keyCode)){var f=d(this);a.preventDefault();a.stopPropagation();if(!f.is(".disabled, :disabled")){var k=b(f),h=k.hasClass("open");if(!h||h&&27==a.keyCode)return 27==a.which&&k.find(c).trigger("focus"),f.trigger("click");f=k.find('[role\x3d"menu"] li:not(.divider):visible a, [role\x3d"listbox"] li:not(.divider):visible a');f.length&&(k=f.index(f.filter(":focus")),38==a.keyCode&&0<k&&k--,40==a.keyCode&&k<f.length-1&&k++,~k||(k=0),f.eq(k).trigger("focus"))}}};
var f=d.fn.dropdown;d.fn.dropdown=function(b){return this.each(function(){var c=d(this),f=c.data("bs.dropdown");f||c.data("bs.dropdown",f=new a(this));"string"==typeof b&&f[b].call(c)})};d.fn.dropdown.Constructor=a;d.fn.dropdown.noConflict=function(){d.fn.dropdown=f;return this};d(document).on("click.bs.dropdown.data-api",h).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,a.prototype.toggle).on("keydown.bs.dropdown.data-api",c+', [role\x3d"menu"], [role\x3d"listbox"]',
a.prototype.keydown)}(h)});
window.mrbContextLoaded(function(h){+function(d){function h(c,a){return this.each(function(){var f=d(this),e=f.data("bs.modal"),g=d.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c);e||f.data("bs.modal",e=new b(this,g));if("string"==typeof c)e[c](a);else g.show&&e.show(a)})}var b=function(b,a){this.options=a;this.$body=d(document.body);this.$element=d(b);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},
this))};b.VERSION="3.1.1";b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};b.prototype.toggle=function(b){return this.isShown?this.hide():this.show(b)};b.prototype.show=function(b){var a=this,f=d.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(f);this.isShown||f.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss\x3d"modal"]',d.proxy(this.hide,this)),this.backdrop(function(){var e=
d.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(a.$body);a.$element.show().scrollTop(0);e&&a.$element[0].offsetWidth;a.$element.addClass("in").attr("aria-hidden",!1);a.enforceFocus();var f=d.Event("shown.bs.modal",{relatedTarget:b});e?a.$element.find(".modal-dialog").one(d.support.transition.end,function(){a.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(300):a.$element.trigger("focus").trigger(f)}))};b.prototype.hide=function(b){b&&b.preventDefault();
b=d.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),d(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),d.support.transition&&this.$element.hasClass("fade")?this.$element.one(d.support.transition.end,d.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};b.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",
d.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.trigger("focus")},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",d.proxy(function(b){27==b.which&&this.hide()},this));else this.isShown||this.$element.off("keyup.dismiss.bs.modal")};b.prototype.hideModal=function(){var b=this;this.$element.hide();this.backdrop(function(){b.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=
function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(b){var a=this,f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=d.support.transition&&f;this.$backdrop=d('\x3cdiv class\x3d"modal-backdrop '+f+'" /\x3e').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",d.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},
this));e&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");b&&(e?this.$backdrop.one(d.support.transition.end,b).emulateTransitionEnd(150):b())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),f=function(){a.removeBackdrop();b&&b()},d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(d.support.transition.end,f).emulateTransitionEnd(150):f()):b&&b()};b.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=
this.scrollbarWidth||this.measureScrollbar())};b.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",b+this.scrollbarWidth)};b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};b.prototype.measureScrollbar=function(){var b=document.createElement("div");b.className="modal-scrollbar-measure";this.$body.append(b);var a=b.offsetWidth-b.clientWidth;this.$body[0].removeChild(b);return a};var p=
d.fn.modal;d.fn.modal=h;d.fn.modal.Constructor=b;d.fn.modal.noConflict=function(){d.fn.modal=p;return this};d(document).on("click.bs.modal.data-api",'[data-toggle\x3d"modal"]',function(b){var a=d(this),f=a.attr("href"),e=d(a.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(f)&&f},e.data(),a.data());a.is("a")&&b.preventDefault();e.one("show.bs.modal",function(b){if(!b.isDefaultPrevented())e.one("hidden.bs.modal",function(){a.is(":visible")&&
a.trigger("focus")})});h.call(e,f,this)})}(h)});
window.mrbContextLoaded(function(h){!function(d){d.expr[":"].icontains=function(b,h,c){return 0<=d(b).text().toUpperCase().indexOf(c[3].toUpperCase())};var h=function(b,p,c){c&&(c.stopPropagation(),c.preventDefault());this.$element=d(b);this.$lis=this.$menu=this.$button=this.$newElement=null;this.options=d.extend({},d.fn.selectpicker.defaults,this.$element.data(),"object"==typeof p&&p);null===this.options.title&&(this.options.title=this.$element.attr("title"));this.val=h.prototype.val;this.render=
h.prototype.render;this.refresh=h.prototype.refresh;this.setStyle=h.prototype.setStyle;this.selectAll=h.prototype.selectAll;this.deselectAll=h.prototype.deselectAll;this.init()};h.prototype={constructor:h,init:function(){var b=this,h=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("\x3e .dropdown-menu");
this.$button=this.$newElement.find("\x3e button");this.$searchbox=this.$newElement.find("input");void 0!==h&&(this.$button.attr("data-id",h),d('label[for\x3d"'+h+'"]').click(function(c){c.preventDefault();b.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.liHeight();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this)},createDropdown:function(){var b=
this.multiple?" show-tick":"",h=this.$element.parent().hasClass("input-group")?" input-group-btn":"";return d('\x3cdiv class\x3d"btn-group bootstrap-select'+b+h+'"\x3e\x3cbutton type\x3d"button" class\x3d"btn dropdown-toggle selectpicker" data-toggle\x3d"dropdown"'+(this.autofocus?" autofocus":"")+'\x3e\x3cspan class\x3d"filter-option pull-left"\x3e\x3c/span\x3e\x26nbsp;\x3cspan class\x3d"icon icon-angle-down"\x3e\x3c/span\x3e\x3c/button\x3e\x3cdiv class\x3d"dropdown-menu open"\x3e'+(this.options.header?
'\x3cdiv class\x3d"popover-title"\x3e\x3cbutton type\x3d"button" class\x3d"close" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e'+this.options.header+"\x3c/div\x3e":"")+(this.options.liveSearch?'\x3cdiv class\x3d"bootstrap-select-searchbox"\x3e\x3cinput type\x3d"text" class\x3d"input-block-level form-control" autocomplete\x3d"off" /\x3e\x3c/div\x3e':"")+(this.options.actionsBox?'\x3cdiv class\x3d"bs-actionsbox"\x3e\x3cdiv class\x3d"btn-group btn-block"\x3e\x3cbutton class\x3d"actions-btn bs-select-all btn btn-sm btn-default"\x3eSelect All\x3c/button\x3e\x3cbutton class\x3d"actions-btn bs-deselect-all btn btn-sm btn-default"\x3eDeselect All\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e':
"")+'\x3cul class\x3d"dropdown-menu inner selectpicker" role\x3d"menu"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e')},createView:function(){var b=this.createDropdown(),d=this.createLi();b.find("ul").append(d);return b},reloadLi:function(){this.destroyLi();var b=this.createLi();this.$menu.find("ul").append(b)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var b=this,h=[],c="";this.$element.find("option").each(function(){var a=d(this),c=a.attr("class")||"",e=a.attr("style")||"",
g=a.data("content")?a.data("content"):a.html(),k=void 0!==a.data("subtext")?'\x3csmall class\x3d"muted text-muted"\x3e'+a.data("subtext")+"\x3c/small\x3e":"",l=void 0!==a.data("icon")?'\x3ci class\x3d"'+b.options.iconBase+" "+a.data("icon")+'"\x3e\x3c/i\x3e ':"";""!==l&&(a.is(":disabled")||a.parent().is(":disabled"))&&(l="\x3cspan\x3e"+l+"\x3c/span\x3e");a.data("content")||(g=l+'\x3cspan class\x3d"text"\x3e'+g+k+"\x3c/span\x3e");b.options.hideDisabled&&(a.is(":disabled")||a.parent().is(":disabled"))?
h.push('\x3ca style\x3d"min-height: 0; padding: 0"\x3e\x3c/a\x3e'):a.parent().is("optgroup")&&!0!==a.data("divider")?0===a.index()?(k=a.parent().attr("label"),l=void 0!==a.parent().data("subtext")?'\x3csmall class\x3d"muted text-muted"\x3e'+a.parent().data("subtext")+"\x3c/small\x3e":"",k=(a.parent().data("icon")?'\x3ci class\x3d"'+a.parent().data("icon")+'"\x3e\x3c/i\x3e ':"")+'\x3cspan class\x3d"text"\x3e'+k+l+"\x3c/span\x3e",0!==a[0].index?h.push('\x3cdiv class\x3d"div-contain"\x3e\x3cdiv class\x3d"divider"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdt\x3e'+
k+"\x3c/dt\x3e"+b.createA(g,"opt "+c,e)):h.push("\x3cdt\x3e"+k+"\x3c/dt\x3e"+b.createA(g,"opt "+c,e))):h.push(b.createA(g,"opt "+c,e)):!0===a.data("divider")?h.push('\x3cdiv class\x3d"div-contain"\x3e\x3cdiv class\x3d"divider"\x3e\x3c/div\x3e\x3c/div\x3e'):!0===d(this).data("hidden")?h.push("\x3ca\x3e\x3c/a\x3e"):h.push(b.createA(g,c,e))});d.each(h,function(a,b){c+='\x3cli rel\x3d"'+a+'"'+("\x3ca\x3e\x3c/a\x3e"===b?'class\x3d"hide is-hidden"':"")+"\x3e"+b+"\x3c/li\x3e"});this.multiple||0!==this.$element.find("option:selected").length||
this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected");return d(c)},createA:function(b,d,c){return'\x3ca tabindex\x3d"0" class\x3d"'+d+'" style\x3d"'+c+'"\x3e'+b+'\x3ci class\x3d"'+this.options.iconBase+" "+this.options.tickIcon+' icon-ok check-mark"\x3e\x3c/i\x3e\x3c/a\x3e'},render:function(b){var h=this;!1!==b&&this.$element.find("option").each(function(a){h.setDisabled(a,d(this).is(":disabled")||d(this).parent().is(":disabled"));h.setSelected(a,d(this).is(":selected"))});
this.tabIndex();b=this.$element.find("option:selected").map(function(){var a=d(this),b=a.data("icon")&&h.options.showIcon?'\x3ci class\x3d"'+h.options.iconBase+" "+a.data("icon")+'"\x3e\x3c/i\x3e ':"",c;c=h.options.showSubtext&&a.attr("data-subtext")&&!h.multiple?' \x3csmall class\x3d"muted text-muted"\x3e'+a.data("subtext")+"\x3c/small\x3e":"";return a.data("content")&&h.options.showContent?a.data("content"):void 0!==a.attr("title")?a.attr("title"):b+a.html()+c}).toArray();var c=this.multiple?b.join(this.options.multipleSeparator):
b[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var a=this.options.selectedTextFormat.split("\x3e"),f=this.options.hideDisabled?":not([disabled])":"";if(1<a.length&&b.length>a[1]||1==a.length&&2<=b.length)c=this.options.countSelectedText.replace("{0}",b.length).replace("{1}",this.$element.find('option:not([data-divider\x3d"true"]):not([data-hidden\x3d"true"])'+f).length)}this.options.title=this.$element.attr("title");c||(c=void 0!==this.options.title?this.options.title:
this.options.noneSelectedText);this.$button.attr("title",d.trim(c));this.$newElement.find(".filter-option").html(c)},setStyle:function(b,d){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var c=b?b:this.options.style;"add"==d?this.$button.addClass(c):"remove"==d?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(){if(!1!==this.options.size){var b=
this.$menu.parent().clone().find("\x3e .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),d=b.addClass("open").find("\x3e .dropdown-menu"),c=d.find("li \x3e a").outerHeight(),a=this.options.header?d.find(".popover-title").outerHeight():0,f=this.options.liveSearch?d.find(".bootstrap-select-searchbox").outerHeight():0,d=this.options.actionsBox?d.find(".bs-actionsbox").outerHeight():0;b.remove();this.$newElement.data("liHeight",c).data("headerHeight",a).data("searchHeight",f).data("actionsHeight",
d)}},setSize:function(){var b=this,h=this.$menu,c=h.find(".inner"),a=this.$newElement.outerHeight(),f=this.$newElement.data("liHeight"),e=this.$newElement.data("headerHeight"),g=this.$newElement.data("searchHeight"),k=this.$newElement.data("actionsHeight"),l=h.find("li .divider").outerHeight(!0),m=parseInt(h.css("padding-top"))+parseInt(h.css("padding-bottom"))+parseInt(h.css("border-top-width"))+parseInt(h.css("border-bottom-width")),n=this.options.hideDisabled?":not(.disabled)":"",r=d(window),q=
m+parseInt(h.css("margin-top"))+parseInt(h.css("margin-bottom"))+2,u,t,x,y=function(){t=b.$newElement.offset().top-r.scrollTop();x=r.height()-t-a};y();this.options.header&&h.css("padding-top",0);"auto"==this.options.size?(l=function(){var a;a=b.$lis.not(".hide");y();u=x-q;b.options.dropupAuto&&b.$newElement.toggleClass("dropup",t>x&&u-q<h.height());b.$newElement.hasClass("dropup")&&(u=t-q);a=3<a.length+a.find("dt").length?3*f+q-2:0;h.css({"max-height":u+"px",overflow:"hidden","min-height":a+e+g+k+
"px"});c.css({"max-height":u-e-g-k-m+"px","overflow-y":"auto","min-height":Math.max(a-m,0)+"px"})},l(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",l),d(window).off("resize.getSize").on("resize.getSize",l),d(window).off("scroll.getSize").on("scroll.getSize",l)):this.options.size&&"auto"!=this.options.size&&h.find("li"+n).length>this.options.size&&(n=h.find("li"+n+" \x3e *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),
n=h.find("li").slice(0,n+1).find(".div-contain").length,u=f*this.options.size+n*l+m,b.options.dropupAuto&&this.$newElement.toggleClass("dropup",t>x&&u<h.height()),h.css({"max-height":u+e+g+k+"px",overflow:"hidden"}),c.css({"max-height":u-m+"px","overflow-y":"auto"}))},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var b=this.$newElement.clone().appendTo("body"),d=b.find("\x3e .dropdown-menu").css("width"),c=b.css("width","auto").find("\x3e button").css("width");
b.remove();this.$newElement.css("width",Math.max(parseInt(d),parseInt(c))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var b=
this,h=d("\x3cdiv /\x3e"),c,a,f=function(b){h.addClass(b.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",b.hasClass("dropup"));c=b.offset();a=b.hasClass("dropup")?0:b[0].offsetHeight;h.css({top:c.top+a,left:c.left,width:b[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){b.isDisabled()||(f(d(this)),h.appendTo(b.options.container),h.toggleClass("open",!d(this).hasClass("open")),h.append(b.$menu))});d(window).resize(function(){f(b.$newElement)});d(window).on("scroll",
function(){f(b.$newElement)});d("html").on("click",function(a){1>d(a.target).closest(b.$newElement).length&&h.removeClass("open")})},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},setSelected:function(b,
h){null==this.$lis&&(this.$lis=this.$menu.find("li"));d(this.$lis[b]).toggleClass("selected",h)},setDisabled:function(b,h){null==this.$lis&&(this.$lis=this.$menu.find("li"));h?d(this.$lis[b]).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):d(this.$lis[b]).removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var b=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",
-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex")));this.$button.click(function(){return!b.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var b=this;d("body").on("touchstart.dropdown",".dropdown-menu",
function(b){b.stopPropagation()});this.$newElement.on("click",function(){b.setSize();b.options.liveSearch||b.multiple||setTimeout(function(){b.$menu.find(".selected a").focus()},10)});this.$menu.on("click","li a",function(h){var c=d(this).parent().index(),a=b.$element.val(),f=b.$element.prop("selectedIndex");b.multiple&&h.stopPropagation();h.preventDefault();if(!b.isDisabled()&&!d(this).parent().hasClass("disabled")){var e=b.$element.find("option");h=e.eq(c);var g=h.prop("selected"),k=h.parent("optgroup"),
l=b.options.maxOptions,m=k.data("maxOptions")||!1;if(b.multiple){if(h.prop("selected",!g),b.setSelected(c,!g),!1!==l||!1!==m){var e=l<e.filter(":selected").length,k=m<k.find("option:selected").length,g=b.options.maxOptionsText,n=g[0].replace("{n}",l),r=g[1].replace("{n}",m),q=d('\x3cdiv class\x3d"notify"\x3e\x3c/div\x3e');if(l&&e||m&&k)g[2]&&(n=n.replace("{var}",g[2][1<l?0:1]),r=r.replace("{var}",g[2][1<m?0:1])),h.prop("selected",!1),b.$menu.append(q),l&&e&&(q.append(d("\x3cdiv\x3e"+n+"\x3c/div\x3e")),
b.$element.trigger("maxReached.bs.select")),m&&k&&(q.append(d("\x3cdiv\x3e"+r+"\x3c/div\x3e")),b.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){b.setSelected(c,!1)},10),q.delay(750).fadeOut(300,function(){d(this).remove()})}}else e.prop("selected",!1),h.prop("selected",!0),b.$menu.find(".selected").removeClass("selected"),b.setSelected(c,!0);b.multiple?b.options.liveSearch&&b.$searchbox.focus():b.$button.focus();(a!=b.$element.val()&&b.multiple||f!=b.$element.prop("selectedIndex")&&
!b.multiple)&&b.$element.change()}});this.$menu.on("click","li.disabled a, li dt, li .div-contain, .popover-title, .popover-title :not(.close)",function(d){d.target==this&&(d.preventDefault(),d.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus())});this.$menu.on("click",".popover-title .close",function(){b.$button.focus()});this.$searchbox.on("click",function(b){b.stopPropagation()});this.$menu.on("click",".actions-btn",function(h){b.options.liveSearch?b.$searchbox.focus():
b.$button.focus();h.preventDefault();h.stopPropagation();d(this).is(".bs-select-all")?b.selectAll():b.deselectAll();b.$element.change()});this.$element.change(function(){b.render(!1)})},liveSearchListener:function(){var b=this,h=d('\x3cli class\x3d"no-results"\x3e\x3c/li\x3e');this.$newElement.on("click.dropdown.data-api",function(){b.$menu.find(".active").removeClass("active");b.$searchbox.val()&&(b.$searchbox.val(""),b.$lis.not(".is-hidden").removeClass("hide"),h.parent().length&&h.remove());b.multiple||
b.$menu.find(".selected").addClass("active");setTimeout(function(){b.$searchbox.focus()},10)});this.$searchbox.on("input propertychange",function(){b.$searchbox.val()?(b.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+b.$searchbox.val()+")").parent().addClass("hide"),b.$menu.find("li").filter(":visible:not(.no-results)").length?h.parent().length&&h.remove():(h.parent().length&&h.remove(),h.html(b.options.noneResultsText+' "'+b.$searchbox.val()+'"').show(),b.$menu.find("li").last().after(h))):
(b.$lis.not(".is-hidden").removeClass("hide"),h.parent().length&&h.remove());b.$menu.find("li.active").removeClass("active");b.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();d(this).focus()});this.$menu.on("mouseenter","a",function(c){b.$menu.find(".active").removeClass("active");d(c.currentTarget).parent().not(".disabled").addClass("active")});this.$menu.on("mouseleave","a",function(){b.$menu.find(".active").removeClass("active")})},val:function(b){return void 0!==
b?(this.$element.val(b),this.$element.change(),this.$element):this.$element.val()},selectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li"));this.$element.find("option:enabled").prop("selected",!0);d(this.$lis).filter(":not(.disabled)").addClass("selected");this.render(!1)},deselectAll:function(){null==this.$lis&&(this.$lis=this.$menu.find("li"));this.$element.find("option:enabled").prop("selected",!1);d(this.$lis).filter(":not(.disabled)").removeClass("selected");this.render(!1)},keydown:function(b){var h,
c,a,f,e,g,k,l,m,n,r,q={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};h=d(this);a=h.parent();h.is("input")&&(a=h.parent().parent());m=a.data("this");m.options.liveSearch&&(a=h.parent().parent());m.options.container&&
(a=m.$menu);c=d("[role\x3dmenu] li:not(.divider) a",a);r=m.$menu.parent().hasClass("open");!r&&/([0-9]|[A-z])/.test(String.fromCharCode(b.keyCode))&&(m.options.container?m.$newElement.trigger("click"):(m.setSize(),m.$menu.parent().addClass("open"),r=m.$menu.parent().hasClass("open")),m.$searchbox.focus());m.options.liveSearch&&(/(^9$|27)/.test(b.keyCode)&&r&&0===m.$menu.find(".active").length&&(b.preventDefault(),m.$menu.parent().removeClass("open"),m.$button.focus()),c=d("[role\x3dmenu] li:not(.divider):visible",
a),h.val()||/(38|40)/.test(b.keyCode)||0===c.filter(".active").length&&(c=m.$newElement.find("li").filter(":icontains("+q[b.keyCode]+")")));if(c.length){if(/(38|40)/.test(b.keyCode))a=c.index(c.filter(":focus")),e=c.parent(":not(.disabled):visible").first().index(),g=c.parent(":not(.disabled):visible").last().index(),f=c.eq(a).parent().nextAll(":not(.disabled):visible").eq(0).index(),k=c.eq(a).parent().prevAll(":not(.disabled):visible").eq(0).index(),l=c.eq(f).parent().prevAll(":not(.disabled):visible").eq(0).index(),
m.options.liveSearch&&(c.each(function(a){d(this).is(":not(.disabled)")&&d(this).data("index",a)}),a=c.index(c.filter(".active")),e=c.filter(":not(.disabled):visible").first().data("index"),g=c.filter(":not(.disabled):visible").last().data("index"),f=c.eq(a).nextAll(":not(.disabled):visible").eq(0).data("index"),k=c.eq(a).prevAll(":not(.disabled):visible").eq(0).data("index"),l=c.eq(f).prevAll(":not(.disabled):visible").eq(0).data("index")),n=h.data("prevIndex"),38==b.keyCode&&(m.options.liveSearch&&
(a-=1),a!=l&&a>k&&(a=k),a<e&&(a=e),a==n&&(a=g)),40==b.keyCode&&(m.options.liveSearch&&(a+=1),-1==a&&(a=0),a!=l&&a<f&&(a=f),a>g&&(a=g),a==n&&(a=e)),h.data("prevIndex",a),m.options.liveSearch?(b.preventDefault(),h.is(".dropdown-toggle")||(c.removeClass("active"),c.eq(a).addClass("active").find("a").focus(),h.focus())):c.eq(a).focus();else if(!h.is("input")){var u=[];c.each(function(){d(this).parent().is(":not(.disabled)")&&d.trim(d(this).text().toLowerCase()).substring(0,1)==q[b.keyCode]&&u.push(d(this).parent().index())});
a=d(document).data("keycount");a++;d(document).data("keycount",a);d.trim(d(":focus").text().toLowerCase()).substring(0,1)!=q[b.keyCode]?(a=1,d(document).data("keycount",a)):a>=u.length&&(d(document).data("keycount",0),a>u.length&&(a=1));c.eq(u[a-1]).focus()}/(13|32|^9$)/.test(b.keyCode)&&r&&(/(32)/.test(b.keyCode)||b.preventDefault(),m.options.liveSearch?/(32)/.test(b.keyCode)||(m.$menu.find(".active a").click(),h.focus()):d(":focus").click(),d(document).data("keycount",0));if(/(^9$|27)/.test(b.keyCode)&&
r&&(m.multiple||m.options.liveSearch)||/(27)/.test(b.keyCode)&&!r)m.$menu.parent().removeClass("open"),m.$button.focus()}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove();this.$element.remove()}};d.fn.selectpicker=function(b,p){var c=arguments,a,f=this.each(function(){if(d(this).is("select")){var e=d(this),f=e.data("selectpicker"),k="object"==typeof b&&b;if(!f)e.data("selectpicker",f=new h(this,k,p));else if(k)for(var l in k)f.options[l]=
k[l];"string"==typeof b&&(e=b,f[e]instanceof Function?([].shift.apply(c),a=f[e].apply(f,c)):a=f.options[e])}});return void 0!==a?a:f};d.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:"{0} of {1} selected",maxOptionsText:["Limit reached ({n} {var} max)","Group limit reached ({n} {var} max)",["items","item"]],width:!1,container:!1,hideDisabled:!1,showSubtext:!1,
showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,multipleSeparator:", ",iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1};d(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle\x3ddropdown], .bootstrap-select [role\x3dmenu], .bootstrap-select-searchbox input",h.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle\x3ddropdown], .bootstrap-select [role\x3dmenu], .bootstrap-select-searchbox input",function(b){b.stopPropagation()})}(h)});
"undefined"===typeof window.SNI&&(window.SNI={});
window.mrbContextLoaded(function(h){h.extend(!0,SNI,{MRB:{Config:{SocialUploader:{pickOptions:{multiple:!1}}}}});window.SNI=window.SNI||{};window.SNI.SocialUploader=window.SNI.SocialUploader||{};window.SNI.SocialUploader.jQuery=window.SNI.SocialUploader.jQuery||h;(function(){var d=function(){if("undefined"!==typeof console)try{console.log.apply(null,arguments)}catch(b){console.log(arguments)}},n=null;h.extend(!0,window.SNI.MRB,{uploader:function(b){n=arguments}});"undefined"===typeof window.BOX_SIMPLE_UPLOADER_URL?
SNI.MRB.DEBUG("Cannot instantiate Simple Uploader without window.BOX_SIMPLE_UPLOADER_URL"):$LAB.script(window.BOX_SIMPLE_UPLOADER_URL).wait(function(){window.socialUploaderContextLoaded(function(){h.extend(!0,window.SNI.MRB,{uploader:function(b,n,c,a){var f=new h.Deferred;b=h(b);var e=SNI.MRB.Config.SocialUploader.pickOptions||{},g=SNI.MRB.Config.SocialUploader.storeOptions||{},k={app_key:SNI_COMMUNITY_ECHO_APP.APP_KEY_CONFIG};0<b.size()&&("undefined"!==typeof b.data("suPickOptions")&&h.extend(!0,
e,b.data("suPickOptions")),"undefined"!==typeof b.data("suStoreOptions")&&h.extend(!0,g,b.data("suStoreOptions")),"undefined"!==typeof b.data("suAssetMetaData")&&h.extend(!0,k,b.data("suAssetMetaData")));"object"===typeof n&&h.extend(!0,e,n);"object"===typeof c&&h.extend(!0,g,c);"object"===typeof a&&h.extend(!0,k,a);CP_SERVICE_FILE_UPLOAD.uploadFile(function(a){f.resolve(a,e,g,k)},function(){d("Social Upload ERROR callback triggered!");f.fail()},k,e,g);return f}});null!==n&&window.SNI.MRB.uploader.apply(null,
n)})})})();h.extend(!0,window.SNI,{MRB:{Util:{refreshAd:function(d,n,b){"function"===typeof setMrbDartEnterpriseBanner&&"function"===typeof getMrbDartEnterpriseUrl&&h(d).each(function(d,c){var a=h(this),f=a.data("adManagerParams"),e={},g;if(void 0!==f&&null!==f)for(g in f)f.hasOwnProperty(g)&&(e[g]=adManager.getParameter(g),window.adManager.setParameter(g,f[g]));var k=getMrbDartEnterpriseUrl(n,b);if(-1!==k.indexOf("ORD\x3d"))var l=k.substring(0,k.indexOf("ORD\x3d")),k=k.substring(k.indexOf("ORD\x3d"),
k.length),k=k.substring(k.indexOf("\x26")+1,k.length),k=l+k;k+="\x26ord\x3d"+Math.floor(1E5*Math.random());setMrbDartEnterpriseBanner(n,k,null,b,a[0]);if(void 0!==f&&null!==f)for(g in e)e.hasOwnProperty(g)&&window.adManager.setParameter(g,e[g])})},refreshMobileInterstitialAd:function(){var d=h(".mrb-mobile-interstitial-overlay"),n=d.find(".mrb-overlay-ad-container");if(0===d.size()){var d=h("\x3cdiv /\x3e",{"class":"mrb-mobile-interstitial-overlay"}),n=h("\x3cdiv /\x3e",{"class":"mrb-overlay-ad-container"}),
b=h("\x3ca /\x3e",{"class":"mrb-close",click:function(){d.removeClass("mrb-active")}});b.addClass("ss-record");b.append('\x3cspan class\x3d"ss-delete"\x3e\x3c/span\x3e');d.append(b);d.append(n);h("body").append(d);window.addEventListener("orientationchange",function(){d.hasClass("mrb-active")&&(n.css({width:window.innerWidth+"px",height:window.innerHeight+"px"}),window.SNI.MRB.Util.refreshAd(n,"MOBILE_INTERSTITIAL",1))},!1)}d.addClass("mrb-active");n.css({width:window.innerWidth+"px",height:window.innerHeight+
"px"});window.SNI.MRB.Util.refreshAd(n,"MOBILE_INTERSTITIAL",1)},trackOmniture:function(d){SNI.MRB.DEBUG("trackOmniture called with data: ",d);if("undefined"===typeof d||null===d||""===d)d={};if("object"!==typeof d)throw Error("Illegal argument.");var h=mdManager.getParameterString("UniqueId"),b=h.split("-");if(3>b)throw Error('"'+h+'" is not a valid UniqueId.');"undefined"!==typeof d.assetId&&(b[3]=d.assetId);"undefined"!==typeof d.contentType&&(b[2]=d.contentType);"undefined"!==typeof d.mainAssetId&&
(b[1]=d.mainAssetId);mdManager.setParameter("UniqueId",b.join("-"));"undefined"!==typeof d.assetUrl&&(mdManager.setParameter("oUrl",mdManager.getParameterString("Url")),mdManager.setParameter("Url",d.assetUrl));if("object"!==typeof s||"function"!==typeof s.t)throw Error("Omniture tracking object ('s') is not defined");s.t();mdManager.setParameter("UniqueId",h)},alert:function(d){d=h.extend({},{message_html:"Unspecified message",message_type:"success",message_target:"mrb-primary-feedback",action_type:"",
action_text:"",action_url:"",action_target:"",action_button_class:"",action_click_function:"",data_action:"",icon_class:"mrb-success-icon",notification_display_class:"mrb-notification-display"},d);!0===SNI.MRB.Util.isMobile()&&(SNI.MRB.DEBUG("Use mobile notifications"),d.message_target="mrb-mobile-notification");var n="";""!=d.action_type&&(""!==d.action_url?n="\x3ca href\x3d'"+d.action_url+"' target\x3d'"+d.action_target+"' class\x3d'action "+d.action_type+"'\x3e"+d.action_text+"\x3c/a\x3e":""!==
d.action_click_function?n="\x3ca href\x3d'javascript:;' target\x3d'"+d.action_target+"' onclick\x3d'"+d.action_click_function+"' class\x3d'action "+d.action_type+"'\x3e"+d.action_text+"\x3c/a\x3e":SNI.MRB.DEBUG("An action was added to an alert without an URL or Function"));""!=d.data_action&&(n="\x3ca class\x3d'action undo recover-folder-item'\x3e"+d.action_text+"\x3c/a\x3e");if("mrb-primary-feedback"===d.message_target){var b=h("#mrb-primary-feedback");1>b.length?h(".mrb-page-alert-container").append("\x3cdiv id\x3d'mrb-primary-feedback' class\x3d'"+
d.message_type+"'\x3e\x3cspan class\x3d'ss-check'\x3e\x3c/span\x3e\x3cspan class\x3d'message'\x3e"+d.message_html+"\x3c/span\x3e"+n+"\x3c/div\x3e").show():b.removeClass().addClass(d.message_type).html("\x3cspan class\x3d'ss-check'\x3e\x3c/span\x3e\x3cspan class\x3d'message'\x3e"+d.message_html+"\x3c/span\x3e"+n).show()}else if("mrb-mobile-notification"===d.message_target){if(b=h("."+d.message_target),SNI.MRB.DEBUG("triggering mobile notification..."),1<=b.length){SNI.MRB.DEBUG("found notification container, building notification html....");
var p=d.notification_display_class;b.removeClass(p);b.removeClass("mrb-loading-display");b.empty();var c=h("\x3cdiv /\x3e",{class:"mrb-mobile-notification-top"}),a=h("\x3ci /\x3e",{class:d.icon_class});d=h("\x3cspan /\x3e").html(d.message_html);b.append(c);b.append(n);c.append(a).append(d);b.addClass(p)}}else SNI.MRB.DEBUG("alert",d),h(d.message_target).empty().append("\x3cdiv class\x3d'"+d.message_type+"'\x3e\x3cspan class\x3d'ss-check'\x3e\x3c/span\x3e\x3cspan class\x3d'message'\x3e"+d.message_html+
"\x3c/span\x3e"+n+"\x3c/div\x3e").show();h(document).on("click scroll",function(a){window.SNI.MRB.Util.close_alert("#mrb-primary-feedback")})},test_alert:function(){window.SNI.MRB.Util.alert({message_html:"Unspecified message Unspecified message Unspecified message Unspecified message",message_type:"success",message_target:"mrb-primary-feedback",action_type:"undo",action_text:"undo",action_url:"#test-alert-action-url",action_target:"",action_click_function:"",data_action:""})},createCookie:function(d){window.location&&
h.cookie("mrb-message-alert",JSON.stringify(d),{expires:1,path:"/",domain:SNI.MRB.Util.getDomain(window.location)})},destroyCookie:function(){window.location&&h.removeCookie("mrb-message-alert",{path:"/",domain:SNI.MRB.Util.getDomain(window.location)});h.removeCookie("mrb-message-alert")},displayCookieMessage:function(){var d=h.cookie("mrb-message-alert");"string"===typeof d&&0<d.length&&(d=JSON.parse(h.cookie("mrb-message-alert")))&&(window.SNI.MRB.Util.alert(d),window.SNI.MRB.Util.destroyCookie(d))},
close_alert:function(d){h(d).hide()},frameValidate:function(d,n){var b=!0;d.find('[data-required\x3d"true"]').each(function(){var d=h(this);d.val()||(d.parent().addClass("has-error"),b=!1)});b||(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault())},checkUserAgent:function(d){return!0===RegExp(d).test(navigator.userAgent)},isIpad:function(){return SNI.MRB.Util.checkUserAgent("iPad")},isIphone:function(){return SNI.MRB.Util.checkUserAgent("iPhone")},isIOSMobile:function(){return SNI.MRB.Util.isIphone()},
isIOS:function(){return SNI.MRB.Util.isIOSMobile()||SNI.MRB.Util.isIpad()},isAndroid:function(){return SNI.MRB.Util.checkUserAgent("Android")},isAndroidPhone:function(){return SNI.MRB.Util.isAndroid()&&-1!==navigator.userAgent.toLowerCase().indexOf("mobile")},isAndroidTablet:function(){return window.SNI.MRB.Util.isTouch()&&SNI.MRB.Util.isAndroid()&&!0===!/Mobile/i.test(navigator.userAgent)},isMsieMobile:function(){return SNI.MRB.Util.checkUserAgent("IEMobile/")},isMobile:function(){return SNI.MRB.Util.isIOSMobile()||
SNI.MRB.Util.isAndroidPhone()||SNI.MRB.Util.isMsieMobile()},isTouch:function(){return"ontouchstart"in window||!!navigator.msMaxTouchPoints},isTablet:function(){return!0===SNI.MRB.Util.isTouch()&&(SNI.MRB.Util.isAndroid()||SNI.MRB.Util.isIOS())&&!SNI.MRB.Util.isMobile()},isPortraitOrientation:function(){return window.outerWidth<window.outerHeight},isLandscapeOrientation:function(){return window.outerWidth>window.outerHeight}}}})});
window.mrbContextLoaded(function(h){var d=SNI.BOX.DEBUG.forScope("SAVE_BUTTON_MODULE","PHOTO_BOX_MODULES"),n=SNI.MRB.plugin({},function(a,b){var c=h(this);d("calling unauth module init function");a.dfd().then(function(){});a.persist=function(){a.dfd().then(function(){c.closest("[data-box-id]").addClass("box-state-note-display").addClass(b.persistenceClass)})};a.unPersist=function(){!0===a.allowUnPersist()&&a.dfd().then(function(){c.closest("[data-box-id]").removeClass("box-state-note-display").removeClass(b.persistenceClass)})};
a.allowUnPersist=function(){return!0}});n.addRenderer(function(a,b,c,g){var k=h(this);k.find(".box-default-html").remove();var l=k.find("."+c.saveButtonClass);0===l.size()&&(l=h("\x3cdiv /\x3e",{"class":c.saveButtonClass+" box-action"}),k.append(l));var m=l.find(".box-action-sleeve");0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":"box-action-sleeve"}),l.append(m));d("calling auth module renderer",arguments);var n=l.find(".box-action-icon.box-action-quick-save."+c.activeClass);0===n.size()&&(n=h("\x3ca /\x3e",
{"class":c.activeClass+" box-action-icon box-action-quick-save",href:c.boxHost}),m.append(n));l=l.find(".box-action-icon.box-action-quick-save").not("."+c.activeClass);0===l.size()&&(l=h("\x3ca /\x3e",{"class":"box-action-icon box-action-quick-save",click:function(){c.authPlugin.openAimModal({triggeredAssetId:c.assetId});return!1}}),m.append(l));!0===c.showCollectionSaveButton&&(m=k.find("."+c.collectionSaveButtonClass),0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":c.collectionSaveButtonClass+" box-action"}),
k.append(m)),k=m.find(".box-action-sleeve"),0===k.size()&&(k=h("\x3cdiv /\x3e",{"class":"box-action-sleeve"}),m.append(k)),l=m.find(".box-action-icon."+c.activeClass),0===l.size()&&(l=h("\x3cdiv /\x3e",{"class":c.activeClass+" box-action-icon"}),k.append(l)),m=m.find(".box-action-icon").not("."+c.activeClass),0===m.size()&&(m=h("\x3ca /\x3e",{"class":"box-action-icon",click:function(){c.authPlugin.openAimModal({invokeMethod:"triggerAddToCollectionPopup",triggeredAssetId:c.assetId});return!1}}),k.append(m)))});
var b=SNI.MRB.plugin({showCollectionSaveButton:!0,showNoteButton:!1},function(a,b){var e=null,g=null,k=h(this),l=null;k.addClass("dari-frame");k.attr("data-refresh-href",b.url);a.dfd().then(function(){!0===SNI.MRB.Util.isTablet()&&a.persist()});a.setData=function(a){e=a};a.getDataDfd=function(){return a.dfd().pipe(function(){return e})};a.persist=function(){a.dfd().then(function(){k.closest("[data-box-id]").addClass("box-state-note-display").addClass(b.persistenceClass)})};a.unPersist=function(){a.dfd().then(function(){!0===
a.allowUnPersist()&&k.closest("[data-box-id]").removeClass("box-state-note-display").removeClass(b.persistenceClass)})};a.allowUnPersist=function(){return!0};a.getSaveButton=function(){return k.find("."+b.saveButtonClass)};a.getFolderList=function(){return a.getSaveButton().find("."+b.folderListClass)};a.getCollectionSaveButton=function(){return k.find("."+b.collectionSaveButtonClass)};a.getNotification=function(){return k.find("."+b.notificationClass)};a.activateSaveButton=function(){var c=a.getSaveButton();
0<c.size()&&!c.hasClass(b.selectedClass)&&setTimeout(function(){c.addClass(b.selectedClass)},50)};a.activateCollectionSaveButton=function(){null!==g&&(clearTimeout(g),g=null);a.getCollectionSaveButton().addClass(b.selectedClass)};a.deactivateCollectionSaveButton=function(c,e){if(a.getCollectionSaveButton().hasClass(b.selectedClass)){if(null!==g)if(e)d("aborting deactivation of collection save button!"),clearTimeout(g),g=null;else return;d("deactivating collection save button in "+c+" ms");g=setTimeout(function(){d("deactivated collection save button");
a.getCollectionSaveButton().filter("."+b.selectedClass).removeClass(b.selectedClass);g=null},c)}};a.triggerSave=function(){a.getDataDfd().then(function(c){"object"!==typeof c?d("ERROR [mrb-module-save-button.js]: Could not save, no data available!"):(!0===c.isSaved&&d("INFO [mrb-module-save-button.js]: Asset is already saved!"),a.getSaveButton().find(".box-action-icon.box-action-quick-save").not(b.activeClass).click())})};a.triggerAddToCollectionPopup=function(){a.getDataDfd().then(function(c){"object"!==
typeof c?d("ERROR [mrb-module-save-button.js]: Could not trigger addToCollectionPopup, no data available!"):a.getCollectionSaveButton().find(".box-action-icon").not(b.activeClass).click()})};a.notifySave=function(c,d,e){c=b.confirmationPrefix+" ";var g;setTimeout(function(){k.find("."+b.saveButtonClass).addClass(b.selectedClass)},b.saveButtonActivationDelay);!1===a.options().showNotifications||SNI.MRB.Util.isMobile()||(a.persist(),g=a.getNotification(),0===g.size()&&(g=h("\x3cdiv /\x3e",{"class":b.notificationClass+
" box-hud box-hud-text"})),g.addClass(b.selectedClass).empty(),g.text(c),e=e?e:SNI.MRB.Util.getByPath(b,"defaultFolderLink/href"),d=d?d:SNI.MRB.Util.getByPath(b,"defaultFolderLink/text"),c=SNI.MRB.Util.getByPath(b,"defaultFolderLink/target"),null===c&&(c="_top"),d=h("\x3ca /\x3e",{href:e,target:c,text:d}),g.append(d),k.append(g),a.deactivateCollectionSaveButton(b.collectionButtonDeactivationDelay,!0),a.showTutorial(),setTimeout(function(){g.removeClass(b.selectedClass)},b.notificationTimeout),l=setTimeout(function(){a.unPersist()},
Math.max(b.saveButtonActivationDelay,b.notificationTimeout)))};a.showTutorial=function(){var a=b.tutorialModule._ref;a&&0===h('[data-box-id\x3d"'+a+'"]').size()&&SNI.BOX.loadModule(a)};a.showFolderList=function(){var b=a.getFolderList();!1===b.hasClass("box-show")&&b.addClass("box-show")};a.hideFolderList=function(){var b=a.getFolderList();b.hasClass("box-show")&&b.removeClass("box-show")};a.updateFolderList=function(a,c,d,e){if(a&&c&&d){var g=k.find("."+b.folderListClass),l=g.find("."+b.folderListItemClass+
'[itemid\x3d"'+a+'"]');if(0===l.size())if(l=h("\x3cdiv /\x3e",{"class":b.folderListItemClass,itemid:a}),a=h("\x3ca /\x3e",{href:d,text:c,target:"_top"}),l.append(a),d=g.find("."+b.folderListItemClass),0===d.size())g.append(l);else for(a=0;a<d.size();a+=1)if(a===d.size()-1)g.append(l);else if(0===a)c<d.eq(0).find("a").text()&&g.prepend(l);else if(c>=d.eq(a-1).find("a").text()&&c<=d.eq(a).find("a").text()){l.insertAfter(d.eq(a-1));break}!0===e&&(g.removeClass(b.disabledClass),l.addClass("box-show"))}};
a.getNoteOverlay=function(){return k.find("."+b.noteOverlayClass)};a.getShowNoteButton=function(){return k.find("."+b.showNoteButtonClass)};a.getAddNoteButton=function(){return k.find("."+b.addNoteButtonClass)};a.updateNoteDisplay=function(c){var d=c||"",e=a.getNoteOverlay();0<e.size()&&(e=e.find("."+b.noteDisplayClass),0<e.size()&&e.text(c),c=a.getAddNoteButton(),e=a.getShowNoteButton(),0<d.length?(!1===c.hasClass(b.disabledClass)&&(c.addClass(b.disabledClass),a.showNote()),!1===e.hasClass(b.disabledClass)&&
e.addClass(b.disabledClass)):(!1===e.hasClass(b.disabledClass)&&e.addClass(b.disabledClass),c.hasClass(b.disabledClass)&&c.removeClass(b.disabledClass),a.hideNote()))};a.showNote=function(){var c=a.getShowNoteButton(),d=a.getNoteOverlay(),e=a.getAddNoteButton();0<d.size()&&(0===e.size()||!0===e.hasClass(b.disabledClass))&&(a.persist(),c.addClass(b.disabledClass),d.removeClass(b.disabledClass));return!0};a.hideNote=function(){var c=a.getShowNoteButton(),d=a.getNoteOverlay(),e=a.getAddNoteButton();
if(0<d.size())if(0===e.size()||!0===e.hasClass(b.disabledClass))a.unPersist(),c.removeClass(b.disabledClass),d.addClass(b.disabledClass);else if(0===c.size()||!0===c.hasClass(b.disabledClass))a.unPersist(),e.removeClass(b.disabledClass),d.addClass(b.disabledClass);return!0};k.on("hover","."+b.saveButtonClass+", ."+b.folderListClass,function(c){var d=h(this);"mouseenter"===c.type?d.hasClass(b.superActionActiveClass)||(a.showFolderList(),a.persist(),null!==l&&(window.clearTimeout(l),l=null)):"mouseleave"===
c.type&&(null!==l&&(window.clearTimeout(l),l=null),l=setTimeout(function(){a.hideFolderList();a.unPersist();l=null},b.hoverIntentDelay))}).on("hover","."+b.collectionSaveButtonClass+", ."+b.editNoteButtonClass+", ."+b.notificationClass,function(c){"mouseenter"===c.type?(null!==l&&(window.clearTimeout(l),l=null),l=setTimeout(function(){a.hideFolderList();l=null},b.hoverIntentDelay),a.persist()):"mouseleave"===c.type&&(null!==l&&(window.clearTimeout(l),l=null),l=setTimeout(function(){a.hideFolderList();
a.unPersist();l=null},b.hoverIntentDelay))});h("body").on("hide.bs.modal",b.modalSelector,function(){a.deactivateCollectionSaveButton(b.collectionButtonCancelDeactivationDelay)}).on("savedAsset",function(e,g){d("entering handler for [savedAsset]");var h=!1,l;if(g.asset.id===b.assetId)h=!0;else if(Array.isArray(g.asset.externalId))for(l=0;l<g.asset.externalId.length;l+=1){var n=g.asset.externalId[l];if(n.substr(n.indexOf("/")+1)===b.assetId){h=!0;break}}l=g.folder;"object"===typeof l?(a.updateFolderList(l.id,
l.title,l.href,h),c.apply(k,[g,a,b]),!0===h&&a.notifySave(l.id,l.title,l.href)):!0===h&&a.notifySave();!0===h&&!0===b.showQuickEditLink&&setTimeout(function(){a.getSaveButton().addClass(b.superActionActiveClass)},b.quickEditActivationDelay)}).on("editedFolderItem",b.savePhotoModuleSelector,function(c,e){d("entering handler for [editedFolderItem]");var g=!1,h,k=e.folderItem.userNote;k||d("[save-button.js : handleEditedFolderItem]: blank userNote");if(e.asset.id===b.assetId)g=!0;else if(Array.isArray(e.asset.externalId))for(h=
0;h<e.asset.externalId.length;h+=1){var l=e.asset.externalId[h];if(l.substr(l.indexOf("/")+1)===b.assetId){g=!0;break}}!0===g&&a.updateNoteDisplay(k)}).on("showNote",a.showNote).on("hideNote",a.hideNote)});b.addRenderer(function(a,b,c,d){b.dfd().then(function(){b.setData(a)})});b.addRenderer(function(a,b,c,g){d("calling auth module renderer",arguments);var k=h(this);k.find(".box-default-html").remove();var l=k.find("."+c.saveButtonClass);0===l.size()&&(l=h("\x3cdiv /\x3e",{"class":c.saveButtonClass+
" box-action"}),k.append(l));var m=l.find(".box-action-sleeve");0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":"box-action-sleeve"}),l.append(m));if(!0===c.showQuickEditLink){m.addClass(c.hasSuperActionClass);var n=l.find(".box-action-icon.box-action-quick-edit");0===n.size()&&(n=h("\x3ca /\x3e",{"class":"box-action-icon box-action-quick-edit",href:"#","data-box-target-id":c.savePhotoModule._ref,"data-box-params":JSON.stringify({photoId:c.assetId,isModal:!0,showConfirmation:!1,modalSize:"modal-lg",action:"lookup"})}),
m.append(n))}n=l.find(".box-action-icon.box-action-quick-save."+c.activeClass);0===n.size()&&(n=h("\x3ca /\x3e",{"class":c.activeClass+" box-action-icon box-action-quick-save",href:c.boxHost,target:"_top"}),m.append(n));n=l.find(".box-action-icon.box-action-quick-save").not("."+c.activeClass);0===n.size()&&(n=h("\x3ca /\x3e",{"class":"box-action-icon box-action-quick-save",href:c.boxApiUrlPrefix+"/item/save?assetId\x3d"+c.assetId+"\x26includeFolders\x3dtrue",click:function(){b.ready().then(b.activateSaveButton)}}),
m.append(n));m=l.find("."+c.folderListClass);0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":c.folderListClass+" "+c.disabledClass}),n=h("\x3cdiv /\x3e",{"class":c.folderListTitleClass,text:c.folderListTitle}),m.append(n),l.append(m));if(!0===a[c.assetId].isSaved&&(l.addClass(c.selectedClass),!0===c.showQuickEditLink&&b.firstRender()&&l.addClass(c.superActionActiveClass),m.find("."+c.folderListItemClass).remove(),m.addClass(c.disabledClass),n=a[c.assetId].folders,null!==n&&"object"===typeof n&&Array.isArray(n)&&
0<n.length)){var p,q=0;for(p=0;p<n.length;p+=1){var u=n[p],t=h("\x3cdiv /\x3e",{"class":c.folderListItemClass,itemid:u._id}),x=h("\x3ca /\x3e",{href:u.url,text:u.title,target:"_top"});!0===u.inFolder&&(q+=1,t.addClass(c.showClass));t.append(x);m.append(t)}0<q&&m.removeClass(c.disabledClass)}m=k.find("."+c.collectionSaveButtonClass);!0===c.showCollectionSaveButton&&(0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":c.collectionSaveButtonClass+" box-action"}),k.append(m)),n=m.find(".box-action-sleeve"),0===
n.size()&&(n=h("\x3cdiv /\x3e",{"class":"box-action-sleeve"}),m.append(n)),p=m.find(".box-action-icon."+c.activeClass),0===p.size()&&(p=h("\x3cdiv /\x3e",{"class":c.activeClass+" box-action-icon"}),n.append(p)),p=m.find(".box-action-icon").not("."+c.activeClass),0===p.size()&&(p=h("\x3ca /\x3e",{"class":"box-action-icon",href:"#","data-box-target-id":c.addToCollectionModule._ref,"data-box-params":JSON.stringify({photoId:c.assetId,isModal:!0,showConfirmation:!1,action:"lookup"}),click:function(){b.ready().then(b.activateCollectionSaveButton)}}),
n.append(p)));!0!==c.showNoteButton||!0!==a[c.assetId].isSaved||!0===c.showQuickEditLink&&!0!==b.firstRender()||(l.hide(),m.hide(),l=k.find("."+c.addNoteButtonClass),0===l.size()&&(l=h("\x3cdiv /\x3e",{"class":"box-note-button-add box-hud box-hud-text box-hud-text-action-link"}),k.append(l)),m=l.find(".box-action-link"),0===m.size()&&(m=h("\x3ca /\x3e",{"class":"box-action-link",href:"#","data-box-target-id":c.savePhotoModule._ref,"data-box-params":JSON.stringify({photoId:c.assetId,isModal:!0,showConfirmation:!1,
modalSize:"modal-lg",action:"lookup"}),text:c.addNoteText}),l.append(m)),m=k.find("."+c.showNoteButtonClass),0===m.size()&&(m=h("\x3cdiv /\x3e",{"class":c.showNoteButtonClass+" box-hud box-hud-text box-hud-text-action-link"}),k.append(m)),n=m.find(".box-action-link"),0===n.size()&&(n=h("\x3ca /\x3e",{"class":"box-action-link",href:"#",text:c.showNoteText,click:function(){var a=h(this);setTimeout(function(){a.trigger("showNote")},0);return!1}}),m.append(n)),n=k.find("."+c.noteOverlayClass),0===n.size()&&
(n=h("\x3cdiv /\x3e",{"class":c.noteOverlayClass}),k.append(n)),p=n.find(".box-close"),0===p.size()&&(p=h("\x3ca /\x3e",{href:"#","class":"box-close icon icon-times",click:function(){var a=h(this);setTimeout(function(){a.trigger("hideNote")},0);return!1}}),n.append(p)),q=k.find("."+c.noteDisplayClass),0===q.size()&&(q=h("\x3cdiv /\x3e",{"class":c.noteDisplayClass+" modal-body",text:a[c.assetId].userNote}),n.append(q)),p=q.find(".modal-footer"),0===p.size()&&(p=h("\x3cdiv /\x3e",{"class":"modal-footer"}),
n.append(p)),q=q.find("."+c.editNoteButtonClass),0===q.size()&&(q=h("\x3ca /\x3e",{"class":"box-note-edit-link btn btn-default btn-sm",href:"#","data-box-target-id":c.savePhotoModule._ref,"data-box-params":JSON.stringify({photoId:c.assetId,isModal:!0,showConfirmation:!1,modalSize:"modal-lg",action:"lookup"}),text:c.editNoteText}),p.append(q)),!1===n.hasClass(c.disabledClass)&&(m.addClass(c.disabledClass),null===a[c.assetId].userNote?(l.removeClass(c.disabledClass),n.addClass(c.disabledClass)):(l.addClass(c.disabledClass),
b.dfd().then(function(){b.persist()}))));l=k.find("."+c.notificationClass);0===l.size()&&(l=h("\x3cdiv /\x3e",{"class":c.notificationClass+" box-hud box-hud-text"}),k.append(l))});var p=function(a,b){var c=a.find(".box-default-html");0===c.size()&&(c=h("\x3cdiv /\x3e",{"class":"box-default-html"}),a.append(c));var g=c.find("."+b.saveButtonClass);0===g.size()&&(g=h("\x3cdiv /\x3e",{"class":b.saveButtonClass+" box-action"}),c.append(g));var k=g.find(".box-action-sleeve");0===k.size()&&(k=h("\x3cdiv /\x3e",
{"class":"box-action-sleeve"}),g.append(k));d("calling auth module renderer",arguments);var l=g.find(".box-action-icon.box-action-quick-save."+b.activeClass);0===l.size()&&(l=h("\x3ca /\x3e",{"class":b.activeClass+" box-action-icon box-action-quick-save",href:"#"}),k.append(l));g=g.find(".box-action-icon.box-action-quick-save").not("."+b.activeClass);0===g.size()&&(g=h("\x3ca /\x3e",{"class":"box-action-icon box-action-quick-save",click:function(){return!1}}),k.append(g));!0===b.showCollectionSaveButton&&
(k=c.find("."+b.collectionSaveButtonClass),0===k.size()&&(k=h("\x3cdiv /\x3e",{"class":b.collectionSaveButtonClass+" box-action"}),c.append(k)),c=k.find(".box-action-sleeve"),0===c.size()&&(c=h("\x3cdiv /\x3e",{"class":"box-action-sleeve"}),k.append(c)),g=k.find(".box-action-icon."+b.activeClass),0===g.size()&&(g=h("\x3cdiv /\x3e",{"class":b.activeClass+" box-action-icon"}),c.append(g)),k=k.find(".box-action-icon").not("."+b.activeClass),0===k.size()&&(k=h("\x3ca /\x3e",{"class":"box-action-icon",
click:function(){return!1}}),c.append(k)))};window.SNI.MRB.saveButtonModule=window.SNI.MRB.authenticatedPlugin({reRender:!0,authOptions:{},unauthOptions:{},isAuthenticated:function(){return!0===window._spoofAimAuthState?!0:!0===window._spoofAimUnauthState?!1:SNI.MRB.Util.isAuthenticated()},showCollectionSaveButton:!0,showNoteButton:!1,showQuickEditLink:!1,showNotifications:!0,saveButtonClass:"box-save-button",collectionSaveButtonClass:"box-collection-save-button",folderListClass:"box-folder-list",
folderListItemClass:"box-folder-list-item",folderListTitleClass:"box-folder-list-title",noteOverlayClass:"box-note-overlay",noteDisplayClass:"box-note-display",showNoteButtonClass:"box-note-button-show",addNoteButtonClass:"box-note-button-add",editNoteButtonClass:"box-note-button-edit",notificationClass:"box-notification",disabledClass:"box-disabled",selectedClass:"box-selected",activeClass:"box-active-state",showClass:"box-show",hasSuperActionClass:"box-has-super-action",superActionActiveClass:"box-super-action-active",
addToCollectionModuleSelector:'[itemtype~\x3d"com.scrippsnetworks.photos.AddToCollectionModule"]',savePhotoModuleSelector:'[itemtype~\x3d"com.scrippsnetworks.photos.SavePhotoModule"]',modalSelector:"#box-modal-container",saveButtonActivationDelay:500,notificationTimeout:5E3,collectionButtonDeactivationDelay:500,collectionButtonCancelDeactivationDelay:500,hoverIntentDelay:700,quickEditActivationDelay:5E3,persistenceClass:"box-state-persist-display"},function(a,b){var d=h(this),g=h("\x3cdiv /\x3e");
d.append(g);!0===b.smartPhone&&(p(g,b),c.apply(g,[null,a,b,null]));n.call(g,h.extend(!0,{},b,{url:null,initData:{},authPlugin:a}),b.unauthOptions)},function(a,f,e,g){var k=h(this),l=h("\x3cdiv /\x3e");k.append(l);!0===f.smartPhone&&(p(l,f),c.apply(l,[null,a,f,null]));k=f.assetId;b.call(l,h.extend(!0,{},f,{url:SNI.MRB.Util.getUrlPrefix(f.url)+"/api/box/isSaved?assetId\x3d"+f.assetId+"\x26includeFolders\x3dtrue",dataType:"json",sourceDataFormat:"json",jsonpCallback:"callback"},f.authOptions));var m=
l.data("mrb-plugin");d("thenOptions:",g);!0!==f.triggered&&!0!==e||!g||g.triggeredAssetId!==k||m.ready().then(function(){"object"===typeof g&&"string"===typeof g.invokeMethod&&"function"===typeof m[g.invokeMethod]?m[g.invokeMethod].call(a):m.triggerSave()})});window.SNI.MRB.saveButtonModule.auth=b;window.SNI.MRB.saveButtonModule.unauth=n;h.fn.mrbSaveButtonModule=window.SNI.MRB.saveButtonModule;window.jQuery.fn.mrbSaveButtonModule=window.SNI.MRB.saveButtonModule;var c=function(a,b,c,g){d("calling external renderer for auth module");
a=h(this);!0!==c.smartPhone&&!0!==SNI.MRB.Util.isMobile()||a.addClass("box-smart-phone");b=a.find("."+c.saveButtonClass);0<b.size()&&(b.addClass("box-hud"),b.find(".box-action-sleeve").children().filter(".box-action-icon.box-action-quick-save").not("."+c.activeClass).first().addClass("icon icon-heart-o"),b.find(".box-action-sleeve").children().filter(".box-action-icon.box-action-quick-save."+c.activeClass).first().addClass("icon icon-heart-checked"),b.find(".box-action-sleeve").children().filter(".box-action-icon.box-action-quick-edit").first().addClass("icon icon-pencil-square-o"));
b=a.find("."+c.collectionSaveButtonClass);b.addClass("box-hud");0<b.size()&&(b.find(".box-action-sleeve").children().filter(".box-action-icon").not("."+c.activeClass).first().addClass("icon icon-folder-open-o"),b.find(".box-action-sleeve").children().filter(".box-action-icon."+c.activeClass).first().addClass("icon icon-folder-open"));a.find(".box-note-edit-button").addClass("box-hud box-hud-text");a.find("."+c.folderListItemClass).addClass("small font-weight-bold");a.find("."+c.folderListTitleClass).addClass("small font-weight-book");
a.find("."+c.notificationClass).addClass("small")};window.SNI.MRB.saveButtonModule.auth.addRenderer(c);window.SNI.MRB.saveButtonModule.unauth.addRenderer(c)});
window.mrbContextLoaded(function(h){window.SNI.MRB.addToCollectionModule=window.SNI.MRB.plugin({},function(d,n){var b=h(this);b.find("select").selectpicker(!0===SNI.MRB.Util.isMobile()?"mobile":"");var p=!1;d.enableCreateCollection=function(){if(!0!==p){var c=b.find('[data-action\x3d"enableCreateCollection"]'),a=c.next(".form-group"),d=a.find("input"),e=b.find("select"),g=e.closest(".form-group");p=!0;c.addClass("hide");a.removeClass("hide");d.focus();d.attr("data-required","true");e.attr("data-required",
"false");a.add(g).removeClass("has-error");e.selectpicker("deselectAll")}};d.disableCreateCollection=function(){if(!1!==p){var c=b.find('[data-action\x3d"enableCreateCollection"]'),a=c.next(".form-group"),d=a.find("input"),e=b.find("select"),g=e.closest(".form-group");p=!1;c.removeClass("hide");a.addClass("hide");d.attr("data-required","false");e.attr("data-required","true");a.add(g).removeClass("has-error");a.find('input[type\x3d"text"]').val("")}};b.on("enableCreateCollection",d.enableCreateCollection).on("frame.validate",
function(c){window.SNI.MRB.Util.frameValidate(b,c)}).on("click",".bootstrap-select",d.disableCreateCollection).on("change","select",function(){var b=h(this);""!==h.trim(b.val())&&b.closest(".form-group").removeClass("has-error")}).on("keyup",'input[type\x3d"text"]',function(){var b=h(this);""!==h.trim(b.val())&&b.closest(".form-group").removeClass("has-error")});h("body").on("closeModal",'[itemtype~\x3d"com.scrippsnetworks.photos.AddToCollectionModule"]',function(){var b=h("#box-modal-container");
0<b.find('[itemtype~\x3d"com.scrippsnetworks.photos.AddToCollectionModule"]').size()&&(SNI.BOX.DEBUG("[add-to-collection.js]: closing modal"),b.modal("hide"))})});h.fn.mrbAddToCollectionModule=window.SNI.MRB.addToCollectionModule;window.jQuery.fn.mrbAddToCollectionModule=window.SNI.MRB.addToCollectionModule});
window.mrbContextLoaded(function(h){window.SNI.MRB.photosTutorialModule=window.SNI.MRB.plugin({},function(d,n){var b=h(this);SNI.BOX.DEBUG("Initializing Tutorial module...");h(function(){var d={arrowsNav:!1,allowCSS3:!1,transitionSpeed:400,arrowsNavAutoHide:!1,fadeinLoadedSlide:!1,controlNavigationSpacing:0,controlNavigation:"bullets",imageScaleMode:"none",imageAlignCenter:!1,blockLoop:!0,loop:!1,numImagesToPreload:6,transitionType:!0===window.SNI.MRB.Util.isMobile()?"move":"fade",keyboardNavEnabled:!0},
c=b.find(".box-tutorial-slider");if(0<c.size()){c.recipeBoxRoyalSlider(d);d=c.find(".rsNav");h(".box-tutorial-nav").append(d);c.closest(".box-tutorial").css("visibility","visible");var a=c.data("royalSlider");a.ev.on("rsBeforeAnimStart",function(b){b=a.currSlideId;var d=h(".box-tutorial-nav");0==b?(d.addClass("box-tutorial-first-slide"),d.removeClass("box-tutorial-last-slide")):d.removeClass("box-tutorial-first-slide");b===a.numSlides-1?(d.addClass("box-tutorial-last-slide"),c.attr("data-dismiss",
"modal")):(d.removeClass("box-tutorial-last-slide"),c.attr("data-dismiss",""))})}h("body").on("click",".box-tutorial-skip, .box-tutorial-finish",function(a){a.preventDefault()}).on("click",".box-tutorial-next, .box-tutorial-start",function(b){b.preventDefault();a.next()}).on("click",".box-tutorial-prev",function(b){b.preventDefault();a.prev()})});h("body").on("loadModule",'[itemtype~\x3d"com.scrippsnetworks.photos.PhotosTutorialModule"]',function(b,c){SNI.BOX.DEBUG("[LOAD MODULE] for photo tutorial",
c);SNI.BOX.loadModule(c.moduleId,c)})});h.fn.mrbPhotosTutorialModule=window.SNI.MRB.photosTutorialModule;window.jQuery.fn.mrbPhotosTutorialModule=window.SNI.MRB.photosTutorialModule});