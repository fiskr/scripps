(function(e){var t=t||e({});t.extend({reminder:function(t,n){var r={selector:".email-reminder-signup",placeholder:"ex. jane@"+location.hostname.replace("www.",""),emailError:"check the address format",successMsg:"<h3>Thank You!</h3><p>You have successfully registered to receive {list_label} email reminders. Emails will be sent to {email}.</p>",failureMsg:"Submission failed! Please contact Customer Service.",hintClass:"input-hint",listLabel:""};if(n){n=e.extend(r,n)}else{n=r}if(!t){t="none"}e(n.selector).each(function(){function f(){var e=i.val();if(e===""){i.val(n.placeholder).addClass(n.hintClass)}else if(e===n.placeholder){i.addClass(n.hintClass)}}function l(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)}var r=e(this),i=r.find("input[type=text]"),s=r.find("#valid-msg"),o=r.find(".thanks-msg"),u=r.find(".rounded-input"),a=e('<div class="reminder-loading" style="display:none;"><p><img class="plain-img" src="http://images.hgtv.com/webhgrm/rm10/pkgs/2012/greenhome/images/ajax-loader.gif" /> Submitting...</p></div>').prependTo(r);r.css({minHeight:r.height()});i.focus(function(){if(i.val()===n.placeholder){e(this).val("").removeClass(n.hintClass)}u.addClass("focus");e("form-group").removeClass("has-error")}).blur(function(){f();u.removeClass("focus")}).bind("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;if(t==13){r.find("button").click();return false}});r.find("button").click(function(){var f=i.val();i.bind("keyup",function(){if(l(i.val())){e(".form-group").removeClass("has-error");e(".form-control-feedback").css({visibility:"hidden"})}else{e(".form-group").addClass("has-error");e(".form-control-feedback").css({visibility:"visible"})}});if(l(f)){e(this).focus();i.removeClass("error");a.show().find("p").css({top:(r.outerHeight()-a.find("p").height())/2+"px"});e.getJSON("https://mynewsletters.scrippsnetworks.com/services/reminders_home_json.php?emailaddress="+f+"&list="+t+"&jsonpCallback=?",function(t){u.hide();a.hide();if(t.success==="true"){var l=n.listLabel,c=r.find(".list-label")[0];if(c&&c.innerHTML){l=c.innerHTML}var h=n.successMsg.replace("{email}",f).replace("{list_label}",l);o.html(h).css({visibility:"visible",display:"block"});u.removeClass("error");a.siblings(":not(.form-wrap, .thanks-msg)").hide();if(n.successCallback&&typeof n.successCallback=="function"){n.successCallback(r)}}else{e(".form-group").addClass("has-error");e(".form-control-feedback").css({visibility:"visible"});s.addClass("fail").text(n.failureMsg)}i.closest(".form-wrap").find(".label").hide()})}else{e(".form-group").addClass("has-error");e(".form-control-feedback").css({visibility:"visible"});s.addClass("fail").text(n.emailError);return false}});f()})}});t.reminder("dream",{successMsg:"<h3>Thank You!</h3><p>You have successfully registered to receive {list_label}. Messages will be sent to {email}.</p>"})})(jQuery)